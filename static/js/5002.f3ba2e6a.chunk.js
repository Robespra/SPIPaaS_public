(self.webpackChunksp_ipaasv18_0_4=self.webpackChunksp_ipaasv18_0_4||[]).push([[5002],{19991:function(e,t,n){e.exports=function(e,t){"use strict";var r="default"in e?e.default:e;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y(e,t){return e(t={exports:{}},t.exports),t.exports}Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var b=(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()&&Object.assign,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function w(){}var C=y((function(e){e.exports=function(){function e(e,t,n,r,o,i){if(i!==b){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=w,n.PropTypes=n}()})),k=y((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t})),S=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,n=(r=this,(o=document.createElement("style")).setAttribute("data-emotion",r.key),void 0!==r.nonce&&o.setAttribute("nonce",r.nonce),o.appendChild(document.createTextNode("")),o);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,t),this.tags.push(n)}var r,o,i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(i);try{var s=105===e.charCodeAt(1)&&64===e.charCodeAt(0);a.insertRule(e,s?0:a.cssRules.length)}catch(t){}}else i.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}();function x(e){function t(e,t,r){var o=t.trim().split(f),i=(t=o).length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<i;++s)t[s]=n(e,t[s],r).trim();break;default:var l=s=0;for(t=[];s<i;++s)for(var c=0;c<a;++c)t[l++]=n(e[c]+" ",o[s],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(r<33&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var a=e+";",s=2*t+3*n+4*i;if(944===s){e=a.indexOf(":",9)+1;var l=a.substring(e,a.length-1).trim();return l=a.substring(0,e).trim()+l+";",1===D||2===D&&o(l,1)?"-webkit-"+l+l:l}if(0===D||2===D&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(E,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(l=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+l+a;case 1005:return d.test(a)?a.replace(p,":-webkit-")+a.replace(p,":-moz-")+a:a;case 1e3:switch(t=(l=a.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=a.replace(b,"tb");break;case 232:l=a.replace(b,"tb-rl");break;case 220:l=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+l+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(l=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(l.charCodeAt(8)<111)break;case 115:a=a.replace(l,"-webkit-"+l)+";"+a;break;case 207:case 102:a=a.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(l,"-webkit-"+l)+";"+a.replace(l,"-ms-"+l+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return l=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+l+"-ms-flex-"+l+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(k,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(k,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===x.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):a.replace(l,"-webkit-"+l)+a.replace(l,"-moz-"+l.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+i&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),P(2!==t?r:r.replace(S,"$1"),n,t)}function i(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(C," or ($1)").substring(4):"("+t+")"}function a(e,t,n,r,o,i,a,s,c,u){for(var p,d=0,h=t;d<N;++d)switch(p=R[d].call(l,e,h,n,r,o,i,a,s,c,u)){case void 0:case!1:case!0:case null:break;default:h=p}if(h!==t)return h}function s(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!=typeof e?D=1:(D=2,P=e):D=0),s}function l(e,n){var s=e;if(s.charCodeAt(0)<33&&(s=s.trim()),s=[s],0<N){var l=a(-1,n,s,s,O,M,0,0,0,0);void 0!==l&&"string"==typeof l&&(n=l)}var p=function e(n,s,l,p,d){for(var h,f,m,b,C,k=0,S=0,x=0,E=0,R=0,P=0,I=m=h=0,L=0,B=0,z=0,_=0,V=l.length,$=V-1,W="",j="",H="",K="";L<V;){if(f=l.charCodeAt(L),L===$&&0!==S+E+x+k&&(0!==S&&(f=47===S?10:47),E=x=k=0,V++,$++),0===S+E+x+k){if(L===$&&(0<B&&(W=W.replace(u,"")),0<W.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:W+=l.charAt(L)}f=59}switch(f){case 123:for(h=(W=W.trim()).charCodeAt(0),m=1,_=++L;L<V;){switch(f=l.charCodeAt(L)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(L+1)){case 42:case 47:e:{for(I=L+1;I<$;++I)switch(l.charCodeAt(I)){case 47:if(42!==f||42!==l.charCodeAt(I-1)||L+2===I)break;L=I+1;break e;case 10:if(47===f){L=I+1;break e}}L=I}}break;case 91:f++;case 40:f++;case 34:case 39:for(;L++<$&&l.charCodeAt(L)!==f;);}if(0===m)break;L++}if(64===(m=l.substring(_,L),0===h&&(h=(W=W.replace(c,"").trim()).charCodeAt(0)),h)){switch(0<B&&(W=W.replace(u,"")),f=W.charCodeAt(1)){case 100:case 109:case 115:case 45:B=s;break;default:B=T}if(_=(m=e(s,B,m,f,d+1)).length,0<N&&(C=a(3,m,B=t(T,W,z),s,O,M,_,f,d,p),W=B.join(""),void 0!==C&&0===(_=(m=C.trim()).length)&&(f=0,m="")),0<_)switch(f){case 115:W=W.replace(w,i);case 100:case 109:case 45:m=W+"{"+m+"}";break;case 107:m=(W=W.replace(v,"$1 $2"))+"{"+m+"}",m=1===D||2===D&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=W+m,112===p&&(j+=m,m="")}else m=""}else m=e(s,t(s,W,z),m,p,d+1);H+=m,m=z=B=I=h=0,W="",f=l.charCodeAt(++L);break;case 125:case 59:if(1<(_=(W=(0<B?W.replace(u,""):W).trim()).length))switch(0===I&&(h=W.charCodeAt(0),45===h||96<h&&h<123)&&(_=(W=W.replace(" ",":")).length),0<N&&void 0!==(C=a(1,W,s,n,O,M,j.length,p,d,p))&&0===(_=(W=C.trim()).length)&&(W="\0\0"),h=W.charCodeAt(0),f=W.charCodeAt(1),h){case 0:break;case 64:if(105===f||99===f){K+=W+l.charAt(L);break}default:58!==W.charCodeAt(_-1)&&(j+=r(W,h,f,W.charCodeAt(2)))}z=B=I=h=0,W="",f=l.charCodeAt(++L)}}switch(f){case 13:case 10:47===S?S=0:0===1+h&&107!==p&&0<W.length&&(B=1,W+="\0"),0<N*F&&a(0,W,s,n,O,M,j.length,p,d,p),M=1,O++;break;case 59:case 125:if(0===S+E+x+k){M++;break}default:switch(M++,b=l.charAt(L),f){case 9:case 32:if(0===E+k+S)switch(R){case 44:case 58:case 9:case 32:b="";break;default:32!==f&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===E+S+k&&(B=z=1,b="\f"+b);break;case 108:if(0===E+S+k+A&&0<I)switch(L-I){case 2:112===R&&58===l.charCodeAt(L-3)&&(A=R);case 8:111===P&&(A=P)}break;case 58:0===E+S+k&&(I=L);break;case 44:0===S+x+E+k&&(B=1,b+="\r");break;case 34:case 39:0===S&&(E=E===f?0:0===E?f:E);break;case 91:0===E+S+x&&k++;break;case 93:0===E+S+x&&k--;break;case 41:0===E+S+k&&x--;break;case 40:0===E+S+k&&(0===h&&(2*R+3*P===533||(h=1)),x++);break;case 64:0===S+x+E+k+I+m&&(m=1);break;case 42:case 47:if(!(0<E+k+x))switch(S){case 0:switch(2*f+3*l.charCodeAt(L+1)){case 235:S=47;break;case 220:_=L,S=42}break;case 42:47===f&&42===R&&_+2!==L&&(33===l.charCodeAt(_+2)&&(j+=l.substring(_,L+1)),b="",S=0)}}0===S&&(W+=b)}P=R,R=f,L++}if(0<(_=j.length)){if(B=s,0<N&&void 0!==(C=a(2,j,B,n,O,M,_,p,d,p))&&0===(j=C).length)return K+j+H;if(j=B.join(",")+"{"+j+"}",0!=D*A){switch(2!==D||o(j,2)||(A=0),A){case 111:j=j.replace(y,":-moz-$1")+j;break;case 112:j=j.replace(g,"::-webkit-input-$1")+j.replace(g,"::-moz-$1")+j.replace(g,":-ms-input-$1")+j}A=0}}return K+j+H}(T,s,n,0,0);return 0<N&&void 0!==(l=a(-2,p,s,s,O,M,p.length,0,0,0))&&(p=l),A=0,M=O=1,p}var c=/^\0+/g,u=/[\0\r\f]/g,p=/: */g,d=/zoo|gra/,h=/([,: ])(transform)/g,f=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,y=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,C=/([\s\S]*?);/g,k=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,x=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,M=1,O=1,A=0,D=1,T=[],R=[],N=0,P=null,F=0;return l.use=function e(t){switch(t){case void 0:case null:N=R.length=0;break;default:if("function"==typeof t)R[N++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else F=0|!!t}return e},l.set=s,void 0!==e&&s(e),l}var E="/*|*/";function M(e){e&&O.current.insert(e+"}")}var O={current:null},A=function(e,t,n,r,o,i,a,s,l,c){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return O.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===s)return t+E;break;case 3:switch(s){case 102:case 112:return O.current.insert(n[0]+t),"";default:return t+(0===c?E:"")}case-2:t.split("/*|*/}").forEach(M)}};function D(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]):r+=n+" "})),r}var T,R,N=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert("."+r,o,e.sheet,!0),o=o.next}while(void 0!==o)}},P={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},F=/[A-Z]|^ms/g,I=/_EMO_([^_]+?)_([^]*?)_EMO_/g,L=function(e){return 45===e.charCodeAt(1)},B=(T=function(e){return L(e)?e:e.replace(F,"-$&").toLowerCase()},R={},function(e){return void 0===R[e]&&(R[e]=T(e)),R[e]}),z=function(e,t){if(null==t||"boolean"==typeof t)return"";switch(e){case"animation":case"animationName":"string"==typeof t&&(t=t.replace(I,(function(e,t,n){return V={name:t,styles:n,next:V},t})))}return 1===P[e]||L(e)||"number"!=typeof t||0===t?t:t+"px"};function _(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return V={name:n.name,styles:n.styles,next:V},n.name;if(void 0===n.styles)return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=_(e,t,n[o],!1);else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":r+=B(i)+":"+z(i,a)+";";else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]])r+=i+"{"+_(e,t,a,!1)+"}";else for(var s=0;s<a.length;s++)r+=B(i)+":"+z(i,a[s])+";"}return r}(e,t,n);var o=n.next;if(void 0!==o)for(;void 0!==o;)V={name:o.name,styles:o.styles,next:V},o=o.next;return n.styles;case"function":if(void 0!==e){var i=V,a=n(e);return V=i,_(e,t,a,r)}default:if(null==t)return n;var s=t[n];return void 0===s||r?n:s}}var V,$,W,j=/label:\s*([^\s;\n{]+)\s*;/g,H=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";V=void 0;var i=e[0];null==i||void 0===i.raw?o+=_(n,t,i,r=!1):o+=i[0];for(var a=1;a<e.length;a++)o+=_(n,t,e[a],46===o.charCodeAt(o.length-1)),r&&(o+=i[a]);j.lastIndex=0;for(var s,l="";null!==(s=j.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=e.length,r=0,o=0;4<=n;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:V}},K={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},U=/[A-Z]|^ms/g,q=/_EMO_([^_]+?)_([^]*?)_EMO_/g,J=function(e){return 45===e.charCodeAt(1)},G=($=function(e){return J(e)?e:e.replace(U,"-$&").toLowerCase()},W={},function(e){return void 0===W[e]&&(W[e]=$(e)),W[e]}),X=function(e,t){if(null==t||"boolean"==typeof t)return"";switch(e){case"animation":case"animationName":"string"==typeof t&&(t=t.replace(q,(function(e,t,n){return Z={name:t,styles:n,next:Z},t})))}return 1===K[e]||J(e)||"number"!=typeof t||0===t?t:t+"px"};function Y(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Z={name:n.name,styles:n.styles,next:Z},n.name;if(void 0===n.styles)return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Y(e,t,n[o],!1);else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":r+=G(i)+":"+X(i,a)+";";else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]])r+=i+"{"+Y(e,t,a,!1)+"}";else for(var s=0;s<a.length;s++)r+=G(i)+":"+X(i,a[s])+";"}return r}(e,t,n);var o=n.next;if(void 0!==o)for(;void 0!==o;)Z={name:o.name,styles:o.styles,next:Z},o=o.next;return n.styles;case"function":if(void 0!==e){var i=Z,a=n(e);return Z=i,Y(e,t,a,r)}default:if(null==t)return n;var s=t[n];return void 0===s||r?n:s}}var Z,Q=/label:\s*([^\s;\n{]+)\s*;/g;function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Z=void 0;var i=e[0];null==i||void 0===i.raw?o+=Y(n,t,i,r=!1):o+=i[0];for(var a=1;a<e.length;a++)o+=Y(n,t,e[a],46===o.charCodeAt(o.length-1)),r&&(o+=i[a]);Q.lastIndex=0;for(var s,l="";null!==(s=Q.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=e.length,r=0,o=0;4<=n;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Z}}(t)}var te=e.createContext(function(e){void 0===e&&(e={});var t,n=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var r,o=new x(t),i={};r=e.container||document.head;var a,s=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(s,(function(e){e.getAttribute("data-emotion-"+n).split(" ").forEach((function(e){i[e]=!0})),e.parentNode!==r&&r.appendChild(e)})),o.use(e.stylisPlugins)(A),a=function(e,t,n,r){var i=t.name;O.current=n,o(e,t.styles),r&&(l.inserted[i]=!0)};var l={key:n,sheet:new S({key:n,container:r,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:i,registered:{},insert:a};return l}()),ne=e.createContext({}),re=(te.Provider,function(t){return e.forwardRef((function(n,r){return e.createElement(te.Consumer,null,(function(e){return t(n,e,r)}))}))}),oe="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ie=Object.prototype.hasOwnProperty,ae=function(t,n,r,o){var i=n[oe],a=[],s="",l=null===r?n.css:n.css(r);"string"==typeof l&&void 0!==t.registered[l]&&(l=t.registered[l]),a.push(l),void 0!==n.className&&(s=D(t.registered,a,n.className));var c=H(a);N(t,c,"string"==typeof i),s+=t.key+"-"+c.name;var u={};for(var p in n)!ie.call(n,p)||"css"===p||p===oe||(u[p]=n[p]);return u.ref=o,u.className=s,e.createElement(i,u)},se=re((function(t,n,r){return"function"==typeof t.css?e.createElement(ne.Consumer,null,(function(e){return ae(n,t,e,r)})):ae(n,t,null,r)})),le=function(t,n){var r=arguments;if(null==n||null==n.css)return e.createElement.apply(void 0,r);var o=r.length,i=new Array(o);i[0]=se;var a={};for(var s in n)ie.call(n,s)&&(a[s]=n[s]);a[oe]=t,i[1]=a;for(var l=2;l<o;l++)i[l]=r[l];return e.createElement.apply(null,i)},ce=function(){var e=ee.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},ue=re((function(t,n){return e.createElement(ne.Consumer,null,(function(e){var r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=H(t,n.registered);return N(n,o,!1),n.key+"-"+o.name},o={css:r,cx:function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return i=n.registered,a=r,s=function e(t){for(var n=t.length,r=0,o="";r<n;r++){var i=t[r];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))a=e(i);else for(var s in a="",i)i[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=i}a&&(o&&(o+=" "),o+=a)}}return o}(t),c=D(i,l=[],s),l.length<2?s:c+a(l);var i,a,s,l,c},theme:e},i=t.children(o);return i}))})),pe=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},de=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,p=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case p:case i:case s:case a:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case l:return e;default:return t}}case m:case f:case o:return t}}}function g(e){return v(e)===p}t.typeOf=v,t.AsyncMode=u,t.ConcurrentMode=p,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=m,t.Memo=f,t.Portal=o,t.Profiler=s,t.StrictMode=a,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===p||e===s||e===a||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===f||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d)},t.isAsyncMode=function(e){return g(e)||v(e)===u},t.isConcurrentMode=g,t.isContextConsumer=function(e){return v(e)===c},t.isContextProvider=function(e){return v(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===d},t.isFragment=function(e){return v(e)===i},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===f},t.isPortal=function(e){return v(e)===o},t.isProfiler=function(e){return v(e)===s},t.isStrictMode=function(e){return v(e)===a},t.isSuspense=function(e){return v(e)===h}}));g(de),de.typeOf,de.AsyncMode,de.ConcurrentMode,de.ContextConsumer,de.ContextProvider,de.Element,de.ForwardRef,de.Fragment,de.Lazy,de.Memo,de.Portal,de.Profiler,de.StrictMode,de.Suspense,de.isValidElementType,de.isAsyncMode,de.isConcurrentMode,de.isContextConsumer,de.isContextProvider,de.isElement,de.isForwardRef,de.isFragment,de.isLazy,de.isMemo,de.isPortal,de.isProfiler,de.isStrictMode,de.isSuspense;var he=y((function(e,t){}));g(he),he.typeOf,he.AsyncMode,he.ConcurrentMode,he.ContextConsumer,he.ContextProvider,he.Element,he.ForwardRef,he.Fragment,he.Lazy,he.Memo,he.Portal,he.Profiler,he.StrictMode,he.Suspense,he.isValidElementType,he.isAsyncMode,he.isConcurrentMode,he.isContextConsumer,he.isContextProvider,he.isElement,he.isForwardRef,he.isFragment,he.isLazy,he.isMemo,he.isPortal,he.isProfiler,he.isStrictMode,he.isSuspense;var fe=y((function(e){e.exports=de})),me={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ve={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ge={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ye={};function be(e){return fe.isMemo(e)?ge:ye[e.$$typeof]||me}ye[fe.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var we=Object.defineProperty,Ce=Object.getOwnPropertyNames,ke=Object.getOwnPropertySymbols,Se=Object.getOwnPropertyDescriptor,xe=Object.getPrototypeOf,Ee=Object.prototype,Me=function e(t,n,r){if("string"==typeof n)return t;if(Ee){var o=xe(n);o&&o!==Ee&&e(t,o,r)}var i=Ce(n);ke&&(i=i.concat(ke(n)));for(var a=be(t),s=be(n),l=0;l<i.length;++l){var c=i[l];if(!(ve[c]||r&&r[c]||s&&s[c]||a&&a[c])){var u=Se(n,c);try{we(t,c,u)}catch(e){}}}return t},Oe=pe((function(e){return pe((function(t){return function(e,t){return"function"==typeof t?t(e):k({},e,t)}(e,t)}))})),Ae=function(t){return e.createElement(ne.Consumer,null,(function(n){return t.theme!==n&&(n=Oe(n)(t.theme)),e.createElement(ne.Provider,{value:n},t.children)}))};function De(t){var n=t.displayName||t.name||"Component",r=e.forwardRef((function(n,r){return e.createElement(ne.Consumer,null,(function(o){return e.createElement(t,k({theme:o,ref:r},n))}))}));return r.displayName="WithTheme("+n+")",Me(r,t)}var Te,Re,Ne,Pe,Fe=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).getVisibleModal=function(){for(var e=n.props,t=e.modals,r=e.view,o=0;o<t.length;o++){var i=t[o];if(i.condition(r.state))return i.component}},n}return p(t,e.Component),s(t,[{key:"render",value:function(){var e=this.props.view;if(!e)return null;var t=this.getVisibleModal();return t?r.createElement(t,{view:e}):null}}]),t}(),Ie=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).getVisibleOverlay=function(){for(var e=n.props.overlays,t=0;t<e.length;t++){var r=e[t],o=document.getElementsByClassName(r.elmClassName);if(o[0])return{marker:o[0],OverlayComponent:r.component}}},n}return p(t,e.Component),s(t,[{key:"render",value:function(){var e=this.getVisibleOverlay();if(!e)return null;var t=this.props,n=t.view,o=t.editorWrapper,i=e.OverlayComponent,a=e.marker;return r.createElement(i,{view:n,editorWrapper:o,marker:a})}}]),t}(),Le=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Be=(Te=function(e){return Le.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91},Re={},function(e){return void 0===Re[e]&&(Re[e]=Te(e)),Re[e]}),ze={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_e=/[A-Z]|^ms/g,Ve=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$e=function(e){return 45===e.charCodeAt(1)},We=(Ne=function(e){return $e(e)?e:e.replace(_e,"-$&").toLowerCase()},Pe={},function(e){return void 0===Pe[e]&&(Pe[e]=Ne(e)),Pe[e]}),je=function(e,t){if(null==t||"boolean"==typeof t)return"";switch(e){case"animation":case"animationName":"string"==typeof t&&(t=t.replace(Ve,(function(e,t,n){return Ke={name:t,styles:n,next:Ke},t})))}return 1===ze[e]||$e(e)||"number"!=typeof t||0===t?t:t+"px"};function He(e,t,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ke={name:n.name,styles:n.styles,next:Ke},n.name;if(void 0===n.styles)return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=He(e,t,n[o],!1);else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":r+=We(i)+":"+je(i,a)+";";else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]])r+=i+"{"+He(e,t,a,!1)+"}";else for(var s=0;s<a.length;s++)r+=We(i)+":"+je(i,a[s])+";"}return r}(e,t,n);var o=n.next;if(void 0!==o)for(;void 0!==o;)Ke={name:o.name,styles:o.styles,next:Ke},o=o.next;return n.styles;case"function":if(void 0!==e){var i=Ke,a=n(e);return Ke=i,He(e,t,a,r)}default:if(null==t)return n;var s=t[n];return void 0===s||r?n:s}}var Ke,Ue=/label:\s*([^\s;\n{]+)\s*;/g,qe=Be,Je=function(e){return"theme"!==e&&"innerRef"!==e},Ge=function(e){return"string"==typeof e&&96<e.charCodeAt(0)?qe:Je},Xe=function t(n,r){var o,i,a;void 0!==r&&(o=r.label,a=r.target,i=n.__emotion_forwardProp&&r.shouldForwardProp?function(e){return n.__emotion_forwardProp(e)&&r.shouldForwardProp(e)}:r.shouldForwardProp);var s=n.__emotion_real===n,l=s&&n.__emotion_base||n;"function"!=typeof i&&s&&(i=n.__emotion_forwardProp);var c=i||Ge(l),u=!c("as");return function(){var p=arguments,d=s&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==o&&d.push("label:"+o+";"),null==p[0]||void 0===p[0].raw)d.push.apply(d,p);else{d.push(p[0][0]);for(var h=p.length,f=1;f<h;f++)d.push(p[f],p[0][f])}var m=re((function(t,n,r){return e.createElement(ne.Consumer,null,(function(o){var s,p,h,f,m=u&&t.as||l,v="",g=[],y=t;if(null==t.theme){for(var b in y={},t)y[b]=t[b];y.theme=o}"string"==typeof t.className&&(v+=(s=n.registered,p=g,h=t.className,f="",h.split(" ").forEach((function(e){void 0!==s[e]?p.push(s[e]):f+=e+" "})),f));var w=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Ke=void 0;var i=e[0];null==i||void 0===i.raw?o+=He(n,t,i,r=!1):o+=i[0];for(var a=1;a<e.length;a++)o+=He(n,t,e[a],46===o.charCodeAt(o.length-1)),r&&(o+=i[a]);Ue.lastIndex=0;for(var s,l="";null!==(s=Ue.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=e.length,r=0,o=0;4<=n;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Ke}}(d.concat(g),n.registered,y);!function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name])for(var o=t;e.insert("."+r,o,e.sheet,!0),void 0!==(o=o.next););}(n,w,"string"==typeof m),v+=n.key+"-"+w.name,void 0!==a&&(v+=" "+a);var C=u&&void 0===i?Ge(m):c,k={};for(var S in t)u&&"as"===S||C(S)&&(k[S]=t[S]);return k.className=v,k.ref=r||t.innerRef,e.createElement(m,k)}))}));return m.displayName=void 0!==o?o:"Styled("+("string"==typeof l?l:l.displayName||l.name||"Component")+")",m.defaultProps=n.defaultProps,(m.__emotion_real=m).__emotion_base=l,m.__emotion_styles=d,m.__emotion_forwardProp=i,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(e,n){return t(e,void 0!==n?k({},r||{},n):r).apply(void 0,d)},m}},Ye=function(e){return r.createElement(Ze,e)},Ze=Xe("button",{target:"e5b46pv0",label:"StyledButton"})("align-items:center;cursor:pointer;display:flex;justify-content:center;background-color:",(function(e){return e.theme.button.toolbar.backgroundColor}),";color:",(function(e){return e.theme.button.toolbar.color}),";border:",(function(e){return e.theme.button.toolbar.border}),";border-radius:",(function(e){return e.theme.button.toolbar.borderRadius}),";height:",(function(e){return e.theme.button.toolbar.height}),";width:",(function(e){return e.theme.button.toolbar.width}),";margin:",(function(e){return e.theme.button.toolbar.margin}),";padding:",(function(e){return e.theme.button.toolbar.padding}),";font-size:",(function(e){return e.theme.button.toolbar.fontSize}),";:active{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:active"]}),";}:focus{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:hover"]}),";}:hover{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.toolbar["&:hover"]}),";}",(function(e){var t=e.selected,n=e.theme;return t&&n.button.toolbar["&:selected"]}),";",(function(e){var t=e.disabled,n=e.theme;return t&&n.button.toolbar["&:disabled"]}),";"),Qe=function(e){return r.createElement(et,e)},et=Xe("button",{target:"eyuvjzl0",label:"StyledButton"})("align-items:center;cursor:pointer;display:flex;justify-content:center;background-color:",(function(e){return e.theme.button.link.backgroundColor}),";color:",(function(e){return e.theme.button.link.color}),";border:",(function(e){return e.theme.button.link.border}),";border-radius:",(function(e){return e.theme.button.link.borderRadius}),";height:",(function(e){return e.theme.button.link.height}),";width:",(function(e){return e.theme.button.link.width}),";margin:",(function(e){return e.theme.button.link.margin}),";padding:",(function(e){return e.theme.button.link.padding}),";font-size:",(function(e){return e.theme.button.link.fontSize}),";text-decoration:",(function(e){return e.theme.button.link.textDecoration}),";:active{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:active"]}),";}:hover{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:hover"]}),";}:focus{",(function(e){var t=e.disabled,n=e.theme;return!t&&n.button.link["&:focus"]}),";}",(function(e){var t=e.disabled,n=e.theme;return t&&n.button.link["&:disabled"]}),";"),tt=(Xe("button",{target:"edjkiew0",label:"StyledButton"})("align-items:center;cursor:pointer;display:flex;justify-content:center;background-color:",(function(e){return e.theme.button.primary.backgroundColor}),";color:",(function(e){return e.theme.button.primary.color}),";border:",(function(e){return e.theme.button.primary.border}),";border-radius:",(function(e){return e.theme.button.primary.borderRadius}),";height:",(function(e){return e.theme.button.primary.height}),";width:",(function(e){return e.theme.button.primary.width}),";margin:",(function(e){return e.theme.button.primary.margin}),";padding:",(function(e){return e.theme.button.primary.padding}),";font-size:",(function(e){return e.theme.button.primary.fontSize}),";:hover{",(function(e){var t=e.disabled,n=e.theme;return t?"":n.button.primary["&:hover"]}),";}",(function(e){var t=e.selected,n=e.theme;return t&&n.button.primary["&:selected"]}),";",(function(e){var t=e.disabled,n=e.theme;return t&&n.button.primary["&:disabled"]}),";"),Xe("svg",{target:"ey8glgo0",label:"StyledSVG"})("fill:",(function(e){return e.theme.icon.fill}),";:hover{",(function(e){return e.theme.icon["&:hover"]}),";}")),nt={ArrowDown:function(e){var t=e.className,n=e.onClick;return r.createElement(tt,{width:"24",height:"24",viewBox:"0 0 24 24",onClick:n,className:t},r.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))},Bold:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 22"},r.createElement("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},Cross:function(e){var t=e.className,n=e.onClick;return r.createElement(tt,{width:"24",height:"24",viewBox:"0 0 24 24",className:t,onClick:n},r.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},H1:De((function(e){var t=e.theme;return r.createElement(tt,{width:"20px",height:"15px",viewBox:"0 0 20 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H1",fill:t.icon.fill},r.createElement("tspan",{x:"-0.504882812",y:"13"},"H1"))))})),H2:De((function(e){var t=e.theme;return r.createElement(tt,{width:"23px",height:"15px",viewBox:"0 0 23 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H2",fill:t.icon.fill},r.createElement("tspan",{x:"-0.0048828125",y:"13"},"H2"))))})),H3:De((function(e){var t=e.theme;return r.createElement(tt,{width:"23px",height:"15px",viewBox:"0 0 23 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H3",fill:t.icon.fill},r.createElement("tspan",{x:"-0.0048828125",y:"13"},"H3"))))})),H4:De((function(e){var t=e.theme;return r.createElement(tt,{width:"23px",height:"15px",viewBox:"0 0 23 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H4",fill:t.icon.fill},r.createElement("tspan",{x:"-0.0048828125",y:"13"},"H4"))))})),H5:De((function(e){var t=e.theme;return r.createElement(tt,{width:"22px",height:"15px",viewBox:"0 0 22 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H5",fill:t.icon.fill},r.createElement("tspan",{x:"-1.00488281",y:"13"},"H5"))))})),H6:De((function(e){var t=e.theme;return r.createElement(tt,{width:"23px",height:"15px",viewBox:"0 0 23 15"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"H6",fill:t.icon.fill},r.createElement("tspan",{x:"-0.0048828125",y:"13"},"H6"))))})),Image:function(){return r.createElement(tt,{width:"18",height:"18",viewBox:"0 0 22 22"},r.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),r.createElement("path",{d:"M21 21V3H3v18h18zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}))},Italic:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 22"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"}))},Link:function(){return r.createElement(tt,{width:"22",height:"22",viewBox:"0 0 24 24"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))},ListBulleted:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 24"},r.createElement("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))},ListNumbered:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 24"},r.createElement("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},P:De((function(e){var t=e.theme;return r.createElement(tt,{width:"11px",height:"14px",viewBox:"0 0 11 14"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",fontFamily:"ArialMT, Arial",fontSize:"15",fontWeight:"600"},r.createElement("text",{id:"P",fill:t.icon.fill},r.createElement("tspan",{x:"-0.502929688",y:"12"},"P"))))})),Question:function(){return r.createElement(tt,{width:"12px",height:"18px",viewBox:"0 0 12 18"},r.createElement("title",null,"question"),r.createElement("desc",null,"Created with Sketch."),r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1"},r.createElement("g",{id:"question"},r.createElement("path",{d:"M6.66666667,14.6666667 L5.33333333,14.6666667 C4.93333333,14.6666667 4.66666667,14.9333333 4.66666667,15.3333333 L4.66666667,16.6666667 C4.66666667,17.0666667 4.93333333,17.3333333 5.33333333,17.3333333 L6.66666667,17.3333333 C7.06666667,17.3333333 7.33333333,17.0666667 7.33333333,16.6666667 L7.33333333,15.3333333 C7.33333333,14.9333333 7.06666667,14.6666667 6.66666667,14.6666667 Z",id:"Path"}),r.createElement("path",{d:"M6,0 C2.66666667,0 0,2.66666667 0,6 C0,6.33333333 0,6.66666667 0.0666666667,7 C0.133333333,7.4 0.533333333,7.6 0.933333333,7.53333333 L2.2,7.13333333 C2.53333333,7.06666667 2.73333333,6.73333333 2.66666667,6.4 C2.66666667,6.26666667 2.66666667,6.13333333 2.66666667,6 C2.66666667,4.13333333 4.13333333,2.66666667 6,2.66666667 C7.86666667,2.66666667 9.33333333,4.13333333 9.33333333,6 C9.33333333,7.13333333 8.66666667,7.66666667 7.46666667,8.66666667 C6.33333333,9.6 5,10.6666667 4.66666667,12.6 C4.6,13 4.93333333,13.3333333 5.33333333,13.3333333 L6.66666667,13.3333333 C7,13.3333333 7.26666667,13.1333333 7.33333333,12.8 C7.53333333,12 8.13333333,11.4666667 9.13333333,10.7333333 C10.4,9.73333333 12,8.46666667 12,6 C12,2.66666667 9.33333333,0 6,0 Z",id:"Path"}))))},Redo:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 24"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}))},Strike:De((function(e){var t=e.theme;return r.createElement(tt,{width:"15",height:"13",viewBox:"0 0 15 13",style:{marginTop:-2}},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"baseline-strikethrough_s-24px-(2)",fill:t.icon.fill,fillRule:"nonzero"},r.createElement("path",{d:"M3.53333333,4.79166667 C3.31666667,4.39166667 3.20833333,3.93333333 3.20833333,3.4 C3.20833333,2.89166667 3.31666667,2.43333333 3.54166667,2.00833333 C3.75833333,1.59166667 4.06666667,1.23333333 4.46666667,0.933333333 C4.86666667,0.641666667 5.34166667,0.408333333 5.88333333,0.241666667 C6.43333333,0.0833333333 7.04166667,0 7.7,0 C8.375,0 8.98333333,0.0916666667 9.54166667,0.283333333 C10.0916667,0.466666667 10.5666667,0.733333333 10.95,1.06666667 C11.3416667,1.4 11.6416667,1.8 11.85,2.25833333 C12.0583333,2.71666667 12.1666667,3.21666667 12.1666667,3.76666667 L9.65833333,3.76666667 C9.65833333,3.50833333 9.61666667,3.275 9.53333333,3.05833333 C9.45833333,2.83333333 9.33333333,2.65 9.16666667,2.49166667 C9,2.33333333 8.79166667,2.21666667 8.54166667,2.125 C8.29166667,2.04166667 7.99166667,1.99166667 7.65833333,1.99166667 C7.33333333,1.99166667 7.04166667,2.025 6.8,2.1 C6.55833333,2.175 6.35833333,2.275 6.2,2.4 C6.04166667,2.53333333 5.91666667,2.68333333 5.83333333,2.85833333 C5.75,3.03333333 5.70833333,3.21666667 5.70833333,3.40833333 C5.70833333,3.80833333 5.91666667,4.14166667 6.325,4.41666667 C6.64166667,4.625 6.96666667,4.81666667 7.5,5 L3.65833333,5 C3.61666667,4.93333333 3.56666667,4.85833333 3.53333333,4.79166667 Z M15,7.5 L15,5.83333333 L0,5.83333333 L0,7.5 L8.01666667,7.5 C8.16666667,7.55833333 8.35,7.61666667 8.475,7.66666667 C8.78333333,7.80833333 9.025,7.95 9.2,8.09166667 C9.375,8.23333333 9.49166667,8.39166667 9.55833333,8.56666667 C9.61666667,8.73333333 9.65,8.925 9.65,9.14166667 C9.65,9.33333333 9.60833333,9.51666667 9.53333333,9.69166667 C9.45833333,9.85833333 9.34166667,10.0083333 9.18333333,10.1333333 C9.025,10.2583333 8.83333333,10.35 8.59166667,10.425 C8.35,10.4916667 8.06666667,10.5333333 7.75,10.5333333 C7.39166667,10.5333333 7.05833333,10.5 6.76666667,10.425 C6.475,10.35 6.21666667,10.2333333 6.00833333,10.075 C5.8,9.91666667 5.63333333,9.70833333 5.51666667,9.45 C5.4,9.19166667 5.30833333,8.81666667 5.30833333,8.44166667 L2.83333333,8.44166667 C2.83333333,8.9 2.9,9.38333333 3.03333333,9.75833333 C3.16666667,10.1333333 3.34166667,10.4666667 3.575,10.7666667 C3.80833333,11.0583333 4.075,11.3166667 4.39166667,11.5333333 C4.7,11.75 5.04166667,11.9333333 5.40833333,12.075 C5.775,12.2166667 6.15833333,12.325 6.55833333,12.4 C6.95833333,12.4666667 7.35833333,12.5083333 7.75833333,12.5083333 C8.425,12.5083333 9.03333333,12.4333333 9.575,12.275 C10.1166667,12.1166667 10.5833333,11.9 10.9666667,11.6166667 C11.35,11.3333333 11.65,10.975 11.8583333,10.5583333 C12.0666667,10.1416667 12.175,9.66666667 12.175,9.13333333 C12.175,8.63333333 12.0916667,8.18333333 11.9166667,7.79166667 C11.875,7.7 11.825,7.6 11.775,7.51666667 L15,7.51666667 L15,7.5 Z",id:"Shape"}))))})),Sub:De((function(e){var t=e.theme;return r.createElement(tt,{width:"15px",height:"14px",viewBox:"0 0 15 14"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"subscript-interface-symbol",fill:t.icon.fill,fillRule:"nonzero"},r.createElement("path",{d:"M10.3009091,0.0881818182 L6.99090909,5.42454545 L10.5190909,11.1090909 L8.06590909,11.1090909 L6.48363636,8.46090909 C6.24181818,8.05272727 6.01,7.63727273 5.78909091,7.21772727 L5.56363636,6.78181818 L5.32909091,6.35409091 L5.29727273,6.35409091 L5.06272727,6.79 C4.78272727,7.31863636 4.46545455,7.875 4.10909091,8.46181818 L2.51909091,11.11 L0,11.11 L3.61727273,5.42545455 L0.258636364,0.0886363636 L2.75272727,0.0886363636 L4.22136364,2.54318182 C4.45363636,2.93045455 4.67136364,3.31272727 4.875,3.68909091 L5.07727273,4.07636364 L5.27909091,4.46454545 L5.31045455,4.46454545 C5.40181818,4.29227273 5.46909091,4.16363636 5.51227273,4.07636364 L5.71363636,3.69727273 C5.88590909,3.36363636 6.10181818,2.98181818 6.36,2.55136364 L7.82909091,0.0886363636 L10.3009091,0.0881818182 L10.3009091,0.0881818182 Z M14.7818182,12.9868182 L14.7818182,13.7840909 L10.7727273,13.7840909 L10.7727273,12.7036364 C10.7727273,12.145 10.8736364,11.7722727 11.0736364,11.5877273 C11.2740909,11.405 11.7518182,11.245 12.5054545,11.11 C13.1295455,10.9990909 13.4990909,10.8959091 13.6140909,10.8054545 C13.7295455,10.7131818 13.7863636,10.4740909 13.7863636,10.0927273 C13.7863636,9.72409091 13.7295455,9.49272727 13.6140909,9.39409091 C13.4986364,9.29454545 13.2254545,9.24590909 12.7913636,9.24590909 C12.3463636,9.24590909 12.0640909,9.29545455 11.9486364,9.39590909 C11.8322727,9.49545455 11.7736364,9.73863636 11.7736364,10.125 L11.7736364,10.3495455 L10.7863636,10.3495455 L10.7863636,10.1286364 C10.7863636,9.46272727 10.9240909,9.01454545 11.1977273,8.78454545 C11.4722727,8.55363636 12.0040909,8.43818182 12.7954545,8.43818182 C13.5663636,8.43818182 14.0918182,8.55545455 14.3668182,8.78818182 C14.6422727,9.02181818 14.7809091,9.46454545 14.7809091,10.1172727 C14.7809091,10.7331818 14.6759091,11.1468182 14.4663636,11.3554545 C14.2568182,11.5627273 13.7740909,11.7386364 13.0172727,11.8777273 C12.3931818,11.9913636 12.0309091,12.0872727 11.9281818,12.1672727 C11.8268182,12.2472727 11.7772727,12.4718182 11.7772727,12.8445455 L11.7772727,12.9881818 L14.7818182,12.9868182 L14.7818182,12.9868182 Z",id:"Shape"}))))})),Sup:De((function(e){var t=e.theme;return r.createElement(tt,{width:"15px",height:"15px",viewBox:"0 0 15 15",style:{marginBottom:5}},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"superscript-x-elevated-to-the-power-of-two",fill:t.icon.fill,fillRule:"nonzero"},r.createElement("path",{d:"M7.21078125,8.88046875 L10.84875,14.7426563 L8.3184375,14.7426563 L6.6871875,12.0121875 C6.43734375,11.5903125 6.19921875,11.1628125 5.97140625,10.7296875 L5.73796875,10.2801563 L5.4965625,9.8390625 L5.46375,9.8390625 L5.22234375,10.2885938 C4.933125,10.8332813 4.6059375,11.4084375 4.2384375,12.0135938 L2.59875,14.7445313 L0,14.7445313 L3.73078125,8.88140625 L0.2671875,3.3778125 L2.84015625,3.3778125 L4.35421875,5.90859375 C4.59421875,6.30890625 4.8178125,6.7021875 5.02828125,7.0903125 L5.236875,7.4896875 L5.4440625,7.89046875 L5.476875,7.89046875 C5.57109375,7.7128125 5.6409375,7.5796875 5.68546875,7.4896875 L5.89265625,7.09875 C6.0703125,6.75515625 6.29296875,6.3609375 6.55921875,5.91703125 L8.07375,3.37734375 L10.621875,3.37734375 L7.21078125,8.88046875 Z M11.795625,4.6940625 C11.795625,4.3096875 11.8476563,4.0771875 11.9521875,3.995625 C12.0567188,3.913125 12.4303125,3.81421875 13.0739063,3.69703125 C13.8539063,3.5521875 14.353125,3.3721875 14.56875,3.15796875 C14.7848438,2.9428125 14.8917188,2.51765625 14.8917188,1.8815625 C14.8917188,1.2084375 14.7496875,0.751875 14.4660938,0.5109375 C14.1815625,0.2709375 13.6401563,0.14953125 12.845625,0.14953125 C12.0309375,0.14953125 11.4815625,0.2690625 11.1975,0.5071875 C10.914375,0.744375 10.7728125,1.2065625 10.7728125,1.89328125 L10.7728125,2.120625 L11.791875,2.120625 L11.791875,1.8890625 C11.791875,1.490625 11.8514063,1.23984375 11.9714063,1.1371875 C12.0923438,1.03453125 12.3815625,0.9825 12.8404688,0.9825 C13.2871875,0.9825 13.5703125,1.03359375 13.689375,1.1353125 C13.8084375,1.23703125 13.8679688,1.47703125 13.8679688,1.85671875 C13.8679688,2.25140625 13.8084375,2.4965625 13.689375,2.59125 C13.5703125,2.68546875 13.1896875,2.79140625 12.5460938,2.90578125 C11.7689063,3.045 11.27625,3.20859375 11.0695313,3.3984375 C10.86375,3.58828125 10.7601563,3.97265625 10.7601563,4.54921875 L10.7601563,5.6634375 L14.8945313,5.6634375 L14.8945313,4.84125 L11.7975,4.84125 L11.795625,4.6940625 L11.795625,4.6940625 Z",id:"Shape"}))))})),Table:De((function(e){var t=e.theme;return r.createElement(tt,{width:"16",height:"16",viewBox:"0 0 16 16"},r.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"baseline-border_all-24px",transform:"translate(-2.000000, -2.000000)"},r.createElement("path",{d:"M2.5,2.5 L2.5,17.5 L17.5,17.5 L17.5,2.5 L2.5,2.5 Z M9.16666667,15.8333333 L4.16666667,15.8333333 L4.16666667,10.8333333 L9.16666667,10.8333333 L9.16666667,15.8333333 Z M9.16666667,9.16666667 L4.16666667,9.16666667 L4.16666667,4.16666667 L9.16666667,4.16666667 L9.16666667,9.16666667 Z M15.8333333,15.8333333 L10.8333333,15.8333333 L10.8333333,10.8333333 L15.8333333,10.8333333 L15.8333333,15.8333333 Z M15.8333333,9.16666667 L10.8333333,9.16666667 L10.8333333,4.16666667 L15.8333333,4.16666667 L15.8333333,9.16666667 Z",id:"Shape",fill:t.icon.fill,fillRule:"nonzero"}),r.createElement("polygon",{id:"Path",points:"0 0 20 0 20 20 0 20"}))))})),Underline:function(){return r.createElement(tt,{width:"18",height:"18",viewBox:"0 0 24 24"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"}))},Undo:function(){return r.createElement(tt,{width:"20",height:"20",viewBox:"0 0 24 24"},r.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.createElement("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}))}},rt=function(e){var t=e.className,n=e.label,o=e.name;return r.createElement(ot,{className:t},n&&r.createElement("label",{htmlFor:o},n),r.createElement(it,e))};rt.propTypes={className:C.string,label:C.string,name:C.string};var ot=Xe("div",{target:"e2akd720",label:"InputWrapper"})({name:"nnket",styles:"align-items:center;display:flex;line-height:1;"}),it=Xe("input",{target:"e2akd721",label:"StyledInput"})("background-color:",(function(e){return e.theme.input.backgroundColor}),";color:",(function(e){return e.theme.input.color}),";border:",(function(e){return e.theme.input.border}),";height:",(function(e){return e.theme.input.height}),";width:",(function(e){return e.theme.input.width}),";margin:",(function(e){return e.theme.input.margin}),";padding:",(function(e){return e.theme.input.padding}),";font-size:",(function(e){return e.theme.input.fontSize}),";&:focus{",(function(e){return e.theme.input["&:focus"]}),";}"),at=(Xe("a",{target:"ehfnmtp0",label:"StyledAnchor"})("cursor:pointer;background-color:",(function(e){return e.theme.link.backgroundColor}),";color:",(function(e){return e.theme.link.color}),";font-size:",(function(e){return e.theme.link.fontSize}),";:hover{",(function(e){return e.theme.link["&:hover"]}),";}"),function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).componentWillUnmount=function(){window.removeEventListener("keydown",n.handleKeyPress)},n.handleKeyPress=function(e){"Escape"===e.key&&n.props.hideModal()},n.handleMouseDown=function(e){0===e.button&&n.props.hideModal()},n.stopPropagation=function(e){return e.stopPropagation()},n}return p(t,e.PureComponent),s(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e=this.props.render;return r.createElement(st,{onMouseDown:this.handleMouseDown},r.createElement(lt,{onMouseDown:this.stopPropagation},e()))}}]),t}());at.propTypes={hideModal:C.func,render:C.func};var st=Xe("div",{target:"ef7ovoi0",label:"Wrapper"})("align-items:center;background-color:",(function(e){return e.theme.modal.modalBackgroundColor}),";display:flex;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:10;"),lt=Xe("div",{target:"ef7ovoi1",label:"InnerWrapper"})("background-color:",(function(e){return e.theme.modal.backgroundColor}),";color:",(function(e){return e.theme.modal.color}),";border-radius:",(function(e){return e.theme.modal.contentBorderRadius}),";box-shadow:",(function(e){return e.theme.modal.contentBoxShadow}),";"),ct=function(e,t,n){var r,o=e.getBoundingClientRect(),i=n.getBoundingClientRect(),a=t?t.getBoundingClientRect():{},s=a.width,l=void 0===s?0:s,c=a.height,u=void 0===c?0:c,p="TOP",d=o.left-i.left;(d+=(o.width-l)/2)<3?(r=d+10,d=2):d+l>i.width&&(r=d+l-i.width,(d=i.width-l)<2&&(d=2));var h=o.y-i.y+(o.height||20)+4+6;if(h+u>i.height){var f=o.y-i.y-6-u-4;0<f&&(p="BOTTOM",h=f)}return{overlayPosition:{top:h,left:d},arrowPosition:{left:r,dir:p}}},ut=function(){function t(){var e,n;i(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(a)))).wrapperRef=r.createRef(),n.state={overlayPosition:{},arrowPosition:{dir:"TOP"}},n.componentWillUnmount=function(){window.removeEventListener("keydown",n.handleKeyPress),window.removeEventListener("mousedown",n.handleWindowMouseDown)},n.handleKeyPress=function(e){"Escape"===e.key&&n.props.closeOverlay()},n.handleWindowMouseDown=function(e){n.wrapperRef.current.contains(e.target)||n.props.closeOverlay()},n.handleMouseDown=function(){n.active=!0},n.handleKeyDown=function(e){"Tab"===e.key&&(n.active=!0)},n.handleFocus=function(){n.active&&(n.active=!1)},n.handleBlur=function(){n.active?n.active=!1:n.props.closeOverlay()},n}return p(t,e.Component),s(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("mousedown",this.handleWindowMouseDown);var e=this.props,t=e.marker,n=e.editorWrapper;t&&this.setState(u({},ct(t,this.wrapperRef.current,n.current)))}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.marker,n=e.editorWrapper;if(t){var r,o,i=this.markerPos,a=t.getBoundingClientRect();this.markerPos={height:a.height,left:a.left,offsetTop:t.offsetTop,width:a.width},r=i,o=this.markerPos,r&&r.height===o.height&&r.left===o.left&&r.offsetTop===o.offsetTop&&r.width===o.width&&this.state.overlayPosition||this.setState(u({},ct(t,this.wrapperRef.current,n.current)))}}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.marker,o=e.render;if(!n)return null;var i=this.state,a=i.overlayPosition,s=i.arrowPosition;return r.createElement(pt,{className:t,marker:n,handleBlur:this.handleBlur,handleFocus:this.handleFocus,handleKeyDown:this.handleKeyDown,handleMouseDown:this.handleMouseDown,ref:this.wrapperRef,style:a,tabIndex:-1},"TOP"===s.dir?r.createElement(dt,{left:s.left}):r.createElement(ht,{left:s.left}),o())}}]),t}();ut.propTypes={className:C.string,closeOverlay:C.func,editorWrapper:C.object,marker:C.object,render:C.func};var pt=Xe("div",{target:"eaf1tod0",label:"Wrapper"})("position:absolute;background-color:",(function(e){return e.theme.overlay.backgroundColor}),";color:",(function(e){return e.theme.overlay.color}),";border-bottom:",(function(e){return e.theme.overlay.borderBottom}),";border-left:",(function(e){return e.theme.overlay.borderLeft}),";border-right:",(function(e){return e.theme.overlay.borderRight}),";border-top:",(function(e){return e.theme.overlay.borderTop}),";border-bottom-left-radius:",(function(e){return e.theme.overlay.borderBottomLeftRadius}),";border-bottom-right-radius:",(function(e){return e.theme.overlay.borderBottomLeftRadius}),";border-top-left-radius:",(function(e){return e.theme.overlay.borderTopLeftRadius}),";border-top-right-radius:",(function(e){return e.theme.overlay.borderTopLeftRadius}),";box-shadow:",(function(e){return e.theme.overlay.boxShadow}),";font-weight:",(function(e){return e.theme.overlay.fontWeight}),";z-index:1;:focus{outline:none;}"),dt=Xe("div",{target:"eaf1tod1",label:"ArrowTop"})("background:",(function(e){return e.theme.overlay.backgroundColor}),";border-left:1px solid ",(function(e){return e.theme.overlay.arrowBorderColor}),";border-top:1px solid ",(function(e){return e.theme.overlay.arrowBorderColor}),";height:10px;left:",(function(e){var t=e.left;return"calc(50% + ".concat((void 0===t?0:t)-6,"px)")}),";position:absolute;top:-6px;transform:rotate(45deg);width:10px;"),ht=Xe("div",{target:"eaf1tod2",label:"ArrowBottom"})("background:",(function(e){return e.theme.overlay.backgroundColor}),";border-right:1px solid ",(function(e){return e.theme.overlay.arrowBorderColor}),";border-bottom:1px solid ",(function(e){return e.theme.overlay.arrowBorderColor}),";height:10px;left:",(function(e){var t=e.left;return"calc(50% + ".concat((void 0===t?0:t)-6,"px)")}),";position:absolute;bottom:-6px;transform:rotate(45deg);width:10px;");function ft(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gt(e,t,n[t])}))}return e}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),e}function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e){return(St="function"==typeof Symbol&&"symbol"===kt(Symbol.iterator)?function(e){return kt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":kt(e)})(e)}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e,t){return!t||"object"!==St(t)&&"function"!=typeof t?xt(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}function Dt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}for(var Tt=y((function(e){(function(){var t,n,r,o,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-i)/1e6},n=process.hrtime,o=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),a=1e9*process.uptime(),i=o-a):r=Date.now?(e.exports=function(){return Date.now()-r},Date.now()):(e.exports=function(){return(new Date).getTime()-r},(new Date).getTime())}).call(v)})),Rt="undefined"==typeof window?v:window,Nt=["moz","webkit"],Pt="AnimationFrame",Ft=Rt["request"+Pt],It=Rt["cancel"+Pt]||Rt["cancelRequest"+Pt],Lt=0;!Ft&&Lt<Nt.length;Lt++)Ft=Rt[Nt[Lt]+"Request"+Pt],It=Rt[Nt[Lt]+"Cancel"+Pt]||Rt[Nt[Lt]+"CancelRequest"+Pt];if(!Ft||!It){var Bt=0,zt=0,_t=[];Ft=function(e){if(0===_t.length){var t=Tt(),n=Math.max(0,1e3/60-(t-Bt));Bt=n+t,setTimeout((function(){for(var e=_t.slice(0),t=_t.length=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(Bt)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return _t.push({handle:++zt,callback:e,cancelled:!1}),zt},It=function(e){for(var t=0;t<_t.length;t++)_t[t].handle===e&&(_t[t].cancelled=!0)}}var Vt=function(e){return Ft.call(Rt,e)};Vt.cancel=function(){It.apply(Rt,arguments)},Vt.polyfill=function(e){e||(e=Rt),e.requestAnimationFrame=Ft,e.cancelAnimationFrame=It};var $t=function(){},Wt=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===St(e)&&null!==e?[e]:[]};function jt(e){return-1<[document.documentElement,document.body,window].indexOf(e)}function Ht(e){return jt(e)?window.pageYOffset:e.scrollTop}function Kt(e,t){jt(e)?window.scrollTo(0,t):e.scrollTop=t}function Ut(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:200,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:$t,o=Ht(e),i=t-o,a=10,s=0;!function t(){var l,c=i*((l=(l=s+=a)/n-1)*l*l+1)+o;Kt(e,c),s<n?Vt(t):r(e)}()}function qt(){try{return document.createEvent("TouchEvent"),!0}catch(v){return!1}}var Jt=g(y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(r),a=s(C);function s(e){return e&&e.__esModule?e:{default:e}}var l={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},c=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],u=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},p=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),d=function(){return p?"_"+Math.random().toString(36).substr(2,12):void 0},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.inputRef=function(e){n.input=e,"function"==typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:t.minWidth,inputId:t.id||d()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,r.Component),o(e,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||d()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(u(e,this.sizer),this.placeHolderSizer&&u(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return p&&e?i.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=n({},this.props.style);t.display||(t.display="inline-block");var r,o=n({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return r=a,c.forEach((function(e){return delete r[e]})),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=o,i.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),i.default.createElement("input",n({},a,{ref:this.inputRef})),i.default.createElement("div",{ref:this.sizerRef,style:l},e),this.props.placeholder?i.default.createElement("div",{ref:this.placeHolderSizerRef,style:l},this.props.placeholder):null)}}]),e}();h.propTypes={className:a.default.string,defaultValue:a.default.any,extraWidth:a.default.oneOfType([a.default.number,a.default.string]),id:a.default.string,injectStyles:a.default.bool,inputClassName:a.default.string,inputRef:a.default.func,inputStyle:a.default.object,minWidth:a.default.oneOfType([a.default.number,a.default.string]),onAutosize:a.default.func,onChange:a.default.func,placeholder:a.default.string,placeholderIsMinWidth:a.default.bool,style:a.default.object,value:a.default.any},h.defaultProps={minWidth:1,injectStyles:!0},t.default=h})));function Gt(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,o=e.placement,i=e.shouldScroll,a=e.isFixedPosition,s=e.theme.spacing,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/,o=document.documentElement;if("fixed"===t.position)return o;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return o}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u=l.getBoundingClientRect().height,p=n.getBoundingClientRect(),d=p.bottom,h=p.height,f=p.top,m=n.offsetParent.getBoundingClientRect().top,v=window.innerHeight,g=Ht(l),y=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),w=m-b,C=v-f,k=w+g,S=u-g-f,x=d-v+g+y,E=g+f-b;switch(o){case"auto":case"bottom":if(h<=C)return{placement:"bottom",maxHeight:t};if(h<=S&&!a)return i&&Ut(l,x,160),{placement:"bottom",maxHeight:t};if(!a&&r<=S||a&&r<=C)return i&&Ut(l,x,160),{placement:"bottom",maxHeight:a?C-y:S-y};if("auto"===o||a){var M=t,O=a?w:k;return r<=O&&(M=Math.min(O-y-s.controlHeight,t)),{placement:"top",maxHeight:M}}if("bottom"===o)return Kt(l,x),{placement:"bottom",maxHeight:t};break;case"top":if(h<=w)return{placement:"top",maxHeight:t};if(h<=k&&!a)return i&&Ut(l,E,160),{placement:"top",maxHeight:t};if(!a&&r<=k||a&&r<=w){var A=t;return(!a&&r<=k||a&&r<=w)&&(A=a?w-b:k-b),i&&Ut(l,E,160),{placement:"top",maxHeight:A}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(o,'".'))}return c}var Xt=function(e){return"auto"===e?"bottom":e},Yt=function(){function t(){var e,n;bt(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(n=Et(this,(e=Mt(t)).call.apply(e,[this].concat(o))))),"state",{maxHeight:n.props.maxMenuHeight,placement:null}),gt(xt(xt(n)),"getPlacement",(function(e){var t=n.props,r=t.minMenuHeight,o=t.maxMenuHeight,i=t.menuPlacement,a=t.menuPosition,s=t.menuShouldScrollIntoView,l=t.theme,c=n.context.getPortalPlacement;if(e){var u="fixed"===a,p=Gt({maxHeight:o,menuEl:e,minHeight:r,placement:i,shouldScroll:s&&!u,isFixedPosition:u,theme:l});c&&c(p),n.setState(p)}})),gt(xt(xt(n)),"getUpdatedProps",(function(){var e=n.props.menuPlacement,t=n.state.placement||Xt(e);return yt({},n.props,{placement:t,maxHeight:n.state.maxHeight})})),n}return At(t,e.Component),Ct(t,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),t}();gt(Yt,"contextTypes",{getPortalPlacement:C.func});var Zt=function(e){var t=e.theme,n=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},Qt=Zt,en=Zt,tn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return le("div",mt({css:o("noOptionsMessage",e),className:r({"menu-notice":!0,"menu-notice--no-options":!0},n)},i),t)};tn.defaultProps={children:"No options"};var nn=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return le("div",mt({css:o("loadingMessage",e),className:r({"menu-notice":!0,"menu-notice--loading":!0},n)},i),t)};nn.defaultProps={children:"Loading..."};var rn=function(){function n(){var e,t;bt(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(t=Et(this,(e=Mt(n)).call.apply(e,[this].concat(o))))),"state",{placement:null}),gt(xt(xt(t)),"getPortalPlacement",(function(e){var n=e.placement;n!==Xt(t.props.menuPlacement)&&t.setState({placement:n})})),t}return At(n,e.Component),Ct(n,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var e=this.props,n=e.appendTo,r=e.children,o=e.controlElement,i=e.menuPlacement,a=e.menuPosition,s=e.getStyles,l="fixed"===a;if(!n&&!l||!o)return null;var c,u=this.state.placement||Xt(i),p={bottom:(c=o.getBoundingClientRect()).bottom,height:c.height,left:c.left,right:c.right,top:c.top,width:c.width},d=l?0:window.pageYOffset,h=le("div",{css:s("menuPortal",{offset:p[u]+d,position:a,rect:p})},r);return n?t.createPortal(h,n):h}}]),n}();gt(rn,"childContextTypes",{getPortalPlacement:C.func});var on=Array.isArray,an=Object.keys,sn=Object.prototype.hasOwnProperty;function ln(e,t){try{return function e(t,n){if(t===n)return!0;if(t&&n&&"object"==St(t)&&"object"==St(n)){var r,o,i,a=on(t),s=on(n);if(a&&s){if((o=t.length)!=n.length)return!1;for(r=o;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(a!=s)return!1;var l=t instanceof Date,c=n instanceof Date;if(l!=c)return!1;if(l&&c)return t.getTime()==n.getTime();var u=t instanceof RegExp,p=n instanceof RegExp;if(u!=p)return!1;if(u&&p)return t.toString()==n.toString();var d=an(t);if((o=d.length)!==an(n).length)return!1;for(r=o;0!=r--;)if(!sn.call(n,d[r]))return!1;for(r=o;0!=r--;)if(!("_owner"===(i=d[r])&&t.$$typeof||e(t[i],n[i])))return!1;return!0}return t!=t&&n!=n}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i))return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}var cn=function(){function t(){return bt(this,t),Et(this,Mt(t).apply(this,arguments))}return At(t,e.Component),Ct(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.cx,o=e.isMulti,i=e.getStyles,a=e.hasValue;return le("div",{css:i("valueContainer",this.props),className:r({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":a},n)},t)}}]),t}();function un(){var e,t,n=(e=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return un=function(){return n},n}var pn={name:"19bqh2r",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;"},dn=function(e){var t=e.size,n=ft(e,["size"]);return le("svg",mt({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:pn},n))},hn=function(e){return le(dn,mt({size:20},e),le("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},fn=function(e){return le(dn,mt({size:20},e),le("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},mn=function(e){var t=e.isFocused,n=e.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorContainer",color:t?o.neutral60:o.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:t?o.neutral80:o.neutral40}}},vn=mn,gn=mn,yn=ce(un()),bn=function(e){var t=e.color,n=e.delay,r=e.offset;return le("span",{css:ee({animation:"".concat(yn," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:t,borderRadius:"1em;",display:"inline-block;",marginLeft:r?"1em;":null,height:"1em;",verticalAlign:"top;",width:"1em;"},"")})},wn=function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps,i=e.isFocused,a=e.isRtl,s=e.theme.colors,l=i?s.neutral80:s.neutral20;return le("div",mt({},o,{css:r("loadingIndicator",e),className:n({indicator:!0,"loading-indicator":!0},t)}),le(bn,{color:l,delay:0,offset:a}),le(bn,{color:l,delay:160,offset:!0}),le(bn,{color:l,delay:320,offset:!a}))};wn.defaultProps={size:4};var Cn=function(e){var t=e.children,n=e.innerProps;return le("div",n,t)},kn=Cn,Sn=Cn,xn=function(){function t(){return bt(this,t),Et(this,Mt(t).apply(this,arguments))}return At(t,e.Component),Ct(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.innerProps;return le("div",n,t||le(hn,{size:14}))}}]),t}(),En=function(){function t(){return bt(this,t),Et(this,Mt(t).apply(this,arguments))}return At(t,e.Component),Ct(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,o=t.components,i=t.cx,a=t.data,s=t.getStyles,l=t.innerProps,c=t.isDisabled,u=t.removeProps,p=t.selectProps,d=o.Container,h=o.Label,f=o.Remove;return le(ue,null,(function(t){var o=t.css,m=t.cx;return le(d,{data:a,innerProps:yt({},l,{className:m(o(s("multiValue",e.props)),i({"multi-value":!0,"multi-value--is-disabled":c},r))}),selectProps:p},le(h,{data:a,innerProps:{className:m(o(s("multiValueLabel",e.props)),i({"multi-value__label":!0},r))},selectProps:p},n),le(f,{data:a,innerProps:yt({className:m(o(s("multiValueRemove",e.props)),i({"multi-value__remove":!0},r))},u),selectProps:p}))}))}}]),t}();gt(En,"defaultProps",{cropWithEllipsis:!0});var Mn={ClearIndicator:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return le("div",mt({},i,{css:o("clearIndicator",e),className:r({indicator:!0,"clear-indicator":!0},n)}),t||le(hn,null))},Control:function(e){var t=e.children,n=e.cx,r=e.getStyles,o=e.className,i=e.isDisabled,a=e.isFocused,s=e.innerRef,l=e.innerProps,c=e.menuIsOpen;return le("div",mt({ref:s,css:r("control",e),className:n({control:!0,"control--is-disabled":i,"control--is-focused":a,"control--menu-is-open":c},o)},l),t)},DropdownIndicator:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return le("div",mt({},i,{css:o("dropdownIndicator",e),className:r({indicator:!0,"dropdown-indicator":!0},n)}),t||le(fn,null))},DownChevron:fn,CrossIcon:hn,Group:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.Heading,a=e.headingProps,s=e.label,l=e.theme,c=e.selectProps;return le("div",{css:o("group",e),className:r({group:!0},n)},le(i,mt({},a,{selectProps:c,theme:l,getStyles:o,cx:r}),s),le("div",null,t))},GroupHeading:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.theme,i=(e.selectProps,ft(e,["className","cx","getStyles","theme","selectProps"]));return le("div",mt({css:r("groupHeading",yt({theme:o},i)),className:n({"group-heading":!0},t)},i))},IndicatorsContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles;return le("div",{css:o("indicatorsContainer",e),className:r({indicators:!0},n)},t)},IndicatorSeparator:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps;return le("span",mt({},o,{css:r("indicatorSeparator",e),className:n({"indicator-separator":!0},t)}))},Input:function(e){var t,n=e.className,r=e.cx,o=e.getStyles,i=e.innerRef,a=e.isHidden,s=e.isDisabled,l=e.theme,c=(e.selectProps,ft(e,["className","cx","getStyles","innerRef","isHidden","isDisabled","theme","selectProps"]));return le("div",{css:o("input",yt({theme:l},c))},le(Jt,mt({className:r({input:!0},n),inputRef:i,inputStyle:(t=a,{label:"input",background:0,border:0,fontSize:"inherit",opacity:t?0:1,outline:0,padding:0,color:"inherit"}),disabled:s},c)))},LoadingIndicator:wn,Menu:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerRef,a=e.innerProps;return le("div",mt({css:o("menu",e),className:r({menu:!0},n)},a,{ref:i}),t)},MenuList:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isMulti,a=e.innerRef;return le("div",{css:o("menuList",e),className:r({"menu-list":!0,"menu-list--is-multi":i},n),ref:a},t)},MenuPortal:rn,LoadingMessage:nn,NoOptionsMessage:tn,MultiValue:En,MultiValueContainer:kn,MultiValueLabel:Sn,MultiValueRemove:xn,Option:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isDisabled,a=e.isFocused,s=e.isSelected,l=e.innerRef,c=e.innerProps;return le("div",mt({css:o("option",e),className:r({option:!0,"option--is-disabled":i,"option--is-focused":a,"option--is-selected":s},n),ref:l},c),t)},Placeholder:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps;return le("div",mt({css:o("placeholder",e),className:r({placeholder:!0},n)},i),t)},SelectContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.innerProps,a=e.isDisabled,s=e.isRtl;return le("div",mt({css:o("container",e),className:r({"--is-disabled":a,"--is-rtl":s},n)},i),t)},SingleValue:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,i=e.isDisabled,a=e.innerProps;return le("div",mt({css:o("singleValue",e),className:r({"single-value":!0,"single-value--is-disabled":i},n)},a),t)},ValueContainer:cn},On=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],An=function(e){for(var t=0;t<On.length;t++)e=e.replace(On[t].letters,On[t].base);return e},Dn=function(e){return e.replace(/^\s+|\s+$/g,"")},Tn=function(e){return"".concat(e.label," ").concat(e.value)},Rn={name:"1laao21-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;"},Nn=function(e){return le("span",mt({css:Rn},e))},Pn=function(){function t(){return bt(this,t),Et(this,Mt(t).apply(this,arguments))}return At(t,e.Component),Ct(t,[{key:"render",value:function(){var e=this.props,t=(e.in,e.out,e.onExited,e.appear,e.enter,e.exit,e.innerRef),n=(e.emotion,ft(e,["in","out","onExited","appear","enter","exit","innerRef","emotion"]));return le("input",mt({ref:t},n,{css:ee({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"")}))}}]),t}(),Fn=function(){function n(){return bt(this,n),Et(this,Mt(n).apply(this,arguments))}return At(n,e.Component),Ct(n,[{key:"componentDidMount",value:function(){this.props.innerRef(t.findDOMNode(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),n}(),In=["boxSizing","height","overflow","paddingRight","position"],Ln={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Bn(e){e.preventDefault()}function zn(e){e.stopPropagation()}function _n(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Vn(){return"ontouchstart"in window||navigator.maxTouchPoints}var $n=!(!window.document||!window.document.createElement),Wn=0,jn=function(){function t(){var e,n;bt(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(n=Et(this,(e=Mt(t)).call.apply(e,[this].concat(o))))),"originalStyles",{}),gt(xt(xt(n)),"listenerOptions",{capture:!1,passive:!1}),n}return At(t,e.Component),Ct(t,[{key:"componentDidMount",value:function(){var e=this;if($n){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,o=document.body,i=o&&o.style;if(n&&In.forEach((function(t){var n=i&&i[t];e.originalStyles[t]=n})),n&&Wn<1){var a=parseInt(this.originalStyles.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,l=window.innerWidth-s+a||0;Object.keys(Ln).forEach((function(e){var t=Ln[e];i&&(i[e]=t)})),i&&(i.paddingRight="".concat(l,"px"))}o&&Vn()&&(o.addEventListener("touchmove",Bn,this.listenerOptions),r&&(r.addEventListener("touchstart",_n,this.listenerOptions),r.addEventListener("touchmove",zn,this.listenerOptions))),Wn+=1}}},{key:"componentWillUnmount",value:function(){var e=this;if($n){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,o=document.body,i=o&&o.style;Wn=Math.max(Wn-1,0),n&&Wn<1&&In.forEach((function(t){var n=e.originalStyles[t];i&&(i[t]=n)})),o&&Vn()&&(o.removeEventListener("touchmove",Bn,this.listenerOptions),r&&(r.removeEventListener("touchstart",_n,this.listenerOptions),r.removeEventListener("touchmove",zn,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),t}();gt(jn,"defaultProps",{accountForScrollbars:!0});var Hn={name:"1dsbpcp",styles:"position:fixed;left:0;bottom:0;right:0;top:0;"},Kn=function(){function t(){var e,n;bt(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(n=Et(this,(e=Mt(t)).call.apply(e,[this].concat(o))))),"state",{touchScrollTarget:null}),gt(xt(xt(n)),"getScrollTarget",(function(e){e!==n.state.touchScrollTarget&&n.setState({touchScrollTarget:e})})),gt(xt(xt(n)),"blurSelectInput",(function(){document.activeElement&&document.activeElement.blur()})),n}return At(t,e.PureComponent),Ct(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.isEnabled,r=this.state.touchScrollTarget;return n?le("div",null,le("div",{onClick:this.blurSelectInput,css:Hn}),le(Fn,{innerRef:this.getScrollTarget},t),r?le(jn,{touchScrollTarget:r}):null):t}}]),t}(),Un=function(){function t(){var e,n;bt(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(n=Et(this,(e=Mt(t)).call.apply(e,[this].concat(o))))),"isBottom",!1),gt(xt(xt(n)),"isTop",!1),gt(xt(xt(n)),"scrollTarget",void 0),gt(xt(xt(n)),"touchStart",void 0),gt(xt(xt(n)),"cancelScroll",(function(e){e.preventDefault(),e.stopPropagation()})),gt(xt(xt(n)),"handleEventDelta",(function(e,t){var r=n.props,o=r.onBottomArrive,i=r.onBottomLeave,a=r.onTopArrive,s=r.onTopLeave,l=n.scrollTarget,c=l.scrollTop,u=l.scrollHeight,p=l.clientHeight,d=n.scrollTarget,h=0<t,f=u-p-c,m=!1;t<f&&n.isBottom&&(i&&i(e),n.isBottom=!1),h&&n.isTop&&(s&&s(e),n.isTop=!1),h&&f<t?(o&&!n.isBottom&&o(e),d.scrollTop=u,m=!0,n.isBottom=!0):!h&&c<-t&&(a&&!n.isTop&&a(e),m=!(d.scrollTop=0),n.isTop=!0),m&&n.cancelScroll(e)})),gt(xt(xt(n)),"onWheel",(function(e){n.handleEventDelta(e,e.deltaY)})),gt(xt(xt(n)),"onTouchStart",(function(e){n.touchStart=e.changedTouches[0].clientY})),gt(xt(xt(n)),"onTouchMove",(function(e){var t=n.touchStart-e.changedTouches[0].clientY;n.handleEventDelta(e,t)})),gt(xt(xt(n)),"getScrollTarget",(function(e){n.scrollTarget=e})),n}return At(t,e.Component),Ct(t,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(e){e&&(e.scrollHeight<=e.clientHeight||("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1)))}},{key:"stopListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return r.createElement(Fn,{innerRef:this.getScrollTarget},this.props.children)}}]),t}(),qn=function(){function t(){return bt(this,t),Et(this,Mt(t).apply(this,arguments))}return At(t,e.Component),Ct(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,n=ft(e,["isEnabled"]);return t?r.createElement(Un,n):this.props.children}}]),t}();gt(qn,"defaultProps",{isEnabled:!0});var Jn,Gn=function(e){return!!e.isDisabled},Xn={clearIndicator:gn,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused,r=e.theme,o=r.colors,i=r.borderRadius,a=r.spacing;return{label:"control",alignItems:"center",backgroundColor:t?o.neutral5:o.neutral0,borderColor:t?o.neutral10:n?o.primary:o.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(o.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?o.primary:o.neutral30}}},dropdownIndicator:vn,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing.baseUnit,o=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:t?o.neutral10:o.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,o=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:t?"hidden":"visible",color:o.neutral80}},loadingIndicator:function(e){var t=e.isFocused,n=e.size,r=e.theme,o=r.colors,i=r.spacing.baseUnit;return{label:"loadingIndicator",color:t?o.neutral60:o.neutral20,display:"flex",padding:2*i,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:en,menu:function(e){var t,n,r=e.placement,o=e.theme,i=o.borderRadius,a=o.spacing,s=o.colors;return gt(t={label:"menu"},(n=r)?{bottom:"top",top:"bottom"}[n]:"bottom","100%"),gt(t,"backgroundColor",s.neutral0),gt(t,"borderRadius",i),gt(t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),gt(t,"marginBottom",a.menuGutter),gt(t,"marginTop",a.menuGutter),gt(t,"position","absolute"),gt(t,"width","100%"),gt(t,"zIndex",1),t},menuList:function(e){var t=e.maxHeight,n=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius;return{label:"multiValue",backgroundColor:t.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,n=t.borderRadius,r=t.colors,o=e.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:o?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius,o=t.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:e.isFocused&&o.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}}},noOptionsMessage:Qt,option:function(e){var t=e.isDisabled,n=e.isFocused,r=e.isSelected,o=e.theme,i=o.spacing,a=o.colors;return{label:"option",backgroundColor:r?a.primary:n?a.primary25:"transparent",color:t?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!t&&(r?a.primary:a.primary50)}}},placeholder:function(e){var t=e.theme,n=t.spacing;return{label:"placeholder",color:t.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,o=n.colors;return{label:"singleValue",color:t?o.neutral40:o.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(t.baseUnit/2,"px ").concat(2*t.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}},Yn={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Zn={backspaceRemovesValue:!0,blurInputOnSelect:qt(),captureMenuScroll:!qt(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var n=yt({ignoreCase:!0,ignoreAccents:!0,stringify:Tn,trim:!0,matchFrom:"any"},Jn),r=n.ignoreCase,o=n.ignoreAccents,i=n.stringify,a=n.trim,s=n.matchFrom,l=a?Dn(t):t,c=a?Dn(i(e)):i(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),o&&(l=An(l),c=An(c)),"start"===s?c.substr(0,l.length)===l:-1<c.indexOf(l)},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Gn,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(v){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0},Qn=1,er=function(){function t(e){var n;bt(this,t),gt(xt(xt(n=Et(this,Mt(t).call(this,e)))),"state",{ariaLiveSelection:"",ariaLiveContext:"",focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]}),gt(xt(xt(n)),"blockOptionHover",!1),gt(xt(xt(n)),"isComposing",!1),gt(xt(xt(n)),"clearFocusValueOnUpdate",!1),gt(xt(xt(n)),"commonProps",void 0),gt(xt(xt(n)),"components",void 0),gt(xt(xt(n)),"hasGroups",!1),gt(xt(xt(n)),"initialTouchX",0),gt(xt(xt(n)),"initialTouchY",0),gt(xt(xt(n)),"inputIsHiddenAfterUpdate",void 0),gt(xt(xt(n)),"instancePrefix",""),gt(xt(xt(n)),"openAfterFocus",!1),gt(xt(xt(n)),"scrollToFocusedOptionOnUpdate",!1),gt(xt(xt(n)),"userIsDragging",void 0),gt(xt(xt(n)),"controlRef",null),gt(xt(xt(n)),"getControlRef",(function(e){n.controlRef=e})),gt(xt(xt(n)),"focusedOptionRef",null),gt(xt(xt(n)),"getFocusedOptionRef",(function(e){n.focusedOptionRef=e})),gt(xt(xt(n)),"menuListRef",null),gt(xt(xt(n)),"getMenuListRef",(function(e){n.menuListRef=e})),gt(xt(xt(n)),"inputRef",null),gt(xt(xt(n)),"getInputRef",(function(e){n.inputRef=e})),gt(xt(xt(n)),"cacheComponents",(function(e){n.components=yt({},Mn,{components:e}.components)})),gt(xt(xt(n)),"focus",n.focusInput),gt(xt(xt(n)),"blur",n.blurInput),gt(xt(xt(n)),"onChange",(function(e,t){var r=n.props;(0,r.onChange)(e,yt({},t,{name:r.name}))})),gt(xt(xt(n)),"setValue",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"set-value",r=2<arguments.length?arguments[2]:void 0,o=n.props,i=o.closeMenuOnSelect,a=o.isMulti;n.onInputChange("",{action:"set-value"}),i&&(n.inputIsHiddenAfterUpdate=!a,n.onMenuClose()),n.clearFocusValueOnUpdate=!0,n.onChange(e,{action:t,option:r})})),gt(xt(xt(n)),"selectOption",(function(e){var t=n.props,r=t.blurInputOnSelect,o=t.isMulti,i=n.state.selectValue;if(o)if(n.isOptionSelected(e,i)){var a=n.getOptionValue(e);n.setValue(i.filter((function(e){return n.getOptionValue(e)!==a})),"deselect-option",e),n.announceAriaLiveSelection({event:"deselect-option",context:{value:n.getOptionLabel(e)}})}else n.isOptionDisabled(e,i)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue([].concat(vt(i),[e]),"select-option",e),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));else n.isOptionDisabled(e,i)?n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e),isDisabled:!0}}):(n.setValue(e,"select-option"),n.announceAriaLiveSelection({event:"select-option",context:{value:n.getOptionLabel(e)}}));r&&n.blurInput()})),gt(xt(xt(n)),"removeValue",(function(e){var t=n.state.selectValue,r=n.getOptionValue(e),o=t.filter((function(e){return n.getOptionValue(e)!==r}));n.onChange(o.length?o:null,{action:"remove-value",removedValue:e}),n.announceAriaLiveSelection({event:"remove-value",context:{value:e?n.getOptionLabel(e):""}}),n.focusInput()})),gt(xt(xt(n)),"clearValue",(function(){var e=n.props.isMulti;n.onChange(e?[]:null,{action:"clear"})})),gt(xt(xt(n)),"popValue",(function(){var e=n.state.selectValue,t=e[e.length-1],r=e.slice(0,e.length-1);n.announceAriaLiveSelection({event:"pop-value",context:{value:t?n.getOptionLabel(t):""}}),n.onChange(r.length?r:null,{action:"pop-value",removedValue:t})})),gt(xt(xt(n)),"getOptionLabel",(function(e){return n.props.getOptionLabel(e)})),gt(xt(xt(n)),"getOptionValue",(function(e){return n.props.getOptionValue(e)})),gt(xt(xt(n)),"getStyles",(function(e,t){var r=Xn[e](t);r.boxSizing="border-box";var o=n.props.styles[e];return o?o(r,t):r})),gt(xt(xt(n)),"getElementId",(function(e){return"".concat(n.instancePrefix,"-").concat(e)})),gt(xt(xt(n)),"getActiveDescendentId",(function(){var e=n.props.menuIsOpen,t=n.state,r=t.menuOptions,o=t.focusedOption;if(o&&e){var i=r.focusable.indexOf(o),a=r.render[i];return a&&a.key}})),gt(xt(xt(n)),"announceAriaLiveSelection",(function(e){var t=e.event,r=e.context;n.setState({ariaLiveSelection:function(e,t){var n=t.value,r=t.isDisabled;if(n)switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"select-option":return"option ".concat(n,r?" is disabled. Select another option.":", selected.")}}(t,r)})})),gt(xt(xt(n)),"announceAriaLiveContext",(function(e){var t=e.event,r=e.context;n.setState({ariaLiveContext:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.isSearchable,r=t.isMulti,o=t.label,i=t.isDisabled;switch(e){case"menu":return"Use Up and Down to choose options".concat(i?"":", press Enter to select the currently focused option",", press Escape to exit the menu, press Tab to select the option and exit the menu.");case"input":return"".concat(o||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value"}}(t,yt({},r,{label:n.props["aria-label"]}))})})),gt(xt(xt(n)),"onMenuMouseDown",(function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),n.focusInput())})),gt(xt(xt(n)),"onMenuMouseMove",(function(e){n.blockOptionHover=!1})),gt(xt(xt(n)),"onControlMouseDown",(function(e){var t=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==e.target.tagName&&n.onMenuClose():t&&n.openMenu("first"):(t&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==e.target.tagName&&e.preventDefault()})),gt(xt(xt(n)),"onDropdownIndicatorMouseDown",(function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||n.props.isDisabled)){var t=n.props,r=t.isMulti,o=t.menuIsOpen;n.focusInput(),o?(n.inputIsHiddenAfterUpdate=!r,n.onMenuClose()):n.openMenu("first"),e.preventDefault(),e.stopPropagation()}})),gt(xt(xt(n)),"onClearIndicatorMouseDown",(function(e){e&&"mousedown"===e.type&&0!==e.button||(n.clearValue(),e.stopPropagation(),n.openAfterFocus=!1,"touchend"===e.type?n.focusInput():setTimeout((function(){return n.focusInput()})))})),gt(xt(xt(n)),"onScroll",(function(e){"boolean"==typeof n.props.closeMenuOnScroll?e.target instanceof HTMLElement&&jt(e.target)&&n.props.onMenuClose():"function"==typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(e)&&n.props.onMenuClose()})),gt(xt(xt(n)),"onCompositionStart",(function(){n.isComposing=!0})),gt(xt(xt(n)),"onCompositionEnd",(function(){n.isComposing=!1})),gt(xt(xt(n)),"onTouchStart",(function(e){var t=e.touches.item(0);t&&(n.initialTouchX=t.clientX,n.initialTouchY=t.clientY,n.userIsDragging=!1)})),gt(xt(xt(n)),"onTouchMove",(function(e){var t=e.touches.item(0);if(t){var r=Math.abs(t.clientX-n.initialTouchX),o=Math.abs(t.clientY-n.initialTouchY);n.userIsDragging=5<r||5<o}})),gt(xt(xt(n)),"onTouchEnd",(function(e){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(e.target)&&n.menuListRef&&!n.menuListRef.contains(e.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)})),gt(xt(xt(n)),"onControlTouchEnd",(function(e){n.userIsDragging||n.onControlMouseDown(e)})),gt(xt(xt(n)),"onClearIndicatorTouchEnd",(function(e){n.userIsDragging||n.onClearIndicatorMouseDown(e)})),gt(xt(xt(n)),"onDropdownIndicatorTouchEnd",(function(e){n.userIsDragging||n.onDropdownIndicatorMouseDown(e)})),gt(xt(xt(n)),"handleInputChange",(function(e){var t=e.currentTarget.value;n.inputIsHiddenAfterUpdate=!1,n.onInputChange(t,{action:"input-change"}),n.onMenuOpen()})),gt(xt(xt(n)),"onInputFocus",(function(e){var t=n.props,r=t.isSearchable,o=t.isMulti;n.props.onFocus&&n.props.onFocus(e),n.inputIsHiddenAfterUpdate=!1,n.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:o}}),n.setState({isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1})),gt(xt(xt(n)),"onInputBlur",(function(e){n.menuListRef&&n.menuListRef.contains(document.activeElement)?n.inputRef.focus():(n.props.onBlur&&n.props.onBlur(e),n.onInputChange("",{action:"input-blur"}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1}))})),gt(xt(xt(n)),"onOptionHover",(function(e){n.blockOptionHover||n.state.focusedOption===e||n.setState({focusedOption:e})})),gt(xt(xt(n)),"shouldHideSelectedOptions",(function(){var e=n.props,t=e.hideSelectedOptions,r=e.isMulti;return void 0===t?r:t})),gt(xt(xt(n)),"onKeyDown",(function(e){var t=n.props,r=t.isMulti,o=t.backspaceRemovesValue,i=t.escapeClearsValue,a=t.inputValue,s=t.isClearable,l=t.isDisabled,c=t.menuIsOpen,u=t.onKeyDown,p=t.tabSelectsValue,d=t.openMenuOnFocus,h=n.state,f=h.focusedOption,m=h.focusedValue,v=h.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(n.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||a)return;n.focusValue("previous");break;case"ArrowRight":if(!r||a)return;n.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)n.removeValue(m);else{if(!o)return;r?n.popValue():s&&n.clearValue()}break;case"Tab":if(n.isComposing)return;if(e.shiftKey||!c||!p||!f||d&&n.isOptionSelected(f,v))return;n.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(n.isComposing)return;n.selectOption(f);break}return;case"Escape":c?(n.inputIsHiddenAfterUpdate=!1,n.onInputChange("",{action:"menu-close"}),n.onMenuClose()):s&&i&&n.clearValue();break;case" ":if(a)return;if(!c){n.openMenu("first");break}if(!f)return;n.selectOption(f);break;case"ArrowUp":c?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":c?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!c)return;n.focusOption("pageup");break;case"PageDown":if(!c)return;n.focusOption("pagedown");break;case"Home":if(!c)return;n.focusOption("first");break;case"End":if(!c)return;n.focusOption("last");break;default:return}e.preventDefault()}}));var r=e.value;n.cacheComponents=function(e,t){var n;void 0===t&&(t=Dt);var r,o=[],i=!1;return function(){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return i&&n===this&&t(s,o)||(r=e.apply(this,s),i=!0,n=this,o=s),r}}(n.cacheComponents,ln).bind(xt(xt(n))),n.cacheComponents(e.components),n.instancePrefix="react-select-"+(n.props.instanceId||++Qn);var o=Wt(r),i=e.menuIsOpen?n.buildMenuOptions(e,o):{render:[],focusable:[]};return n.state.menuOptions=i,n.state.selectValue=o,n}return At(t,e.Component),Ct(t,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.options,r=t.value,o=t.menuIsOpen,i=t.inputValue;if(this.cacheComponents(e.components),e.value!==r||e.options!==n||e.menuIsOpen!==o||e.inputValue!==i){var a=Wt(e.value),s=e.menuIsOpen?this.buildMenuOptions(e,a):{render:[],focusable:[]},l=this.getNextFocusedValue(a),c=this.getNextFocusedOption(s.focusable);this.setState({menuOptions:s,selectValue:a,focusedOption:c,focusedValue:l})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate)}},{key:"componentDidUpdate",value:function(e){var t,n,r,o,i,a=this.props,s=a.isDisabled,l=a.menuIsOpen,c=this.state.isFocused;(c&&!s&&e.isDisabled||c&&l&&!e.menuIsOpen)&&this.focusInput(),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,n=this.focusedOptionRef,r=t.getBoundingClientRect(),o=n.getBoundingClientRect(),i=n.offsetHeight/3,o.bottom+i>r.bottom?Kt(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+i,t.scrollHeight)):o.top-i<r.top&&Kt(t,Math.max(n.offsetTop-i,0))),this.scrollToFocusedOptionOnUpdate=!1}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){var e=this.props,t=e.isSearchable,n=e.isMulti;this.announceAriaLiveContext({event:"input",context:{isSearchable:t,isMulti:n}}),this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this.state,n=t.menuOptions,r=t.selectValue,o=t.isFocused,i=this.props.isMulti,a="first"===e?0:n.focusable.length-1;if(!i){var s=n.focusable.indexOf(r[0]);-1<s&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[a]}),this.announceAriaLiveContext({event:"menu"})}},{key:"focusValue",value:function(e){var t=this.props,n=t.isMulti,r=t.isSearchable,o=this.state,i=o.selectValue,a=o.focusedValue;if(n){this.setState({focusedOption:null});var s=i.indexOf(a);a||(s=-1,this.announceAriaLiveContext({event:"value"}));var l=i.length-1,c=-1;if(i.length){switch(e){case"previous":c=0===s?0:-1===s?l:s-1;break;case"next":-1<s&&s<l&&(c=s+1)}-1===c&&this.announceAriaLiveContext({event:"input",context:{isSearchable:r,isMulti:n}}),this.setState({inputIsHidden:-1!==c,focusedValue:i[c]})}}}},{key:"focusOption",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state,r=n.focusedOption,o=n.menuOptions.focusable;if(o.length){var i=0,a=o.indexOf(r);r||(a=-1,this.announceAriaLiveContext({event:"menu"})),"up"===e?i=0<a?a-1:o.length-1:"down"===e?i=(a+1)%o.length:"pageup"===e?(i=a-t)<0&&(i=0):"pagedown"===e?(i=a+t)>o.length-1&&(i=o.length-1):"last"===e&&(i=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[i],focusedValue:null}),this.announceAriaLiveContext({event:"menu",context:{isDisabled:Gn(o[i])}})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(Yn):yt({},Yn,this.props.theme):Yn}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.getStyles,n=this.setValue,r=this.selectOption,o=this.props,i=o.classNamePrefix,a=o.isMulti,s=o.isRtl,l=o.options,c=this.state.selectValue,u=this.hasValue();return{cx:function(e,t,n){var r,o,i=[n];if(t&&e)for(var a in t)t.hasOwnProperty(a)&&t[a]&&i.push("".concat((r=e,(o=a)?"-"===o[0]?r+o:r+"__"+o:r)));return i.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}.bind(null,i),clearValue:e,getStyles:t,getValue:function(){return c},hasValue:u,isMulti:a,isRtl:s,options:l,selectOption:r,setValue:n,selectProps:o,theme:this.getTheme()}}},{key:"getNextFocusedValue",value:function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,n=t.focusedValue,r=t.selectValue.indexOf(n);if(-1<r){if(-1<e.indexOf(n))return n;if(r<e.length)return e[r]}return null}},{key:"getNextFocusedOption",value:function(e){var t=this.state.focusedOption;return t&&-1<e.indexOf(t)?t:e[0]}},{key:"hasValue",value:function(){return 0<this.state.selectValue.length}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e,t)}},{key:"isOptionSelected",value:function(e,t){var n=this;if(-1<t.indexOf(e))return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var r=this.getOptionValue(e);return t.some((function(e){return n.getOptionValue(e)===r}))}},{key:"filterOption",value:function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(e);var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(e,t){var n=this,r=e.inputValue,o=void 0===r?"":r,i=e.options,a=function(e,r){var i=n.isOptionDisabled(e,t),a=n.isOptionSelected(e,t),s=n.getOptionLabel(e),l=n.getOptionValue(e);if(!(n.shouldHideSelectedOptions()&&a||!n.filterOption({label:s,value:l,data:e},o))){var c=i?void 0:function(){return n.onOptionHover(e)},u=i?void 0:function(){return n.selectOption(e)},p="".concat(n.getElementId("option"),"-").concat(r);return{innerProps:{id:p,onClick:u,onMouseMove:c,onMouseOver:c,tabIndex:-1},data:e,isDisabled:i,isSelected:a,key:p,label:s,type:"option",value:l}}};return i.reduce((function(e,t,r){if(t.options){n.hasGroups||(n.hasGroups=!0);var o=t.options.map((function(t,n){var o=a(t,"".concat(r,"-").concat(n));return o&&e.focusable.push(t),o})).filter(Boolean);if(o.length){var i="".concat(n.getElementId("group"),"-").concat(r);e.render.push({type:"group",key:i,data:t,options:o})}}else{var s=a(t,"".concat(r));s&&(e.render.push(s),e.focusable.push(t))}return e}),{render:[],focusable:[]})}},{key:"constructAriaLiveMessage",value:function(){var e,t,n,r,o,i,a,s,l,c,u,p=this.state,d=p.ariaLiveContext,h=p.selectValue,f=p.focusedValue,m=p.focusedOption,v=this.props,g=v.options,y=v.menuIsOpen,b=v.inputValue,w=v.screenReaderStatus,C=f?(t=(e={focusedValue:f,getOptionLabel:this.getOptionLabel,selectValue:h}).focusedValue,n=e.getOptionLabel,r=e.selectValue,"value ".concat(n(t)," focused, ").concat(r.indexOf(t)+1," of ").concat(r.length,".")):"",k=m&&y?(i=(o={focusedOption:m,getOptionLabel:this.getOptionLabel,options:g}).focusedOption,a=o.getOptionLabel,s=o.options,"option ".concat(a(i)," focused").concat(i.isDisabled?" disabled":"",", ").concat(s.indexOf(i)+1," of ").concat(s.length,".")):"",S=(c=(l={inputValue:b,screenReaderMessage:w({count:this.countOptions()})}).inputValue,u=l.screenReaderMessage,"".concat(u).concat(c?" for search term "+c:"","."));return"".concat(C," ").concat(k," ").concat(S," ").concat(d)}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,o=e.inputId,i=e.inputValue,a=e.tabIndex,s=this.components.Input,l=this.state.inputIsHidden,c=o||this.getElementId("input");if(!n)return r.createElement(Pn,{id:c,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:$t,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:a,value:""});var u={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]},p=this.commonProps,d=p.cx,h=p.theme,f=p.selectProps;return r.createElement(s,mt({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:d,getStyles:this.getStyles,id:c,innerRef:this.getInputRef,isDisabled:t,isHidden:l,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,selectProps:f,spellCheck:"false",tabIndex:a,theme:h,type:"text",value:i},u))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.components,n=t.MultiValue,o=t.MultiValueContainer,i=t.MultiValueLabel,a=t.MultiValueRemove,s=t.SingleValue,l=t.Placeholder,c=this.commonProps,u=this.props,p=u.controlShouldRenderValue,d=u.isDisabled,h=u.isMulti,f=u.inputValue,m=u.placeholder,v=this.state,g=v.selectValue,y=v.focusedValue,b=v.isFocused;if(!this.hasValue()||!p)return f?null:r.createElement(l,mt({},c,{key:"placeholder",isDisabled:d,isFocused:b}),m);if(h)return g.map((function(t){var s=t===y;return r.createElement(n,mt({},c,{components:{Container:o,Label:i,Remove:a},isFocused:s,isDisabled:d,key:e.getOptionValue(t),removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))}));if(f)return null;var w=g[0];return r.createElement(s,mt({},c,{data:w,isDisabled:d}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.components.ClearIndicator,t=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!e||o||!this.hasValue()||i)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return r.createElement(e,mt({},t,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var e=this.components.LoadingIndicator,t=this.commonProps,n=this.props,o=n.isDisabled,i=n.isLoading,a=this.state.isFocused;return e&&i?r.createElement(e,mt({},t,{innerProps:{"aria-hidden":"true"},isDisabled:o,isFocused:a})):null}},{key:"renderIndicatorSeparator",value:function(){var e=this.components,t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var o=this.commonProps,i=this.props.isDisabled,a=this.state.isFocused;return r.createElement(n,mt({},o,{isDisabled:i,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,o=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return r.createElement(e,mt({},t,{innerProps:i,isDisabled:n,isFocused:o}))}},{key:"renderMenu",value:function(){var e=this,t=this.components,n=t.Group,o=t.GroupHeading,i=t.Menu,a=t.MenuList,s=t.MenuPortal,l=t.LoadingMessage,c=t.NoOptionsMessage,u=t.Option,p=this.commonProps,d=this.state,h=d.focusedOption,f=d.menuOptions,m=this.props,v=m.captureMenuScroll,g=m.inputValue,y=m.isLoading,b=m.loadingMessage,w=m.minMenuHeight,C=m.maxMenuHeight,k=m.menuIsOpen,S=m.menuPlacement,x=m.menuPosition,E=m.menuPortalTarget,M=m.menuShouldBlockScroll,O=m.menuShouldScrollIntoView,A=m.noOptionsMessage,D=m.onMenuScrollToTop,T=m.onMenuScrollToBottom;if(!k)return null;var R,N=function(t){var n=h===t.data;return t.innerRef=n?e.getFocusedOptionRef:void 0,r.createElement(u,mt({},p,t,{isFocused:n}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())R=f.render.map((function(t){if("group"===t.type){t.type;var i=ft(t,["type"]),a="".concat(t.key,"-heading");return r.createElement(n,mt({},p,i,{Heading:o,headingProps:{id:a},label:e.formatGroupLabel(t.data)}),t.options.map((function(e){return N(e)})))}if("option"===t.type)return N(t)}));else if(y){var P=b({inputValue:g});if(null===P)return null;R=r.createElement(l,p,P)}else{var F=A({inputValue:g});if(null===F)return null;R=r.createElement(c,p,F)}var I={minMenuHeight:w,maxMenuHeight:C,menuPlacement:S,menuPosition:x,menuShouldScrollIntoView:O},L=r.createElement(Yt,mt({},p,I),(function(t){var n=t.ref,o=t.placerProps,s=o.placement,l=o.maxHeight;return r.createElement(i,mt({},p,I,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:y,placement:s}),r.createElement(qn,{isEnabled:v,onTopArrive:D,onBottomArrive:T},r.createElement(Kn,{isEnabled:M},r.createElement(a,mt({},p,{innerRef:e.getMenuListRef,isLoading:y,maxHeight:l}),R))))}));return E||"fixed"===x?r.createElement(s,mt({},p,{appendTo:E,controlElement:this.controlRef,menuPlacement:S,menuPosition:x}),L):L}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,o=t.isDisabled,i=t.isMulti,a=t.name,s=this.state.selectValue;if(a&&!o){if(i){if(n){var l=s.map((function(t){return e.getOptionValue(t)})).join(n);return r.createElement("input",{name:a,type:"hidden",value:l})}var c=0<s.length?s.map((function(t,n){return r.createElement("input",{key:"i-".concat(n),name:a,type:"hidden",value:e.getOptionValue(t)})})):r.createElement("input",{name:a,type:"hidden"});return r.createElement("div",null,c)}var u=s[0]?this.getOptionValue(s[0]):"";return r.createElement("input",{name:a,type:"hidden",value:u})}}},{key:"renderLiveRegion",value:function(){return this.state.isFocused?r.createElement(Nn,{"aria-live":"polite"},r.createElement("p",{id:"aria-selection-event"},"\xa0",this.state.ariaLiveSelection),r.createElement("p",{id:"aria-context"},"\xa0",this.constructAriaLiveMessage())):null}},{key:"render",value:function(){var e=this.components,t=e.Control,n=e.IndicatorsContainer,o=e.SelectContainer,i=e.ValueContainer,a=this.props,s=a.className,l=a.id,c=a.isDisabled,u=a.menuIsOpen,p=this.state.isFocused,d=this.commonProps=this.getCommonProps();return r.createElement(o,mt({},d,{className:s,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:p}),this.renderLiveRegion(),r.createElement(t,mt({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:p,menuIsOpen:u}),r.createElement(i,mt({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),r.createElement(n,mt({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),t}();gt(er,"defaultProps",Zn);var tr,nr,rr,or={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},ir=(tr=er,rr=nr=function(){function t(){var e,n;bt(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return gt(xt(xt(n=Et(this,(e=Mt(t)).call.apply(e,[this].concat(o))))),"select",void 0),gt(xt(xt(n)),"state",{inputValue:void 0!==n.props.inputValue?n.props.inputValue:n.props.defaultInputValue,menuIsOpen:void 0!==n.props.menuIsOpen?n.props.menuIsOpen:n.props.defaultMenuIsOpen,value:void 0!==n.props.value?n.props.value:n.props.defaultValue}),gt(xt(xt(n)),"onChange",(function(e,t){n.callProp("onChange",e,t),n.setState({value:e})})),gt(xt(xt(n)),"onInputChange",(function(e,t){var r=n.callProp("onInputChange",e,t);n.setState({inputValue:void 0!==r?r:e})})),gt(xt(xt(n)),"onMenuOpen",(function(){n.callProp("onMenuOpen"),n.setState({menuIsOpen:!0})})),gt(xt(xt(n)),"onMenuClose",(function(){n.callProp("onMenuClose"),n.setState({menuIsOpen:!1})})),n}return At(t,e.Component),Ct(t,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.props)[e].apply(t,r)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.defaultInputValue,t.defaultMenuIsOpen,t.defaultValue,ft(t,["defaultInputValue","defaultMenuIsOpen","defaultValue"]));return r.createElement(tr,mt({},n,{ref:function(t){e.select=t},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),t}(),gt(nr,"defaultProps",or),rr),ar=function(e){return r.createElement(Mn.Option,e,r.createElement(e.value.tag,{style:sr},e.label,r.createElement(lr,null,e.value.keymap)))},sr={alignItems:"center",display:"flex",justifyContent:"space-between",width:"100%"},lr=Xe("span",{target:"erof0um0",label:"Keymap"})("color:",(function(e){return e.theme.blockSelect.keymapColor}),";font-size:10px;"),cr=function(e,t){return function(n,r){return u({},n,e,t?t(r):{})}},ur=function(e){var t,n=e.className,o=e.onChange,i=e.options,a=e.selectedOption,s=e.theme.blockSelect;return r.createElement(ir,{className:n,components:{Option:ar},onChange:o,options:i,styles:(t=s,{container:cr({display:"inline-block",backgroundColor:t.backgroundColor,borderRadius:t.borderRadius,fontSize:t.fontSize,fontWeight:"600",lineHeight:1}),control:cr({backgroundColor:t.backgroundColor,border:t.border,borderRadius:t.borderRadius,boxShadow:"none",height:t.height,minHeight:t.height,width:t.width,"&:hover":t["&:hover"]},(function(e){return u({},e.isSelected?t["&:selected"]:{})})),dropdownIndicator:cr({padding:"4px","& svg":{fill:t.color}}),indicatorSeparator:cr({display:"none"}),option:cr({alignItems:"center",display:"flex",color:t.color,height:t.optionHeight,minHeight:t.optionHeight,padding:"0 8px","&:hover":t["&:hover"]},(function(e){return u({},e.isSelected?t["&:selected"]:{})})),menu:cr({width:t.dropdownWidth,color:t.color,backgroundColor:t.backgroundColor}),singleValue:cr({overflow:"visible",color:t.color,"&:hover":t["&:hover"]})}),value:a})};ur.propTypes={onChange:C.func,options:C.array,selectedOption:C.object,theme:C.object};var pr=De(ur),dr=function(e){return r.createElement(hr,e)},hr=Xe("span",{target:"e18lhlm00",label:"Separator"})("display:inline-block;width:",(function(e){return"toolbar"===e.type?2:4}),"px;");function fr(){var e,t,n=(e=["\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return fr=function(){return n},n}var mr=function(e){return r.createElement(gr,e)},vr=ce(fr()),gr=Xe("div",{target:"eqpctpo0",label:"StyledSpinner"})("animation:",vr," 1s linear infinite;border-color:",(function(e){return e.theme.spinner.borderColor}),";border-radius:50%;border-style:solid;border-top-color:",(function(e){return e.theme.spinner.borderTopColor}),";border-width:",(function(e){return e.theme.spinner.borderWidth}),";height:",(function(e){return e.theme.spinner.height}),";width:",(function(e){return e.theme.spinner.width}),";"),yr=function(e){return r.createElement(br,e)},br=Xe("div",{target:"e18xitgp0",label:"ToolbarSeparator"})("background-color:",(function(e){return e.theme.toolbarSeparator.backgroundColor}),";display:inline-block;height:",(function(e){return e.theme.toolbarSeparator.height}),";margin:",(function(e){return e.theme.toolbarSeparator.margin}),";width:1px;"),wr={config:{plugins:{options:"block inline link list image table help",image:{uploadCallback:function(e){}}},toolbar:{options:"top",top:{options:"block inline link list image table history help",block:{options:"p h1 h2 h3 h4 h5 h6",grouped:!0},inline:{options:"strong em underline strike subsup"}},inline:{options:"block inline link list image",block:{options:"p h1 h2 h3"},inline:{options:"strong em underline"}}}},dispatch:void 0},Cr=r.createContext(wr),kr=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).state={app_params:{}},n.updateView=function(e){n.setState({app_params:{view:e}})},n}return p(t,e.PureComponent),s(t,[{key:"componentWillMount",value:function(){this.context.dispatcher.addListener(this.updateView)}},{key:"componentWillUnmount",value:function(){this.context.dispatcher.removeListener(this.updateView)}},{key:"render",value:function(){return this.props.render(this.state.app_params)}}]),t}();function Sr(e){this.content=e}kr.contextType=Cr,Sr.prototype={constructor:Sr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,o=r.find(e),i=r.content.slice();return-1==o?i.push(n||e,t):(i[o+1]=t,n&&(i[o]=n)),new Sr(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Sr(n)},addToStart:function(e,t){return new Sr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Sr(n)},addBefore:function(e,t,n){var r=this.remove(t),o=r.content.slice(),i=r.find(e);return o.splice(-1==i?o.length:i,0,t,n),new Sr(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Sr.from(e)).size?new Sr(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Sr.from(e)).size?new Sr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Sr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}},Sr.from=function(e){if(e instanceof Sr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Sr(t)};var xr=Sr,Er=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=xr)&&"object"==typeof n&&"default"in n?n.default:n,o=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},i={firstChild:{},lastChild:{},childCount:{}};o.prototype.nodesBetween=function(e,t,n,r,o){void 0===r&&(r=0);for(var i=0,a=0;a<t;i++){var s=this.content[i],l=a+s.nodeSize;if(e<l&&!1!==n(s,r+a,o,i)&&s.content.size){var c=a+1;s.nodesBetween(Math.max(0,e-c),Math.min(s.content.size,t-c),n,r+c)}a=l}},o.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},o.prototype.textBetween=function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(a,s){a.isText?(o+=a.text.slice(Math.max(e,s)-s,t-s),i=!n):a.isLeaf&&r?(o+=r,i=!n):!i&&a.isBlock&&(o+=n,i=!0)}),0),o},o.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new o(r,this.size+e.size)},o.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],r=0;if(e<t)for(var i=0,a=0;a<t;i++){var s=this.content[i],l=a+s.nodeSize;e<l&&((a<e||t<l)&&(s=s.isText?s.cut(Math.max(0,e-a),Math.min(s.text.length,t-a)):s.cut(Math.max(0,e-a-1),Math.min(s.content.size,t-a-1))),n.push(s),r+=s.nodeSize),a=l}return new o(n,r)},o.prototype.cutByIndex=function(e,t){return e==t?o.empty:0==e&&t==this.content.length?this:new o(this.content.slice(e,t))},o.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new o(r,i)},o.prototype.addToStart=function(e){return new o([e].concat(this.content),this.size+e.nodeSize)},o.prototype.addToEnd=function(e){return new o(this.content.concat(e),this.size+e.nodeSize)},o.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},i.firstChild.get=function(){return this.content.length?this.content[0]:null},i.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},i.childCount.get=function(){return this.content.length},o.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},o.prototype.maybeChild=function(e){return this.content[e]},o.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}},o.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,n,r){for(var o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;var i=t.child(o),a=n.child(o);if(i!=a){if(!i.sameMarkup(a))return r;if(i.isText&&i.text!=a.text){for(var s=0;i.text[s]==a.text[s];s++)r++;return r}if(i.content.size||a.content.size){var l=e(i.content,a.content,r+1);if(null!=l)return l}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)},o.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),function e(t,n,r,o){for(var i=t.childCount,a=n.childCount;;){if(0==i||0==a)return i==a?null:{a:r,b:o};var s=t.child(--i),l=n.child(--a),c=s.nodeSize;if(s!=l){if(!s.sameMarkup(l))return{a:r,b:o};if(s.isText&&s.text!=l.text){for(var u=0,p=Math.min(s.text.length,l.text.length);u<p&&s.text[s.text.length-u-1]==l.text[l.text.length-u-1];)u++,r--,o--;return{a:r,b:o}}if(s.content.size||l.content.size){var d=e(s.content,l.content,r-1,o-1);if(d)return d}r-=c,o-=c}else r-=c,o-=c}}(this,e,t,n)},o.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return s(0,e);if(e==this.size)return s(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(e<=o)return o==e||0<t?s(n+1,o):s(n,r);r=o}},o.prototype.toString=function(){return"<"+this.toStringInner()+">"},o.prototype.toStringInner=function(){return this.content.join(", ")},o.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},o.fromJSON=function(e,t){if(!t)return o.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new o(t.map(e.nodeFromJSON))},o.fromArray=function(e){if(!e.length)return o.empty;for(var t,n=0,r=0;r<e.length;r++){var i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new o(t||e,n)},o.from=function(e){return e?e instanceof o?e:Array.isArray(e)?this.fromArray(e):new o([e],e.nodeSize):o.empty},Object.defineProperties(o.prototype,i);var a={index:0,offset:0};function s(e,t){return a.index=e,a.offset=t,a}function l(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!l(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!l(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}o.empty=new o([],0);var c=function(e,t){this.type=e,this.attrs=t};function u(e){var t=Error.call(this,e);return t.__proto__=u.prototype,t}c.prototype.addToSet=function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t},c.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},c.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},c.prototype.eq=function(e){return this==e||this.type==e.type&&l(this.attrs,e.attrs)},c.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},c.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},c.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},c.setFrom=function(e){if(!e||0==e.length)return c.none;if(e instanceof c)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},c.none=[],((u.prototype=Object.create(Error.prototype)).constructor=u).prototype.name="ReplaceError";var p=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},d={size:{}};function h(e,t,n){if(n.openStart>e.depth)throw new u("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new u("Inconsistent open depths");return function e(t,n,r,o){var i=t.index(o),a=t.node(o);if(i==n.index(o)&&o<t.depth-r.openStart){var s=e(t,n,r,o+1);return a.copy(a.content.replaceChild(i,s))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){var l=C(r,t);return y(a,b(t,l.start,l.end,n,o))}var c=t.parent,u=c.content;return y(c,u.cut(0,t.parentOffset).append(r.content).append(u.cut(n.parentOffset)))}return y(a,w(t,n,o))}(e,t,n,0)}function f(e,t){if(!t.type.compatibleContent(e.type))throw new u("Cannot join "+t.type.name+" onto "+e.type.name)}function m(e,t,n){var r=e.node(n);return f(r,t.node(n)),r}function v(e,t){var n=t.length-1;0<=n&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function g(e,t,n,r){var o=(t||e).node(n),i=0,a=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(v(e.nodeAfter,r),i++));for(var s=i;s<a;s++)v(o.child(s),r);t&&t.depth==n&&t.textOffset&&v(t.nodeBefore,r)}function y(e,t){if(!e.type.validContent(t))throw new u("Invalid content for node "+e.type.name);return e.copy(t)}function b(e,t,n,r,i){var a=e.depth>i&&m(e,t,i+1),s=r.depth>i&&m(n,r,i+1),l=[];return g(null,e,i,l),a&&s&&t.index(i)==n.index(i)?(f(a,s),v(y(a,b(e,t,n,r,i+1)),l)):(a&&v(y(a,w(e,t,i+1)),l),g(t,n,i,l),s&&v(y(s,w(n,r,i+1)),l)),g(r,null,i,l),new o(l)}function w(e,t,n){var r=[];return g(null,e,n,r),e.depth>n&&v(y(m(e,t,n+1),w(e,t,n+1)),r),g(t,null,n,r),new o(r)}function C(e,t){for(var n=t.depth-e.openStart,r=t.node(n).copy(e.content),i=n-1;0<=i;i--)r=t.node(i).copy(o.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}d.size.get=function(){return this.content.size-this.openStart-this.openEnd},p.prototype.insertAt=function(e,t){var n=function e(t,n,r,o){var i=t.findIndex(n),a=i.index,s=i.offset,l=t.maybeChild(a);if(s==n||l.isText)return o&&!o.canReplace(a,a,r)?null:t.cut(0,n).append(r).append(t.cut(n));var c=e(l.content,n-s-1,r);return c&&t.replaceChild(a,l.copy(c))}(this.content,e+this.openStart,t,null);return n&&new p(n,this.openStart,this.openEnd)},p.prototype.removeBetween=function(e,t){return new p(function e(t,n,r){var o=t.findIndex(n),i=o.index,a=o.offset,s=t.maybeChild(i),l=t.findIndex(r),c=l.index,u=l.offset;if(a==n||s.isText){if(u!=r&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(e(s.content,n-a-1,r-a-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},p.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},p.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},p.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return 0<this.openStart&&(e.openStart=this.openStart),0<this.openEnd&&(e.openEnd=this.openEnd),e},p.fromJSON=function(e,t){if(!t)return p.empty;var n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new p(o.fromJSON(e,t.content),t.openStart||0,t.openEnd||0)},p.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,r=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new p(e,n,r)},Object.defineProperties(p.prototype,d),p.empty=new p(o.empty,0,0);var k=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},S={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};k.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},S.parent.get=function(){return this.node(this.depth)},S.doc.get=function(){return this.node(0)},k.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},k.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},k.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},k.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},k.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},k.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},k.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},S.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},S.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r},S.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},k.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return c.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,a=0;a<i.length;a++)!1!==i[a].type.spec.inclusive||r&&i[a].isInSet(r.marks)||(i=i[a--].removeFromSet(i));return i},k.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},k.prototype.sharedDepth=function(e){for(var t=this.depth;0<t;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},k.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);0<=n;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new O(this,e,n)},k.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},k.prototype.max=function(e){return e.pos>this.pos?e:this},k.prototype.min=function(e){return e.pos<this.pos?e:this},k.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},k.resolve=function(e,t){if(!(0<=t&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],r=0,o=t,i=e;;){var a=i.content.findIndex(o),s=a.index,l=a.offset,c=o-l;if(n.push(i,s,r+l),!c)break;if((i=i.child(s)).isText)break;o=c-1,r+=l+1}return new k(t,n,o)},k.resolveCached=function(e,t){for(var n=0;n<x.length;n++){var r=x[n];if(r.pos==t&&r.doc==e)return r}var o=x[E]=k.resolve(e,t);return E=(E+1)%M,o},Object.defineProperties(k.prototype,S);var x=[],E=0,M=12,O=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},A={start:{},end:{},parent:{},startIndex:{},endIndex:{}};A.start.get=function(){return this.$from.before(this.depth+1)},A.end.get=function(){return this.$to.after(this.depth+1)},A.parent.get=function(){return this.$from.node(this.depth)},A.startIndex.get=function(){return this.$from.index(this.depth)},A.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(O.prototype,A);var D=Object.create(null),T=function(e,t,n,r){this.type=e,this.attrs=t,this.content=n||o.empty,this.marks=r||c.none},R={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};R.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},R.childCount.get=function(){return this.content.childCount},T.prototype.child=function(e){return this.content.child(e)},T.prototype.maybeChild=function(e){return this.content.maybeChild(e)},T.prototype.forEach=function(e){this.content.forEach(e)},T.prototype.nodesBetween=function(e,t,n,r){void 0===r&&(r=0),this.content.nodesBetween(e,t,n,r,this)},T.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},R.textContent.get=function(){return this.textBetween(0,this.content.size,"")},T.prototype.textBetween=function(e,t,n,r){return this.content.textBetween(e,t,n,r)},R.firstChild.get=function(){return this.content.firstChild},R.lastChild.get=function(){return this.content.lastChild},T.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},T.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},T.prototype.hasMarkup=function(e,t,n){return this.type==e&&l(this.attrs,t||e.defaultAttrs||D)&&c.sameSet(this.marks,n||c.none)},T.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},T.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},T.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},T.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return p.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),a=r.start(i),s=r.node(i).content.cut(r.pos-a,o.pos-a);return new p(s,r.depth-i,o.depth-i)},T.prototype.replace=function(e,t,n){return h(this.resolve(e),this.resolve(t),n)},T.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(!(t=t.maybeChild(r)))return null;if(o==e||t.isText)return t;e-=o+1}},T.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},T.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},T.prototype.resolve=function(e){return k.resolveCached(this,e)},T.prototype.resolveNoCache=function(e){return k.resolve(this,e)},T.prototype.rangeHasMark=function(e,t,n){var r=!1;return e<t&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r},R.isBlock.get=function(){return this.type.isBlock},R.isTextblock.get=function(){return this.type.isTextblock},R.inlineContent.get=function(){return this.type.inlineContent},R.isInline.get=function(){return this.type.isInline},R.isText.get=function(){return this.type.isText},R.isLeaf.get=function(){return this.type.isLeaf},R.isAtom.get=function(){return this.type.isAtom},T.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),P(this.marks,e)},T.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},T.prototype.canReplace=function(e,t,n,r,i){void 0===n&&(n=o.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var a=this.contentMatchAt(e).matchFragment(n,r,i),s=a&&a.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var l=r;l<i;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0},T.prototype.canReplaceWith=function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},T.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},T.prototype.defaultContentType=function(e){return this.contentMatchAt(e).defaultType},T.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(e){return e.check()}))},T.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},T.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=o.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)},Object.defineProperties(T.prototype,R);var N=function(e){function t(t,n,r,o){if(e.call(this,t,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}e&&(t.__proto__=e);var n={textContent:{},nodeSize:{}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):P(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(T);function P(e,t){for(var n=e.length-1;0<=n;n--)t=e[n].type.name+"("+t+")";return t}var F=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},I={inlineContent:{},defaultType:{},edgeCount:{}};F.parse=function(e,t){var n=new L(e,t);if(null==n.next)return F.empty;var r=z(n);n.next&&n.err("Unexpected trailing text");var o,i,a=(o=function(e){var t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(e(n,i))}),[]);if("seq"==t.type)for(var a=0;;a++){var s=e(t.exprs[a],i);if(a==t.exprs.length-1)return s;o(s,i=n())}else{if("star"==t.type){var l=n();return r(i,l),o(e(t.expr,l),l),[r(l)]}if("plus"==t.type){var c=n();return o(e(t.expr,i),c),o(e(t.expr,c),c),[r(c)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){for(var u=i,p=0;p<t.min;p++){var d=n();o(e(t.expr,u),d),u=d}if(-1==t.max)o(e(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var f=n();r(u,f),o(e(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(i,null,t.value)]}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}}(r),i=Object.create(null),function e(t){var n=[];t.forEach((function(e){o[e].forEach((function(e){var t=e.term,r=e.to;if(t){var i=n.indexOf(t),a=-1<i&&n[i+1];H(o,r).forEach((function(e){a||n.push(t,a=[]),-1==a.indexOf(e)&&a.push(e)}))}}))}));for(var r=i[t.join(",")]=new F(-1<t.indexOf(o.length-1)),a=0;a<n.length;a+=2){var s=n[a+1].sort(j);r.next.push(n[a],i[s.join(",")]||e(s))}return r}(H(o,0)));return function(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,a=[],s=0;s<o.next.length;s+=2){var l=o.next[s],c=o.next[s+1];a.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==r.indexOf(c)&&r.push(c)}i&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position")}}(a,n),a},F.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},F.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r},I.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},I.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},F.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},F.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var r=[this];return function i(a,s){var l=a.matchFragment(e,n);if(l&&(!t||l.validEnd))return o.from(s.map((function(e){return e.createAndFill()})));for(var c=0;c<a.next.length;c+=2){var u=a.next[c],p=a.next[c+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var d=i(p,s.concat(u));if(d)return d}}}(this,[])},F.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},F.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],a=r;a.type;a=a.via)i.push(a.type);return i.reverse()}for(var s=0;s<o.next.length;s+=2){var l=o.next[s];l.isLeaf||l.hasRequiredAttrs()||l.name in t||r.type&&!o.next[s+1].validEnd||(n.push({match:l.contentMatch,type:l,via:r}),t[l.name]=!0)}}},I.edgeCount.get=function(){return this.next.length>>1},F.prototype.edge=function(e){var t=e<<1;if(t>this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},F.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var r=1;r<n.next.length;r+=2)-1==e.indexOf(n.next[r])&&t(n.next[r])}(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)r+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return r})).join("\n")},Object.defineProperties(F.prototype,I),F.empty=new F(!0);var L=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},B={next:{}};function z(e){for(var t=[];t.push(_(e)),e.eat("|"););return 1==t.length?t[0]:{type:"choice",exprs:t}}function _(e){for(var t=[];t.push(V(e)),e.next&&")"!=e.next&&"|"!=e.next;);return 1==t.length?t[0]:{type:"seq",exprs:t}}function V(e){for(var t=function(e){if(e.eat("(")){var t=z(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var a=n[i];-1<a.groups.indexOf(t)&&o.push(a)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=W(e,t)}return t}function $(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function W(e,t){var n=$(e),r=n;return e.eat(",")&&(r="}"!=e.next?$(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function j(e,t){return e-t}function H(e,t){var n=[];return function t(r){var o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var a=o[i],s=a.term,l=a.to;s||-1!=n.indexOf(l)||t(l)}}(t),n.sort(j)}function K(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function U(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function q(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new X(e[n]);return t}B.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},L.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,B);var J=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=q(n.attrs),this.defaultAttrs=K(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},G={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};G.isInline.get=function(){return!this.isBlock},G.isTextblock.get=function(){return this.isBlock&&this.inlineContent},G.isLeaf.get=function(){return this.contentMatch==F.empty},G.isAtom.get=function(){return this.isLeaf||this.spec.atom},J.prototype.hasRequiredAttrs=function(e){for(var t in this.attrs)if(this.attrs[t].isRequired&&(!e||!(t in e)))return!0;return!1},J.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},J.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:U(this.attrs,e)},J.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new T(this,this.computeAttrs(e),o.from(t),c.setFrom(n))},J.prototype.createChecked=function(e,t,n){if(t=o.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new T(this,this.computeAttrs(e),t,c.setFrom(n))},J.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=o.from(t)).size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(o.empty,!0);return i?new T(this,e,t.append(i),c.setFrom(n)):null},J.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},J.prototype.allowsMarkType=function(e){return null==this.markSet||-1<this.markSet.indexOf(e)},J.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},J.prototype.allowedMarks=function(e){var t;if(null==this.markSet)return e;for(var n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:c.empty:e},J.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,r){return n[e]=new J(e,t,r)}));var r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(J.prototype,G);var X=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Y={isRequired:{}};Y.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(X.prototype,Y);var Z=function(e,t,n,r){this.name=e,this.schema=n,this.spec=r,this.attrs=q(r.attrs),this.rank=t,this.excluded=null;var o=K(this.attrs);this.instance=o&&new c(this,o)};Z.prototype.create=function(e){return!e&&this.instance?this.instance:new c(this,U(this.attrs,e))},Z.compile=function(e,t){var n=Object.create(null),r=0;return e.forEach((function(e,o){return n[e]=new Z(e,r++,t,o)})),n},Z.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},Z.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},Z.prototype.excludes=function(e){return-1<this.excluded.indexOf(e)};var Q=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=r.from(e.nodes),this.spec.marks=r.from(e.marks),this.nodes=J.compile(this.spec.nodes,this),this.marks=Z.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],a=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[a]||(n[a]=F.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==s?null:s?ee(this,s.split(" ")):""!=s&&i.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],u=c.spec.excludes;c.excluded=null==u?[c]:""==u?[]:ee(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ee(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],a=i;if(i)n.push(i);else for(var s in e.marks){var l=e.marks[s];("_"==o||l.spec.group&&-1<l.spec.group.split(" ").indexOf(o))&&n.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}Q.prototype.node=function(e,t,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof J))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)},Q.prototype.text=function(e,t){var n=this.nodes.text;return new N(n,n.defaultAttrs,e,c.setFrom(t))},Q.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},Q.prototype.nodeFromJSON=function(e){return T.fromJSON(this,e)},Q.prototype.markFromJSON=function(e){return c.fromJSON(this,e)},Q.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var te=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)}))};te.prototype.parse=function(e,t){void 0===t&&(t={});var n=new se(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},te.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new se(this,t,!0);return n.addAll(e,null,t.from,t.to),p.maxOpen(n.finish())},te.prototype.matchTag=function(e,t){for(var n,r,o=0;o<this.tags.length;o++){var i=this.tags[o];if(n=e,r=i.tag,(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,r)&&(void 0===i.namespace||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){var a=i.getAttrs(e);if(!1===a)continue;i.attrs=a}return i}}},te.prototype.matchStyle=function(e,t,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!n.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},te.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)}var r,o=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=ce(e)),e.mark=t}))};for(var i in e.marks)o(i);for(var a in e.nodes)r=void 0,(r=e.nodes[a].spec.parseDOM)&&r.forEach((function(e){n(e=ce(e)),e.node=a}));return t},te.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new te(e,te.schemaRules(e)))};var ne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},re={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oe={ol:!0,ul:!0};function ie(e){return(e?1:0)|("full"===e?2:0)}var ae=function(e,t,n,r,o,i){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&i?null:e.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=c.none};ae.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(o.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ae.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/\s+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=o.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(o.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var se=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.pendingMarks=[];var r,o=t.topNode,i=ie(t.preserveWhitespace)|(n?4:0);r=o?new ae(o.type,o.attrs,c.none,!0,t.topMatch||o.type.contentMatch,i):new ae(n?null:e.schema.topNodeType,null,c.none,!0,null,i),this.nodes=[r],this.open=0,this.find=t.findPositions,this.needsBlock=!1},le={top:{},currentPos:{}};function ce(e){var t={};for(var n in e)t[n]=e[n];return t}le.top.get=function(){return this.nodes[this.open]},se.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){for(var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}},se.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/\s+/g," "),/^\s/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/\s$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},se.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();oe.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&oe.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:re.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,i=this.needsBlock;ne.hasOwnProperty(t)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(e),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(e,n)},se.prototype.readStyles=function(e){for(var t=c.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t},se.prototype.addElementByRule=function(e,t){var n,r,o,i=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs)):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return i.insertNode(e)}));else{var s=t.contentElement;"string"==typeof s?s=e.querySelector(s):"function"==typeof s&&(s=s(e)),s||(s=e),this.findAround(e,s,!0),this.addAll(s,n)}return n&&(this.sync(a),this.open--),o&&this.removePendingMark(o),!0},se.prototype.addAll=function(e,t,n,r){for(var o=n||0,i=n?e.childNodes[n]:e.firstChild,a=null==r?null:e.childNodes[r];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&ne.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},se.prototype.findPlace=function(e){for(var t,n,r=this.open;0<=r;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(n=o,!(t=i).length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var a=0;a<t.length;a++)this.enterInner(t[a],null,!1);return!0},se.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));n.content.push(e.mark(r))}},se.prototype.applyPendingMarks=function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.type.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}},se.prototype.enter=function(e,t,n){var r=this.findPlace(e.create(t));return r&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),r},se.prototype.enterInner=function(e,t,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(e,t);var i=null==r?-5&o.options:ie(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new ae(e,t,o.activeMarks,n,null,i)),this.open++},se.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},se.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},se.prototype.sync=function(e){for(var t=this.open;0<=t;t--)if(this.nodes[t]==e)return void(this.open=t)},se.prototype.addPendingMark=function(e){this.pendingMarks.push(e)},se.prototype.removePendingMark=function(e){var t=this.pendingMarks.lastIndexOf(e);if(-1<t)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}},le.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;0<=t;t--){for(var n=this.nodes[t].content,r=n.length-1;0<=r;r--)e+=n[r].nodeSize;t&&e++}return e},se.prototype.findAtPoint=function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)},se.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},se.prototype.findAround=function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)&&t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)},se.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},se.prototype.matchesContext=function(e){var t=this;if(-1<e.indexOf("|"))return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),a=function(e,s){for(;0<=e;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;i<=s;s--)if(a(e-1,s))return!0;return!1}var c=0<s||0==s&&o?t.nodes[s].type:r&&i<=s?r.node(s-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;s--}return!0};return a(n.length-1,this.open)},se.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;0<=t;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Object.defineProperties(se.prototype,le);var ue=function(e,t){this.nodes=e||{},this.marks=t||{}};function pe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function de(e){return e.document||window.document}ue.prototype.serializeFragment=function(e,t,n){var r=this;void 0===t&&(t={}),n||(n=de(t).createDocumentFragment());var o=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,a=0;n<i.length&&a<e.marks.length;){var s=e.marks[a];if(r.marks[s.type.name]){if(!s.eq(i[n]))break;n+=2,a++}else a++}for(;n<i.length;)o=i.pop(),i.pop();for(;a<e.marks.length;){var l=e.marks[a++],c=r.serializeMark(l,e.isInline,t);c&&(i.push(l,o),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(r.serializeNode(e,t))})),n},ue.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=ue.renderSpec(de(t),this.nodes[e.type.name](e)),r=n.dom,o=n.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return r},ue.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),r=e.marks.length-1;0<=r;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},ue.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var r=this.marks[e.type.name];return r&&ue.renderSpec(de(n),r(e,t))},ue.renderSpec=function(e,t){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var n=e.createElement(t[0]),r=null,o=t[1],i=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o))for(var a in i=2,o)"style"==a?n.style.cssText=o[a]:null!=o[a]&&n.setAttribute(a,o[a]);for(var s=i;s<t.length;s++){var l=t[s];if(0===l){if(s<t.length-1||i<s)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=ue.renderSpec(e,l),u=c.dom,p=c.contentDOM;if(n.appendChild(u),p){if(r)throw new RangeError("Multiple content holes");r=p}}return{dom:n,contentDOM:r}},ue.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ue(this.nodesFromSchema(e),this.marksFromSchema(e)))},ue.nodesFromSchema=function(e){var t=pe(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ue.marksFromSchema=function(e){return pe(e.marks)},t.Node=T,t.ResolvedPos=k,t.NodeRange=O,t.Fragment=o,t.Slice=p,t.ReplaceError=u,t.Mark=c,t.Schema=Q,t.NodeType=J,t.MarkType=Z,t.ContentMatch=F,t.DOMParser=te,t.DOMSerializer=ue}));g(Er),Er.Node,Er.ResolvedPos,Er.NodeRange,Er.Fragment,Er.Slice,Er.ReplaceError,Er.Mark;var Mr=Er.Schema,Or=(Er.NodeType,Er.MarkType,Er.ContentMatch,Er.DOMParser,Er.DOMSerializer,y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,16);function r(e){return 65535&e}var o=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},i=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};i.prototype.recover=function(e){var t,o=0,i=r(e);if(!this.inverted)for(var a=0;a<i;a++)o+=this.ranges[3*a+2]-this.ranges[3*a+1];return this.ranges[3*i]+o+((t=e)-(65535&t))/n},i.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},i.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},i.prototype._map=function(e,t,r){for(var i=0,a=this.inverted?2:1,s=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var c=this.ranges[l]-(this.inverted?i:0);if(e<c)break;var u=this.ranges[l+a],p=this.ranges[l+s],d=c+u;if(e<=d){var h=c+i+((u?e==c?-1:e==d?1:t:t)<0?0:p);return r?h:new o(h,t<0?e!=c:e!=d,l/3+(e-c)*n)}i+=p-u}return r?e+i:new o(e+i)},i.prototype.touches=function(e,t){for(var n=0,o=r(t),i=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var l=this.ranges[s]-(this.inverted?n:0);if(e<l)break;var c=this.ranges[s+i];if(e<=l+c&&s==3*o)return!0;n+=this.ranges[s+a]-c}return!1},i.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],a=i-(this.inverted?o:0),s=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(a,a+l,s,s+c),o+=c-l}},i.prototype.invert=function(){return new i(this.ranges,!this.inverted)},i.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},i.offset=function(e){return 0==e?i.empty:new i(e<0?[0,-e,0]:[0,0,e])},i.empty=new i([]);var a=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function s(e){var t=Error.call(this,e);return t.__proto__=s.prototype,t}a.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new a(this.maps,this.mirror,e,t)},a.prototype.copy=function(){return new a(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},a.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},a.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},a.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},a.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},a.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;0<=t;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&t<r?n-r-1:null)}},a.prototype.invert=function(){var e=new a;return e.appendMappingInverted(this),e},a.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype._map=function(e,t,n){for(var r=!1,i=null,a=this.from;a<this.to;a++){var s=this.maps[a],l=i&&i[a];if(null!=l&&s.touches(e,l))e=s.recover(l);else{var c=s.mapResult(e,t);if(null!=c.recover){var u=this.getMirror(a);if(null!=u&&a<u&&u<this.to){if(c.deleted){a=u,e=this.maps[u].recover(c.recover);continue}(i||(i=Object.create(null)))[u]=c.recover}}c.deleted&&(r=!0),e=c.pos}}return n?e:new o(e,r)},((s.prototype=Object.create(Error.prototype)).constructor=s).prototype.name="TransformError";var l=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new a},c={before:{},docChanged:{}};function u(){throw new Error("Override me")}c.before.get=function(){return this.docs.length?this.docs[0]:this.doc},l.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new s(t.failed);return this},l.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},c.docChanged.get=function(){return 0<this.steps.length},l.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(l.prototype,c);var p=Object.create(null),d=function(){};d.prototype.apply=function(e){return u()},d.prototype.getMap=function(){return i.empty},d.prototype.invert=function(e){return u()},d.prototype.map=function(e){return u()},d.prototype.merge=function(e){return null},d.prototype.toJSON=function(){return u()},d.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=p[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},d.jsonID=function(e,t){if(e in p)throw new RangeError("Duplicate use of step JSON ID "+e);return(p[e]=t).prototype.jsonID=e,t};var h=function(e,t){this.doc=e,this.failed=t};h.ok=function(e){return new h(e,null)},h.fail=function(e){return new h(null,e)},h.fromReplace=function(e,t,n,r){try{return h.ok(e.replace(t,n,r))}catch(e){if(e instanceof Er.ReplaceError)return h.fail(e.message);throw e}};var f=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(e){return this.structure&&v(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new i([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?Er.Slice.empty:new Er.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?Er.Slice.empty:new Er.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,Er.Slice.fromJSON(e,n.slice),!!n.structure)},t}(d);d.jsonID("replace",f);var m=function(e){function t(t,n,r,o,i,a,s){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=a,this.structure=!!s}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(e){if(this.structure&&(v(e,this.from,this.gapFrom)||v(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new i([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,Er.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(d);function v(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;0<o&&0<i&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(0<o)for(var a=r.node(i).maybeChild(r.indexAfter(i));0<o;){if(!a||a.isLeaf)return!0;a=a.firstChild,o--}return!1}function g(e){return{type:e,attrs:null}}function y(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function b(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;0<=o;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(0<i)return null}if(r.parentOffset==r.parent.content.size)for(var a=r.depth-1;0<=a;a--){var s=r.indexAfter(a);if(r.node(a).canReplaceWith(s,s,n))return r.after(a+1);if(s<r.node(a).childCount)return null}}function w(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(w(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return Er.Fragment.fromArray(r)}d.jsonID("replaceAround",m),l.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),a=r.after(o+1),s=i,l=a,c=Er.Fragment.empty,u=0,p=o,d=!1;t<p;p--)d||0<n.index(p)?(d=!0,c=Er.Fragment.from(n.node(p).copy(c)),u++):s--;for(var h=Er.Fragment.empty,f=0,v=o,g=!1;t<v;v--)g||r.after(v+1)<r.end(v)?(g=!0,h=Er.Fragment.from(r.node(v).copy(h)),f++):l++;return this.step(new m(s,l,i,a,new Er.Slice(c.append(h),u,f),c.size-u,!0))},l.prototype.wrap=function(e,t){for(var n=Er.Fragment.empty,r=t.length-1;0<=r;r--)n=Er.Fragment.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new m(o,i,o,i,new Er.Slice(n,0,0),t.length,!0))},l.prototype.setBlockType=function(e,t,n,r){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&(c=o.doc,u=o.mapping.slice(i).map(t),p=n,h=(d=c.resolve(u)).index(),d.parent.canReplaceWith(h,h+1,p))){o.clearIncompatible(o.mapping.slice(i).map(t,1),n);var a=o.mapping.slice(i),s=a.map(t,1),l=a.map(t+e.nodeSize,1);return o.step(new m(s,l,s+1,l-1,new Er.Slice(Er.Fragment.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}var c,u,p,d,h})),this},l.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new m(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new Er.Slice(Er.Fragment.from(i),0,0),1,!0))},l.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=Er.Fragment.empty,i=Er.Fragment.empty,a=r.depth,s=r.depth-t,l=t-1;s<a;a--,l--){o=Er.Fragment.from(r.node(a).copy(o));var c=n&&n[l];i=Er.Fragment.from(c?c.type.create(c.attrs,i):r.node(a).copy(i))}return this.step(new f(e,e,new Er.Slice(o.append(i),t,t,!0)))},l.prototype.join=function(e,t){void 0===t&&(t=1);var n=new f(e-t,e+t,Er.Slice.empty,!0);return this.step(n)};var C=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Er.Slice(w(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return h.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new k(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(d);d.jsonID("addMark",C);var k=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new Er.Slice(w(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return h.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new C(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(d);function S(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=Er.Slice.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);if(M(o,i,r))return new f(t,n,r);var a,s,l,c,u=function(e,t){for(var n=new O(e),r=1;t.size&&r<=3;r++)t=n.placeSlice(t.content,t.openStart,t.openEnd,r);for(;n.open.length;)n.closeNode();return n.placed}(o,r),p=(s=function e(t,n,r,o){var i=Er.Fragment.empty,a=0,s=r[n];if(t.depth>n){var l=e(t,n+1,r,o||s);a=l.openEnd+1,i=Er.Fragment.from(t.node(n+1).copy(l.content))}return s&&(i=i.append(s.content),a=s.openEnd),o&&(i=i.append(t.node(n).contentMatchAt(t.indexAfter(n)).fillBefore(Er.Fragment.empty,!0)),a=0),{content:i,openEnd:a}}(a=o,0,u,!1),l=s.content,c=s.openEnd,new Er.Slice(l,a.depth,c||0)),d=E(o,i,p);if(!d)return null;if(p.size!=d.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var r,o=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!o.isTextblock)return!1;for(var i=t.index();i<t.parent.childCount;i++)if(!o.type.allowsMarks(t.parent.child(i).marks))return!1;return n.openEnd?r=o.contentMatchAt(o.childCount):(r=o.contentMatchAt(o.childCount),n.size&&(r=r.matchFragment(n.content,n.openStart?1:0))),(r=r.matchFragment(t.parent.content,t.index()))&&r.validEnd}(o,i,p)){for(var h=i.depth,v=i.after(h);1<h&&v==i.end(--h);)++v;var g=E(o,e.resolve(v),p);if(g)return new m(t,v,n,i.end(),g,p.size)}return d.size||t!=n?new f(t,n,d):null}function x(e,t,n,r,o,i,a){var s,l=e.childCount,c=l-(0<a?1:0),u=i<0?t:n.node(o);s=i<0?u.contentMatchAt(c):1==l&&0<a?u.contentMatchAt(i?n.index(o):n.indexAfter(o)):u.contentMatchAt(n.indexAfter(o)).matchFragment(e,0<l&&i?1:0,c);var p=r.node(o);if(0<a&&o<r.depth){var d=p.content.cutByIndex(r.indexAfter(o)).addToStart(e.lastChild),h=s.fillBefore(d,!0);if(h&&h.size&&0<i&&1==l&&(h=null),h){var f=x(e.lastChild.content,e.lastChild,n,r,o+1,1==l?i-1:-1,a-1);if(f){var m=e.lastChild.copy(f);return h.size?e.cutByIndex(0,l-1).append(h).addToEnd(m):e.replaceChild(l-1,m)}}}0<a&&(s=s.matchType((1==l&&0<i?n.node(o+1):e.lastChild).type));var v=r.index(o);if(v==p.childCount&&!p.type.compatibleContent(t.type))return null;for(var g=s.fillBefore(p.content,!0,v),y=v;g&&y<p.content.childCount;y++)u.type.allowsMarks(p.content.child(y).marks)||(g=null);if(!g)return null;if(0<a){var b=function e(t,n,r,o,i){var a,s=t.content,l=s.childCount;if(a=0<=i?r.node(o).contentMatchAt(r.indexAfter(o)).matchFragment(s,0<i?1:0,l):t.contentMatchAt(l),0<n){var c=e(s.lastChild,n-1,r,o+1,1==l?i-1:-1);s=s.replaceChild(l-1,c)}return t.copy(s.append(a.fillBefore(Er.Fragment.empty,!0)))}(e.lastChild,a-1,n,o+1,1==l?i-1:-1);e=e.replaceChild(l-1,b)}return e=e.append(g),r.depth>o&&(e=e.addToEnd(function e(t,n){var r=t.node(n),o=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(n));return t.depth>n&&(o=o.addToEnd(e(t,n+1))),r.copy(o)}(r,o+1))),e}function E(e,t,n){var r=x(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return r?function(e,t,n){for(;0<t&&0<n&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new Er.Slice(e,t,n)}(r,n.openStart,t.depth):null}function M(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}d.jsonID("removeMark",k),l.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],a=null,s=null;return this.doc.nodesBetween(e,t,(function(r,l,c){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(l,e),d=Math.min(l+r.nodeSize,t),h=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(h)||(a&&a.to==p&&a.mark.eq(u[f])?a.to=d:o.push(a=new k(p,d,u[f])));s&&s.to==p?s.to=d:i.push(s=new C(p,d,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},l.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(r,a){if(r.isInline){i++;var s=null;if(n instanceof Er.MarkType){var l=n.isInSet(r.marks);l&&(s=[l])}else n?n.isInSet(r.marks)&&(s=[n]):s=r.marks;if(s&&s.length)for(var c=Math.min(a+r.nodeSize,t),u=0;u<s.length;u++){for(var p=s[u],d=void 0,h=0;h<o.length;h++){var f=o[h];f.step==i-1&&p.eq(o[h].style)&&(d=f)}d?(d.to=c,d.step=i):o.push({style:p,from:Math.max(a,e),to:c,step:i})}}})),o.forEach((function(e){return r.step(new k(e.from,e.to,e.style))})),this},l.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,a=0;a<r.childCount;a++){var s=r.child(a),l=i+s.nodeSize,c=n.matchType(s.type,s.attrs);if(c){n=c;for(var u=0;u<s.marks.length;u++)t.allowsMarkType(s.marks[u].type)||this.step(new k(i,l,s.marks[u]))}else o.push(new f(i,l,Er.Slice.empty));i=l}if(!n.validEnd){var p=n.fillBefore(Er.Fragment.empty,!0);this.replace(i,i,new Er.Slice(p,0,0))}for(var d=o.length-1;0<=d;d--)this.step(o[d]);return this},l.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=Er.Slice.empty);var r=S(this.doc,e,t,n);return r&&this.step(r),this},l.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new Er.Slice(Er.Fragment.from(n),0,0))},l.prototype.delete=function(e,t){return this.replace(e,t,Er.Slice.empty)},l.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var O=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),r=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:r,content:Er.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function A(e,t,n){var r=e.content;if(1<t){var o=A(e.firstChild,t-1,1==e.childCount?n-1:0);r=e.content.replaceChild(0,o)}var i=e.type.contentMatch.fillBefore(r,0==n);return e.copy(i.append(r))}function D(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(D(i.content,t+1,n,r,i)))}return r<t&&(e=o.contentMatchAt(0).fillBefore(e,!0).append(e)),e}function T(e,t){for(var n=[],r=Math.min(e.depth,t.depth);0<=r;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}O.prototype.placeSlice=function(e,t,n,r,o){if(0<t){var i=e.firstChild,a=this.placeSlice(i.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,r,i);a.content!=i.content&&(t=a.content.size?(e=e.replaceChild(0,i.copy(a.content)),a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),0))}var s=this.placeContent(e,t,n,r,o);if(2<r&&s.size&&0==t){for(var l=0;l<s.content.childCount;l++){var c=s.content.child(l);this.placeContent(c.content,0,n&&l==s.content.childCount.length-1?n-1:0,r,c)}s=Er.Fragment.empty}return s},O.prototype.placeContent=function(e,t,n,r,o){for(var i=0;i<e.childCount;i++){for(var a=e.child(i),s=!1,l=i==e.childCount-1,c=this.open.length-1;0<=c;c--){var u=this.open[c],p=void 0;if(1<r&&(p=u.match.findWrapping(a.type))&&(!o||!p.length||p[p.length-1]!=o.type)){for(;this.open.length-1>c;)this.closeNode();for(var d=0;d<p.length;d++)u.match=u.match.matchType(p[d]),c++,u={parent:p[d].create(),match:p[d].contentMatch,content:Er.Fragment.empty,wrapper:!0,openEnd:0,depth:c+d},this.open.push(u)}var h=u.match.matchType(a.type);if(!h){var f=u.match.fillBefore(Er.Fragment.from(a));if(!f){if(o&&u.match.matchType(o.type))break;continue}for(var m=0;m<f.childCount;m++){var v=f.child(m);this.addNode(u,v,0),h=u.match.matchFragment(v)}}for(;this.open.length-1>c;)this.closeNode();a=a.mark(u.parent.type.allowedMarks(a.marks)),t&&(a=A(a,t,l?n:0),t=0),this.addNode(u,a,l?n:0),u.match=h,l&&(n=0),s=!0;break}if(!s)break}return 1<this.open.length&&(0<i&&i==e.childCount||o&&this.open[this.open.length-1].parent.type==o.type)&&this.closeNode(),new Er.Slice(e.cutByIndex(i),t,n)},O.prototype.addNode=function(e,t,n){var r,o;e.content=(r=e.content,o=e.openEnd,o?r.replaceChild(r.childCount-1,function e(t,n){var r=t.content;if(1<n){var o=e(t.lastChild,n-1);r=t.content.replaceChild(t.childCount-1,o)}var i=t.contentMatchAt(t.childCount).fillBefore(Er.Fragment.empty,!0);return t.copy(r.append(i))}(r.lastChild,o)):r).addToEnd(t),e.openEnd=n},O.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},l.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(M(r,o,n))return this.step(new f(e,t,n));var i=T(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var a=-(r.depth+1);i.unshift(a);for(var s=r.depth,l=r.pos-1;0<s;s--,l--){var c=r.node(s).type.spec;if(c.defining||c.isolating)break;-1<i.indexOf(s)?a=s:r.before(s)==l&&i.splice(1,0,-s)}for(var u=i.indexOf(a),p=[],d=n.openStart,h=n.content,m=0;;m++){var v=h.firstChild;if(p.push(v),m==n.openStart)break;h=v.content}0<d&&p[d-1].type.spec.defining&&r.node(u).type!=p[d-1].type?d-=1:2<=d&&p[d-1].isTextblock&&p[d-2].type.spec.defining&&r.node(u).type!=p[d-2].type&&(d-=2);for(var g=n.openStart;0<=g;g--){var y=(g+d+1)%(n.openStart+1),b=p[y];if(b)for(var w=0;w<i.length;w++){var C=i[(w+u)%i.length],k=!0;C<0&&(k=!1,C=-C);var S=r.node(C-1),x=r.index(C-1);if(S.canReplaceWith(x,x,b.type,b.marks))return this.replace(r.before(C),k?o.after(C):t,new Er.Slice(D(n.content,0,n.openStart,y),y,n.openEnd))}}return this.replace(e,t,n)},l.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=b(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new Er.Slice(Er.Fragment.from(n),0,0))},l.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=T(n,r),i=0;i<o.length;i++){var a=o[i],s=i==o.length-1;if(s&&0==a||n.node(a).type.contentMatch.validEnd)return this.delete(n.start(a),r.end(a));if(0<a&&(s||n.node(a-1).canReplace(n.index(a-1),r.indexAfter(a-1))))return this.delete(n.before(a),r.after(a))}for(var l=1;l<=n.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l))return this.delete(n.before(l),t);return this.delete(e,t)},t.Transform=l,t.TransformError=s,t.Step=d,t.StepResult=h,t.joinPoint=function(e,t,n){void 0===n&&(n=-1);for(var r=e.resolve(t),o=r.depth;;o--){var i=void 0,a=void 0;if(a=o==r.depth?(i=r.nodeBefore,r.nodeAfter):0<n?(i=r.node(o+1),r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),r.node(o+1)),i&&!i.isTextblock&&y(i,a))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}},t.canJoin=function(e,t){var n=e.resolve(t),r=n.index();return y(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)},t.canSplit=function(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,a=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!a.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var s=o.depth-1,l=n-2;i<s;s--,l--){var c=o.node(s),u=o.index(s);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),d=r&&r[l]||c;if(d!=c&&(p=p.replaceChild(0,d.type.create(d.attrs))),!c.canReplace(u+1,c.childCount)||!d.type.validContent(p))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)},t.insertPoint=b,t.dropPoint=function(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var a=1;a<=(0==n.openStart&&n.size?2:1);a++)for(var s=r.depth;0<=s;s--){var l=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,c=r.index(s)+(0<l?1:0);if(1==a?r.node(s).canReplace(c,c,o):r.node(s).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==l?r.pos:l<0?r.before(s+1):r.after(s+1)}return null},t.liftTarget=function(e){for(var t,n,r,o=e.parent.content.cutByIndex(e.startIndex,e.endIndex),i=e.depth;;--i){var a=e.$from.node(i),s=e.$from.index(i),l=e.$to.indexAfter(i);if(i<e.depth&&a.canReplace(s,l,o))return i;if(0==i||a.type.spec.isolating||(t=a,r=l,0!=(n=s)&&!t.canReplace(n,t.childCount)||r!=t.childCount&&!t.canReplace(0,r)))break}},t.findWrapping=function(e,t,n,r){void 0===r&&(r=e);var o=function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var a=i.length?i[0]:t;return n.canReplaceWith(r,o,a)?i:null}(e,t),i=o&&function(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),a=t.contentMatch.findWrapping(i.type);if(!a)return null;for(var s=(a.length?a[a.length-1]:t).contentMatch,l=r;s&&l<o;l++)s=s.matchType(n.child(l).type);return s&&s.validEnd?a:null}(r,t);return i?o.map(g).concat({type:t,attrs:n}).concat(i.map(g)):null},t.StepMap=i,t.MapResult=o,t.Mapping=a,t.AddMarkStep=C,t.RemoveMarkStep=k,t.ReplaceStep=f,t.ReplaceAroundStep=m,t.replaceStep=S})));g(Or),Or.Transform,Or.TransformError,Or.Step,Or.StepResult,Or.joinPoint,Or.canJoin,Or.canSplit,Or.insertPoint,Or.dropPoint,Or.liftTarget,Or.findWrapping,Or.StepMap,Or.MapResult,Or.Mapping,Or.AddMarkStep,Or.RemoveMarkStep,Or.ReplaceStep,Or.ReplaceAroundStep,Or.replaceStep;var Ar=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.create(null),r=function(e,t,n){this.ranges=n||[new i(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},o={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};o.anchor.get=function(){return this.$anchor.pos},o.head.get=function(){return this.$head.pos},o.from.get=function(){return this.$from.pos},o.to.get=function(){return this.$to.pos},o.$from.get=function(){return this.ranges[0].$from},o.$to.get=function(){return this.ranges[0].$to},o.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},r.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},r.prototype.replace=function(e,t){void 0===t&&(t=Er.Slice.empty);for(var n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)n=(r=n).lastChild;for(var i=e.steps.length,a=this.ranges,s=0;s<a.length;s++){var l=a[s],c=l.$from,u=l.$to,p=e.mapping.slice(i);e.replaceRange(p.map(c.pos),p.map(u.pos),s?Er.Slice.empty:t),0==s&&h(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}},r.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],a=i.$from,s=i.$to,l=e.mapping.slice(n),c=l.map(a.pos),u=l.map(s.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),h(e,n,t.isInline?-1:1))}},r.findFrom=function(e,t,n){var r=e.parent.inlineContent?new a(e):d(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;0<=o;o--){var i=t<0?d(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):d(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},r.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new u(e.node(0))},r.atStart=function(e){return d(e,e,0,0,1)||new u(e)},r.atEnd=function(e){return d(e,e,e.content.size,e.childCount,-1)||new u(e)},r.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=n[t.type];if(!r)throw new RangeError("No selection type "+t.type+" defined");return r.fromJSON(e,t)},r.jsonID=function(e,t){if(e in n)throw new RangeError("Duplicate use of selection JSON ID "+e);return(n[e]=t).prototype.jsonID=e,t},r.prototype.getBookmark=function(){return a.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(r.prototype,o),r.prototype.visible=!0;var i=function(e,t){this.$from=e,this.$to=t},a=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={$cursor:{}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=n.resolve(r.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,n){if(void 0===n&&(n=Er.Slice.empty),e.prototype.replace.call(this,t,n),n==Er.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new s(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},t.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=0<=i?1:-1),!r.parent.inlineContent){var a=e.findFrom(r,o,!0)||e.findFrom(r,-o,!0);if(!a)return e.near(r,o);r=a.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-o,!0)||e.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new t(n,r)},Object.defineProperties(t.prototype,n),t}(r);r.jsonID("text",a);var s=function(e,t){this.anchor=e,this.head=t};s.prototype.map=function(e){return new s(e.map(this.anchor),e.map(this.head))},s.prototype.resolve=function(e){return a.between(e.resolve(this.anchor),e.resolve(this.head))};var l=function(e){function t(t){var n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,r),this.node=n}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,a=o.pos,s=n.resolve(a);return i?e.near(s):new t(s)},t.prototype.content=function(){return new Er.Slice(Er.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new c(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(r);l.prototype.visible=!1,r.jsonID("node",l);var c=function(e){this.anchor=e};c.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new s(r,r):new c(r)},c.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&l.isSelectable(n)?new l(t):r.near(t)};var u=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return p},t}(r);r.jsonID("all",u);var p={map:function(){return this},resolve:function(e){return new u(e)}};function d(e,t,n,r,o,i){if(t.inlineContent)return a.create(e,n);for(var s=r-(0<o?0:1);0<o?s<t.childCount:0<=s;s+=o){var c=t.child(s);if(c.isAtom){if(!i&&l.isSelectable(c))return l.create(e,n-(o<0?c.nodeSize:0))}else{var u=d(e,c,n+o,o<0?c.childCount:0,o,i);if(u)return u}n+=c.nodeSize*o}}function h(e,t,n){var o=e.steps.length-1;if(!(o<t)){var i,a=e.steps[o];(a instanceof Or.ReplaceStep||a instanceof Or.ReplaceAroundStep)&&(e.mapping.maps[o].forEach((function(e,t,n,r){null==i&&(i=r)})),e.setSelection(r.near(e.doc.resolve(i),n)))}}var f=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this},n.selectionSet.get=function(){return 0<(1&this.updated)},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return Er.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return 0<(2&this.updated)},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Er.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o))},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return 0<(4&this.updated)},Object.defineProperties(t.prototype,n),t}(Or.Transform);function m(e,t){return t&&e?e.bind(t):e}var v=function(e,t,n){this.name=e,this.init=m(t.init,n),this.apply=m(t.apply,n)},g=[new v("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new v("selection",{init:function(e,t){return e.selection||r.atStart(t.doc)},apply:function(e){return e.selection}}),new v("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new v("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],y=function(e,t){var n=this;this.schema=e,this.fields=g.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),(n.pluginsByKey[e.key]=e).spec.state&&n.fields.push(new v(e.key,e.spec.state,e))}))},b=function(e){this.config=e},w={schema:{},plugins:{},tr:{}};w.schema.get=function(){return this.config.schema},w.plugins.get=function(){return this.config.plugins},b.prototype.apply=function(e){return this.applyTransaction(e).state},b.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},b.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var a=this.config.plugins[i];if(a.spec.appendTransaction){var s=r?r[i].n:0,l=r?r[i].state:this,c=s<t.length&&a.spec.appendTransaction.call(a,s?t.slice(s):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},b.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new b(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<C.length;i++)C[i](this,e,t);return t},w.tr.get=function(){return new f(this)},b.create=function(e){for(var t=new y(e.schema||e.doc.type.schema,e.plugins),n=new b(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},b.prototype.reconfigure=function(e){for(var t=new y(e.schema||this.schema,e.plugins),n=t.fields,r=new b(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},b.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},b.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var o=new y(e.schema,e.plugins),i=new b(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=Er.Node.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=r.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var s=n[a],l=s.spec.state;if(s.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[o.name]=l.fromJSON.call(s,e,t[a],i))}i[o.name]=o.init(e,i)}})),i},b.addApplyListener=function(e){C.push(e)},b.removeApplyListener=function(e){var t=C.indexOf(e);-1<t&&C.splice(t,1)},Object.defineProperties(b.prototype,w);var C=[],k=function(e){this.props={},e.props&&function e(t,n,r){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:x("plugin")};k.prototype.getState=function(e){return e[this.key]};var S=Object.create(null);function x(e){return e in S?e+"$"+ ++S[e]:(S[e]=0,e+"$")}var E=function(e){void 0===e&&(e="key"),this.key=x(e)};E.prototype.get=function(e){return e.config.pluginsByKey[this.key]},E.prototype.getState=function(e){return e[this.key]},t.Selection=r,t.SelectionRange=i,t.TextSelection=a,t.NodeSelection=l,t.AllSelection=u,t.Transaction=f,t.EditorState=b,t.Plugin=k,t.PluginKey=E}));g(Ar),Ar.Selection,Ar.SelectionRange;var Dr=Ar.TextSelection,Tr=(Ar.NodeSelection,Ar.AllSelection,Ar.Transaction,Ar.EditorState),Rr=Ar.Plugin,Nr=Ar.PluginKey,Pr=y((function(e,t){function n(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function r(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;var i=a(r);if(!i){var s=r.blockRange(),l=s&&Or.liftTarget(s);return null!=l&&(t&&t(e.tr.lift(s,l).scrollIntoView()),!0)}var c=i.nodeBefore;if(!c.type.spec.isolating&&v(e,i,t))return!0;if(0!=r.parent.content.size||!o(c,"end")&&!Ar.NodeSelection.isSelectable(c))return!(!c.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos-c.nodeSize,i.pos).scrollIntoView()),!0);if(t){var u=e.tr.deleteRange(r.before(),r.after());u.setSelection(o(c,"end")?Ar.Selection.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Ar.NodeSelection.create(u.doc,i.pos-c.nodeSize)),t(u.scrollIntoView())}return!0}function o(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function i(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):0<r.parentOffset))return!1;var o=a(r),i=o&&o.nodeBefore;return!(!i||!Ar.NodeSelection.isSelectable(i))&&(t&&t(e.tr.setSelection(Ar.NodeSelection.create(e.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)}function a(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){if(0<e.index(t))return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function s(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var i=c(r);if(!i)return!1;var a=i.nodeAfter;if(v(e,i,t))return!0;if(0!=r.parent.content.size||!o(a,"start")&&!Ar.NodeSelection.isSelectable(a))return!(!a.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0);if(t){var s=e.tr.deleteRange(r.before(),r.after());s.setSelection(o(a,"start")?Ar.Selection.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Ar.NodeSelection.create(s.doc,s.mapping.map(i.pos))),t(s.scrollIntoView())}return!0}function l(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=c(r),i=o&&o.nodeAfter;return!(!i||!Ar.NodeSelection.isSelectable(i))&&(t&&t(e.tr.setSelection(Ar.NodeSelection.create(e.doc,o.pos)).scrollIntoView()),!0)}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;0<=t;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function u(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function p(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),a=r.indexAfter(-1),s=i.contentMatchAt(a).defaultType;if(!i.canReplaceWith(a,a,s))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,s.createAndFill());c.setSelection(Ar.Selection.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0}function d(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;if(t){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(a,i.createAndFill());s.setSelection(Ar.TextSelection.create(s.doc,a+1)),t(s.scrollIntoView())}return!0}function h(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(1<n.depth&&n.after()!=n.end(-1)){var r=n.before();if(Or.canSplit(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Or.liftTarget(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}function f(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Ar.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Or.canSplit(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof Ar.TextSelection&&a.deleteSelection();var s=0==r.depth?null:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,l=i&&s?[{type:s}]:null,c=Or.canSplit(a.doc,r.pos,1,l);l||c||!Or.canSplit(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])||(l=[{type:s}],c=!0),c&&(a.split(a.mapping.map(r.pos),1,l),i||r.parentOffset||r.parent.type==s||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),Er.Fragment.from(s.create(),r.parent))||a.setNodeMarkup(a.mapping.map(r.before()),s)),t(a.scrollIntoView())}return!0}function m(e,t){return t&&t(e.tr.setSelection(new Ar.AllSelection(e.doc))),!0}function v(e,t,n){var r,o,i,a,s,l,c,u,p=t.nodeBefore,d=t.nodeAfter;if(p.type.spec.isolating||d.type.spec.isolating)return!1;if(i=e,s=n,l=(a=t).nodeBefore,c=a.nodeAfter,u=a.index(),l&&c&&l.type.compatibleContent(c.type)&&(!l.content.size&&a.parent.canReplace(u-1,u)?(s&&s(i.tr.delete(a.pos-l.nodeSize,a.pos).scrollIntoView()),1):a.parent.canReplace(u,u+1)&&(c.isTextblock||Or.canJoin(i.doc,a.pos))&&(s&&s(i.tr.clearIncompatible(a.pos,l.type,l.contentMatchAt(l.childCount)).join(a.pos).scrollIntoView()),1)))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(r=(o=p.contentMatchAt(p.childCount)).findWrapping(d.type))&&o.matchType(r[0]||d.type).validEnd){if(n){for(var h=t.pos+d.nodeSize,f=Er.Fragment.empty,m=r.length-1;0<=m;m--)f=Er.Fragment.from(r[m].create(null,f));f=Er.Fragment.from(p.copy(f));var v=e.tr.step(new Or.ReplaceAroundStep(t.pos-1,h,t.pos,h,new Er.Slice(f,1,0),r.length,!0)),g=h+2*r.length;Or.canJoin(v.doc,g)&&v.join(g),n(v.scrollIntoView())}return!0}var y=Ar.Selection.findFrom(t,1),b=y&&y.$from.blockRange(y.$to),w=b&&Or.liftTarget(b);return null!=w&&w>=t.depth&&(n&&n(e.tr.lift(b,w).scrollIntoView()),!0)}function g(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}Object.defineProperty(t,"__esModule",{value:!0});var y=g(n,r,i),b=g(n,s,l),w={Enter:g(u,d,h,f),"Mod-Enter":p,Backspace:y,"Mod-Backspace":y,Delete:b,"Mod-Delete":b,"Mod-a":m},C={"Ctrl-h":w.Backspace,"Alt-Backspace":w["Mod-Backspace"],"Ctrl-d":w.Delete,"Ctrl-Alt-Backspace":w["Mod-Delete"],"Alt-Delete":w["Mod-Delete"],"Alt-d":w["Mod-Delete"]};for(var k in w)C[k]=w[k];var S=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?C:w;t.deleteSelection=n,t.joinBackward=r,t.selectNodeBackward=i,t.joinForward=s,t.selectNodeForward=l,t.joinUp=function(e,t){var n,r=e.selection,o=r instanceof Ar.NodeSelection;if(o){if(r.node.isTextblock||!Or.canJoin(e.doc,r.from))return!1;n=r.from}else if(null==(n=Or.joinPoint(e.doc,r.from,-1)))return!1;if(t){var i=e.tr.join(n);o&&i.setSelection(Ar.NodeSelection.create(i.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0},t.joinDown=function(e,t){var n,r=e.selection;if(r instanceof Ar.NodeSelection){if(r.node.isTextblock||!Or.canJoin(e.doc,r.to))return!1;n=r.to}else if(null==(n=Or.joinPoint(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},t.lift=function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.blockRange(o),a=i&&Or.liftTarget(i);return null!=a&&(t&&t(e.tr.lift(i,a).scrollIntoView()),!0)},t.newlineInCode=u,t.exitCode=p,t.createParagraphNear=d,t.liftEmptyBlock=h,t.splitBlock=f,t.splitBlockKeepMarks=function(e,t){return f(e,t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})},t.selectParentNode=function(e,t){var n,r=e.selection,o=r.$from,i=r.to,a=o.sharedDepth(i);return 0!=a&&(n=o.before(a),t&&t(e.tr.setSelection(Ar.NodeSelection.create(e.doc,n))),!0)},t.selectAll=m,t.wrapIn=function(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),l=s&&Or.findWrapping(s,e,t);return!!l&&(r&&r(n.tr.wrap(s,l).scrollIntoView()),!0)}},t.setBlockType=function(e,t){return function(n,r){var o=n.selection,i=o.from,a=o.to,s=!1;return n.doc.nodesBetween(i,a,(function(r,o){if(s)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)s=!0;else{var i=n.doc.resolve(o),a=i.index();s=i.parent.canReplaceWith(a,a+1,e)}})),!!s&&(r&&r(n.tr.setBlockType(i,a,e,t).scrollIntoView()),!0)}},t.toggleMark=function(e,t){return function(n,r){var o=n.selection,i=o.empty,a=o.$cursor,s=o.ranges;if(i&&!a||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,a=o.$to,s=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,a.pos,(function(e){if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,s,e))return!1;if(r)if(a)e.isInSet(n.storedMarks||a.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=n.tr,u=0;!l&&u<s.length;u++){var p=s[u],d=p.$from,h=p.$to;l=n.doc.rangeHasMark(d.pos,h.pos,e)}for(var f=0;f<s.length;f++){var m=s[f],v=m.$from,g=m.$to;l?c.removeMark(v.pos,g.pos,e):c.addMark(v.pos,g.pos,e.create(t))}r(c.scrollIntoView())}return!0}},t.autoJoin=function(e,t){if(Array.isArray(t)){var n=t;t=function(e){return-1<n.indexOf(e.type.name)}}return function(n,r){return e(n,r&&(o=r,i=t,function(e){if(!e.isGeneric)return o(e);for(var t=[],n=0;n<e.mapping.maps.length;n++){for(var r=e.mapping.maps[n],a=0;a<t.length;a++)t[a]=r.map(t[a]);r.forEach((function(e,n,r,o){return t.push(r,o)}))}for(var s=[],l=0;l<t.length;l+=2)for(var c=t[l],u=t[l+1],p=e.doc.resolve(c),d=p.sharedDepth(u),h=p.node(d),f=p.indexAfter(d),m=p.after(d+1);m<=u;++f){var v=h.maybeChild(f);if(!v)break;if(f&&-1==s.indexOf(m)){var g=h.child(f-1);g.type==v.type&&i(g,v)&&s.push(m)}m+=v.nodeSize}s.sort((function(e,t){return e-t}));for(var y=s.length-1;0<=y;y--)Or.canJoin(e.doc,s[y])&&e.join(s[y]);o(e)}));var o,i}},t.chainCommands=g,t.pcBaseKeymap=w,t.macBaseKeymap=C,t.baseKeymap=S}));g(Pr),Pr.deleteSelection,Pr.joinBackward,Pr.selectNodeBackward,Pr.joinForward,Pr.selectNodeForward,Pr.joinUp,Pr.joinDown,Pr.lift,Pr.newlineInCode,Pr.exitCode,Pr.createParagraphNear,Pr.liftEmptyBlock,Pr.splitBlock,Pr.splitBlockKeepMarks,Pr.selectParentNode,Pr.selectAll,Pr.wrapIn;var Fr=Pr.setBlockType,Ir=Pr.toggleMark,Lr=(Pr.autoJoin,Pr.chainCommands,Pr.pcBaseKeymap,Pr.macBaseKeymap,Pr.baseKeymap),Br=function(e,t){return function(n,r){var o=n.schema.nodes[e];return Fr(o,t)(n,r)}},zr={"mod-alt-0":function(e,t){return Br("paragraph")(e,t)},"mod-alt-1":function(e,t){return Br("heading",{level:1})(e,t)},"mod-alt-2":function(e,t){return Br("heading",{level:2})(e,t)},"mod-alt-3":function(e,t){return Br("heading",{level:3})(e,t)},"mod-alt-4":function(e,t){return Br("heading",{level:4})(e,t)},"mod-alt-5":function(e,t){return Br("heading",{level:5})(e,t)},"mod-alt-6":function(e,t){return Br("heading",{level:6})(e,t)}},_r={p:{key:"mod-alt-0",label:"Paragraph"},h1:{key:"mod-alt-1",label:"Heading1"},h2:{key:"mod-alt-2",label:"Heading2"},h3:{key:"mod-alt-3",label:"Heading3"},h4:{key:"mod-alt-4",label:"Heading4"},h5:{key:"mod-alt-5",label:"Heading5"},h6:{key:"mod-alt-6",label:"Heading6"}},Vr=new Nr("block"),$r=function(e){var t,n=!1,r=e.doc,o=e.selection,i=o.$from,a=o.$to,s=(i.depth<a.depth?i.depth:a.depth)-1;return r.nodesBetween(i.pos,a.pos,(function(r,o){var i=e.doc.resolve(o).depth;if(r.isBlock&&!(i<s)){var a=r.type.name,l=r.attrs;t?(a!==t.type||"heading"===t.type&&l.level!==t.attrs.level)&&(n=!0):t={type:a,attrs:l}}})),n?void 0:t},Wr=new Rr({key:Vr,state:{init:function(e,t){return{selectedBlock:$r(t)}},apply:function(e,t,n,r){return e.docChanged||n.selection!==r.selection?{selectedBlock:$r(r)}:t}}}),jr=function(){var e=navigator.userAgent,t=[{s:"Windows",r:/Win16/},{s:"Windows",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows",r:/(Windows 98|Win98)/},{s:"Windows",r:/Windows CE/},{s:"Windows",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows",r:/Windows NT 5.2/},{s:"Windows",r:/Windows NT 6.0/},{s:"Windows",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/}];for(var n in t){var r=t[n];if(r.r.test(e))return r.s}},Hr=function(e){var t="\u2318";"Windows"===jr()&&(t="^");var n="";return e.label&&(n="".concat(e.label," ")),(n=(n=(n+=e.key).replace("mod",t)).replace("shift","\u21e7")).replace("alt","\u2325")},Kr=[{value:{blockType:"paragraph",tag:"p",keymap:Hr({key:_r.p.key})},label:"Normal"},{value:{blockType:"heading-1",tag:"h1",keymap:Hr({key:_r.h1.key})},label:"Heading 1"},{value:{blockType:"heading-2",tag:"h2",keymap:Hr({key:_r.h2.key})},label:"Heading 2"},{value:{blockType:"heading-3",tag:"h3",keymap:Hr({key:_r.h3.key})},label:"Heading 3"},{value:{blockType:"heading-4",tag:"h4",keymap:Hr({key:_r.h4.key})},label:"Heading 4"},{value:{blockType:"heading-5",tag:"h5",keymap:Hr({key:_r.h5.key})},label:"Heading 5"},{value:{blockType:"heading-6",tag:"h6",keymap:Hr({key:_r.h6.key})},label:"Heading 6"}],Ur=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){n.props.onChange(e.value.blockType)},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e,t=this.props,n=t.options,o=t.selectedBlockType;return e=o?n.find((function(e){return e.value.blockType===o})):{value:void 0,label:"Other"},r.createElement(pr,{onChange:this.handleChange,options:n,selectedOption:e})}}]),t}(),qr=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){n.props.onChange(e.currentTarget.name)},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var t=this,n=this.props,o=n.options,i=n.selectedBlockType;return r.createElement(r.Fragment,null,o.map((function(n,a){var s=nt[n.value.tag.toUpperCase()];return r.createElement(e.Fragment,{key:"block-btn-".concat(n.value.tag)},r.createElement(Ye,{name:n.value.blockType,onClick:t.handleChange,selected:n.value.tag===i,title:Hr(_r[n.value.tag])},r.createElement(s,null)),a<o.length-1&&r.createElement(dr,{type:"toolbar"}))})))}}]),t}(),Jr={name:"block",KeymapInfo:_r,keymaps:zr,toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).changeBlockType=function(e){var t,r;r="paragraph"===e?e:(t={level:e.split("-")[1]},"heading");var o=n.props.app_params.view,i=(o=void 0===o?{}:o).state,a=o.dispatch,s=i.schema.nodes[r];Fr(s,t)(i,a)},n.getSelectedBlock=function(){var e=n.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var r=Vr.getState(t),o=r&&r.selectedBlock;if(o){var i=o.type,a=o.attrs;return a&&a.level?"".concat(i,"-").concat(a.level):i}}},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e=this.props.config,t=(e=void 0===e?{}:e).grouped,n=e.options,o=Kr;return n&&(o=Kr.filter((function(e){return 0<=n.indexOf(e.value.tag)}))),t?r.createElement(Ur,{onChange:this.changeBlockType,selectedBlockType:this.getSelectedBlock(),options:o}):r.createElement(qr,{onChange:this.changeBlockType,selectedBlockType:this.getSelectedBlock(),options:o})}}]),t}(),plugin:Wr,schema:{nodes:["heading"]}},Gr=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),o=/MSIE \d/.test(navigator.userAgent),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);var a=n.ie=!!(o||i||r);n.ie_version=o?document.documentMode||6:i?+i[1]:r?+r[1]:null,n.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var s=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!s,n.chrome_version=s&&+s[1],n.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit=!a&&"WebkitAppearance"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},c=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},u=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},p=function(e,t,n,r){return n&&(h(e,t,n,r,-1)||h(e,t,n,r,1))},d=/^(img|br|input|textarea|hr)$/i;function h(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:f(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||(a=e.pmViewDesc)&&a.node&&a.node.isBlock||d.test(e.nodeName)||"false"==e.contentEditable)return!1;t=l(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(o<0?-1:0)],t=o<0?f(e):0}}var a}function f(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var m=function(e){var t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function v(e,t){return"number"==typeof e?e:e[t]}function g(e,t,n){for(var r,o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=a.defaultView,l=n||e.dom;l;l=c(l))if(1==l.nodeType){var u=l==a.body||1!=l.nodeType,p=u?{left:0,right:(r=s).innerWidth,top:0,bottom:r.innerHeight}:l.getBoundingClientRect(),d=0,h=0;if(t.top<p.top+v(o,"top")?h=-(p.top-t.top+v(i,"top")):t.bottom>p.bottom-v(o,"bottom")&&(h=t.bottom-p.bottom+v(i,"bottom")),t.left<p.left+v(o,"left")?d=-(p.left-t.left+v(i,"left")):t.right>p.right-v(o,"right")&&(d=t.right-p.right+v(i,"right")),(d||h)&&(u?s.scrollBy(d,h):(h&&(l.scrollTop+=h),d&&(l.scrollLeft+=d))),u)break}}function y(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var p=void 0;if(1==l.nodeType)p=l.getClientRects();else{if(3!=l.nodeType)continue;p=u(l).getClientRects()}for(var d=0;d<p.length;d++){var h=p[d];if(h.top<=a&&h.bottom>=s){a=Math.max(h.bottom,a),s=Math.min(h.top,s);var f=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(f<o){n=l,r=(o=f)&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==l.nodeType&&f&&(i=c+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=w(r,1);if(i.top!=i.bottom&&i.left-1<=t.left&&i.right+1>=t.left&&i.top-1<=t.top&&i.bottom+1>=t.top)return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:y(n,r)}function b(e,t){var n,r,o=e.root;if(o.caretPositionFromPoint){var i,a=o.caretPositionFromPoint(t.left,t.top);a&&(n=(i=a).offsetNode,r=i.offset)}if(!n&&o.caretRangeFromPoint){var s,l=o.caretRangeFromPoint(t.left,t.top);l&&(n=(s=l).startContainer,r=s.startOffset)}var c,u,p,d,h=o.elementFromPoint(t.left,t.top+1);if(!h)return null;if(p=t,h=(d=(u=h).parentNode)&&/^li$/i.test(d.nodeName)&&p.left<u.getBoundingClientRect().left?d:u,n&&(n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return-1<o?o:e.docView.posFromDOM(t,n)}(e,n,r,t))),null==c&&null==(c=function(e,t,n){if(!e.dom.contains(1!=t.nodeType?t.parentNode:t))return null;var r=y(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,h,t)))return null;var f=e.docView.nearestDesc(h,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function w(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function C(e,t){var n,r,o=e.docView.domFromPos(t),i=o.node,a=o.offset;if(3==i.nodeType)a<i.nodeValue.length&&(r=w(u(i,a,a+1),-1),n="left"),r&&r.left!=r.right||!a||(r=w(u(i,a-1,a),1),n="right");else if(i.firstChild){if(a<i.childNodes.length){var s=i.childNodes[a];r=w(3==s.nodeType?u(s):s,-1),n="left"}if((!r||r.top==r.bottom)&&a){var l=i.childNodes[a-1];r=w(3==l.nodeType?u(l):l,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var c=r[n];return{top:r.top,bottom:r.bottom,left:c,right:c}}function k(e,t,n){var r=e.state,o=e.root.activeElement;r==t&&e.inDOMChange||e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o.focus()}}var S=/[\u0590-\u08ac]/,x=null,E=null,M=!1;function O(e,t,n){return x==t&&E==n?M:(x=t,M="up"==(E=n)||"down"==n?(r=e,i=n,a=(o=t).selection,!!(s="up"==i?a.$anchor.min(a.$head):a.$anchor.max(a.$head)).depth&&k(r,o,(function(){for(var e=r.docView.domFromPos(s.pos).node;;){var t=r.docView.nearestDesc(e,!0);if(!t||t.node.isBlock)break;e=t.dom.parentNode}for(var n=C(r,s.pos),o=e.firstChild;o;o=o.nextSibling){var a=void 0;if(1==o.nodeType)a=o.getClientRects();else{if(3!=o.nodeType)continue;a=u(o,0,o.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==i?c.bottom<n.top+1:c.top>n.bottom-1))return!1}}return!0}))):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock||!r.depth)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=getSelection();return S.test(r.parent.textContent)&&s.modify?k(e,t,(function(){var t=s.getRangeAt(0),o=s.focusNode,i=s.focusOffset;s.modify("move",n,"character");var a=!e.docView.domAfterPos(r.before()).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||o==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(t),a})):"left"==n||"backward"==n?i:a}(e,t,n));var r,o,i,a,s}var A=function(e,t,n,r){this.parent=e,this.children=t,((this.dom=n).pmViewDesc=this).contentDOM=r,this.dirty=0},D={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};A.prototype.matchesWidget=function(){return!1},A.prototype.matchesMark=function(){return!1},A.prototype.matchesNode=function(){return!1},A.prototype.matchesHack=function(){return!1},D.beforePosition.get=function(){return!1},A.prototype.parseRule=function(){return null},A.prototype.stopEvent=function(){return!1},D.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},D.border.get=function(){return 0},A.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},A.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},D.posBefore.get=function(){return this.parent.posBeforeChild(this)},D.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},D.posAfter.get=function(){return this.posBefore+this.size},D.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},A.prototype.localPosFromDOM=function(e,t,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&(!(s=a.pmViewDesc)||s.parent!=this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){r=!1;break}if(l.parentNode.firstChild!=l)break}if(null==r&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){r=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==r?0<n:r)?this.posAtEnd:this.posAtStart},A.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(e):o.nodeDOM==e))return o;n=!1}}},A.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},A.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}},A.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},A.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},A.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==r&&e<=c){var u=i+s.border;if(u<=e&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e-u,t-u,n+u);e=n+i;for(var p=a;0<p;p--){var d=this.children[p-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=l(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(-1<r&&t<=c){t=n+c;for(var h=a+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=l(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},A.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},A.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},A.prototype.setSelection=function(e,t,n){for(var r=Math.min(e,t),o=Math.max(e,t),i=0,a=0;i<this.children.length;i++){var s=this.children[i],l=a+s.size;if(a<r&&o<l)return s.setSelection(e-a-s.border,t-a-s.border,n);a=l}var c=this.domFromPos(e),u=this.domFromPos(t),d=n.getSelection(),h=document.createRange();if(!p(c.node,c.offset,d.anchorNode,d.anchorOffset)||!p(u.node,u.offset,d.focusNode,d.focusOffset)){if(d.extend)h.setEnd(c.node,c.offset),h.collapse(!1);else{if(t<e){var f=c;c=u,u=f}h.setEnd(u.node,u.offset),h.setStart(c.node,c.offset)}d.removeAllRanges(),d.addRange(h),d.extend&&d.extend(u.node,u.offset)}},A.prototype.ignoreMutation=function(e){return!this.contentDOM},D.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},A.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&n<=t:e<i&&n<t){var a=n+o.border,s=i-o.border;if(a<=e&&t<=s)return this.dirty=e==n||t==i?2:1,void(e==a&&t==s&&o.contentLost?o.dirty=3:o.markDirty(e-a,t-a));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(A.prototype,D);var T=[],R=function(e){function t(t,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,T,a,null),this.widget=n,i=this}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(A),N=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){for(var t,n=this.dom.firstChild;n;n=n.nextSibling){var r=void 0;if(3==n.nodeType){var o=n.nodeValue.replace(/\ufeff/g,"");if(!o)continue;r=document.createTextNode(o)}else{if("\ufeff"==n.textContent)continue;r=n.cloneNode(!0)}t||(t=document.createDocumentFragment()),t.appendChild(r)}return t?{skip:t}:e.prototype.parseRule.call(this)},t.prototype.ignoreMutation=function(){return!1},t}(R),P=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).create=function(e,n,r,o){var i=Y(o)[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Er.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t}(A),F=function(e){function t(t,n,r,o,i,a,s,l,c){e.call(this,t,n.isLeaf?T:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(l,c)}e&&(t.__proto__=e);var r={size:{},border:{}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).create=function(e,n,r,o,i,a){var s,l=Y(i)[n.type.name],c=l&&l(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r),u=c&&c.dom,p=c&&c.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else if(!u){var d;u=(d=Er.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,p=d.contentDOM}p||n.isText||"BR"==u.nodeName||(u.contentEditable=!1,n.type.spec.draggable&&(u.draggable=!0));var h=u;return u=H(u,r,n),c?s=new z(e,n,r,o,u,p,h,c,i):n.isText?new L(e,n,r,o,u,h,i):new t(e,n,r,o,u,p,h,i,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Er.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&K(t,this.outerDeco)&&n.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=new G(this),o=this.node.inlineContent;!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],l=null,c=0;;){if(a<o.length&&o[a].to==i){for(var u=o[a++],p=void 0;a<o.length&&o[a].to==i;)(p||(p=[u])).push(o[a++]);if(p){p.sort(X);for(var d=0;d<p.length;d++)n(p[d],c)}else n(u,c)}var h=void 0;if(l)h=l,l=null;else{if(!(c<e.childCount))break;h=e.child(c++)}for(var f=0;f<s.length;f++)s[f].to<=i&&s.splice(f--,1);for(;a<o.length&&o[a].from==i;)s.push(o[a++]);var m=i+h.nodeSize;if(h.isText){var v=m;a<o.length&&o[a].from<v&&(v=o[a].from);for(var g=0;g<s.length;g++)s[g].to<v&&(v=s[g].to);v<m&&(l=h.cut(v-i),h=h.cut(0,v-i),m=v)}r(h,s.length?s.slice():T,t.forChild(i,h),c-1),i=m}else for(var y=0;y<e.childCount;y++){var b=e.child(y);r(b,o,t.forChild(i,b),y),i+=b.nodeSize}}(this.node,this.innerDeco,(function(i,a){i.spec.marks?r.syncToMarks(i.spec.marks,o,e):0<=i.type.side&&r.syncToMarks(a==n.node.childCount?Er.Mark.none:n.node.child(a).marks,o,e),r.placeWidget(i,e,t)}),(function(n,i,a,s){r.syncToMarks(n.marks,o,e),r.findNodeMatch(n,i,a,s)||r.updateNextNode(n,i,a,e,s)||r.addNode(n,i,a,e,t),t+=n.nodeSize})),r.syncToMarks(T,o,e),this.node.isTextblock&&r.addTextblockHacks(),r.destroyRest(),(r.changed||2==this.dirty)&&this.renderChildren()},t.prototype.renderChildren=function(){!function e(t,n){for(var r=t.firstChild,o=0;o<n.length;o++){var i=n[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=U(r);r=r.nextSibling}else t.insertBefore(a,r);if(i instanceof P){var s=r?r.previousSibling:t.lastChild;e(i.contentDOM,i.children),r=s?s.nextSibling:t.firstChild}}for(;r;)r=U(r)}(this.contentDOM,this.children),n.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!K(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=W(this.dom,this.nodeDOM,$(this.outerDeco,this.node,t),$(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode")},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode")},Object.defineProperties(t.prototype,r),t}(A);function I(e,t,n,r,o){return H(r,t,e),new F(null,e,t,n,r,r,r,o,0)}var L=function(e){function t(t,n,r,o,i,a,s){e.call(this,t,n,r,o,i,null,a,s)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,!(this.dirty=0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type},t}(F),B=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(A),z=function(e){function t(t,n,r,o,i,a,s,l,c){e.call(this,t,n,r,o,i,a,s,c),this.spec=l}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(F);function _(e){e&&(this.nodeName=e)}_.prototype=Object.create(null);var V=[new _];function $(e,t,n){if(0==e.length)return V;for(var r=n?V[0]:new _,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs,s=r;if(a)for(var l in a.nodeName&&o.push(s=new _(a.nodeName)),a){var c=a[l];null!=c&&(n&&1==o.length&&o.push(s=r=new _(t.isInline?"span":"div")),"class"==l?s.class=(s.class?s.class+" ":"")+c:"style"==l?s.style=(s.style?s.style+";":"")+c:"nodeName"!=l&&(s[l]=c))}}return o}function W(e,t,n,r){if(n==V&&r==V)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName)).appendChild(o),o=l}j(o,s||V[0],a)}return o}function j(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):T,a=n.class?n.class.split(" "):T,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function H(e,t,n){return W(e,e,V,$(t,n,1!=e.nodeType))}function K(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function U(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var q,J,G=function(e){this.top=e,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;0<r&&0<=o;o--){var i=t[o],a=i.node;if(a){if(a!=e.child(r-1))break;n[--r]=i}}return n}(e.node.content,e.children)};function X(e,t){return e.type.side-t.type.side}function Y(e){return J==e._props?q:(J=e._props,t={},e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),q=t);var t}function Z(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=0<t?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(0<t?i.after():i.before()):null:i;return a&&Ar.Selection.findFrom(a,t)}function Q(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ee(e,t){var n=e.state.selection;if(n instanceof Ar.TextSelection){if(n.empty){if(e.endOfTextblock(0<t?"right":"left")){var r=Z(e.state,t);return!!(r&&r instanceof Ar.NodeSelection)&&Q(e,r)}var o,i=n.$head,a=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(a&&Ar.NodeSelection.isSelectable(a)){var s=t<0?i.pos-a.nodeSize:i.pos;if(a.isAtom||(o=e.docView.descAt(s))&&!o.contentDOM)return Q(e,new Ar.NodeSelection(t<0?e.state.doc.resolve(i.pos-a.nodeSize):i))}return!1}return!1}if(n instanceof Ar.NodeSelection&&n.node.isInline)return Q(e,new Ar.TextSelection(0<t?n.$to:n.$from));var l=Z(e.state,t);return!!l&&Q(e,l)}function te(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ne(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function re(e){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r){var i,a,s=!1;for(n.gecko&&1==r.nodeType&&o<te(r)&&ne(r.childNodes[o])&&(s=!0);;)if(0<o)if(1!=r.nodeType){if(3!=r.nodeType||"\ufeff"!=r.nodeValue.charAt(o-1))break;n.ie&&n.ie_version<=11&&(s=!0),i=r,a=--o}else{var c=r.childNodes[o-1];if(ne(c))i=r,a=--o;else{if(3!=c.nodeType)break;o=(r=c).nodeValue.length}}else{if(ie(r))break;for(var u=r.previousSibling;u&&ne(u);)i=r.parentNode,a=l(u),u=u.previousSibling;if(u)o=te(r=u);else{if((r=r.parentNode)==e.dom)break;o=0}}s?ae(e,t,r,o):i&&ae(e,t,i,a)}}function oe(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=te(n);;)if(r<a){if(1!=n.nodeType)break;if(!ne(n.childNodes[r]))break;o=n,i=++r}else{if(ie(n))break;for(var s=n.nextSibling;s&&ne(s);)o=s.parentNode,i=l(s)+1,s=s.nextSibling;if(s)r=0,a=te(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&ae(e,t,o,i)}}function ie(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ae(e,t,n,r){if(m(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.selectionReader.storeDOMState(e.selection)}function se(e,t){var n=e.state.selection;if(n instanceof Ar.TextSelection&&!n.empty)return!1;var r=n.$from,o=n.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var i=Z(e.state,t);if(i&&i instanceof Ar.NodeSelection)return Q(e,i)}if(r.parent.inlineContent)return!1;var a=Ar.Selection.findFrom(t<0?r:o,t);return!a||Q(e,a)}function le(e,t){if(!(e.state.selection instanceof Ar.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(!a||a.isText)return!1;var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}G.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},G.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},G.prototype.syncToMarks=function(e,t,n){for(var r,o=this,i=0,a=this.stack.length>>1,s=Math.min(a,e.length);i<s&&(i==a-1?this.top:this.stack[i+1<<1]).matchesMark(e[i]);)i++;for(;i<a;)o.destroyRest(),o.top.dirty=0,o.index=o.stack.pop(),o.top=o.stack.pop(),a--;for(;a<e.length;){if(o.stack.push(o.top,o.index+1),o.index<o.top.children.length&&(r=o.top.children[o.index]).matchesMark(e[a]))o.top=r;else{var l=P.create(o.top,e[a],t,n);o.top.children.splice(o.index,0,l),o.top=l,o.changed=!0}o.index=0,a++}},G.prototype.findNodeMatch=function(e,t,n,r){for(var o=this.index,i=this.top.children,a=Math.min(i.length,o+5);o<a;o++){var s=i[o],l=void 0;if(s.matchesNode(e,t,n)&&(-1==(l=this.preMatched.indexOf(s))||l==r))return this.destroyBetween(this.index,o),this.index++,!0}return!1},G.prototype.updateNextNode=function(e,t,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof F){var a=this.preMatched.indexOf(i);if(-1<a&&a!=o)return!1;var s=i.dom;if(i.update(e,t,n,r))return i.dom!=s&&(this.changed=!0),this.index++,!0}return!1},G.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,F.create(this.top,e,t,n,r,o)),this.changed=!0},G.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new(e.spec.isCursorWrapper?N:R)(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},G.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof P;)e=e.children[e.children.length-1];if(!e||!(e instanceof L)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new B(this.top,T,t,null)),this.changed=!0}};var ce=function(e,t,n){this.prev=e,this.mapping=t,this.state=n},ue=function(e){this.seen=[new ce(null,null,e)],Ar.EditorState.addApplyListener(this.track=this.track.bind(this))};ue.prototype.destroy=function(){Ar.EditorState.removeApplyListener(this.track)},ue.prototype.find=function(e){for(var t=this.seen.length-1;0<=t;t--){var n=this.seen[t];if(n.state==e)return n}},ue.prototype.track=function(e,t,n){var r=this.seen.length<200?this.find(e):null;r&&this.seen.push(new ce(r,t.docChanged?t.mapping:null,n))},ue.prototype.getMapping=function(e,t){var n=this.find(e);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var i=t||new Or.Mapping,a=r.length-1;0<=a;a--)i.appendMapping(r[a]);return i};var pe=function(e){var t=this;this.view=e,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=e.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?de:he)(this),this.focusFunc=function(){return t.poller.start(be(t.view))}.bind(this),this.blurFunc=this.poller.stop,e.dom.addEventListener("focus",this.focusFunc),e.dom.addEventListener("blur",this.blurFunc),e.editable||this.poller.start(!1)};pe.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},pe.prototype.poll=function(e){this.poller.poll(e)},pe.prototype.editableChanged=function(){this.view.editable?be(this.view)||this.poller.stop():this.poller.start()},pe.prototype.domChanged=function(){var e=this.view.root.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset},pe.prototype.storeDOMState=function(e){var t=this.view.root.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastHeadNode=t.focusNode,this.lastHeadOffset=t.focusOffset,this.lastSelection=e},pe.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},pe.prototype.readFromDOM=function(e){if(!this.ignoreUpdates&&this.domChanged()&&be(this.view)){if(this.suppressUpdates)return fe(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var t,n,r=this.view.root.getSelection(),o=this.view.state.doc,i=this.view.docView.nearestDesc(r.focusNode),a=i&&0==i.size,s=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(s);if(m(r)){for(t=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Ar.NodeSelection.isSelectable(i.node)&&i.parent){var c=i.posBefore;n=new Ar.NodeSelection(s==c?l:o.resolve(c))}}else t=o.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var u="pointer"==e||this.view.state.selection.head<l.pos&&!a?1:-1;n=ye(this.view,t,l,u)}if(this.view.state.selection.eq(n))fe(this.view);else{var p=this.view.state.tr.setSelection(n);"pointer"==e?p.setMeta("pointer",!0):"key"==e&&p.scrollIntoView(),this.view.dispatch(p)}}}};var de=function(e){var t=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=e,this.readFunc=function(){return e.readFromDOM(t.originTime>Date.now()-50?t.curOrigin:null)}};de.prototype.poll=function(e){this.curOrigin=e,this.originTime=Date.now()},de.prototype.start=function(e){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,e&&this.readFunc())},de.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var he=function(e){this.polling=null,this.reader=e,this.pollFunc=this.doPoll.bind(this,null)};function fe(e,t){var r=e.state.selection;if(function(e,t){if(t instanceof Ar.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ge(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ge(e)}(e,r),e.editable&&!e.hasFocus()){if(!t)return;n.gecko&&n.gecko_version<=55&&(e.selectionReader.ignoreUpdates=!0,e.dom.focus(),e.selectionReader.ignoreUpdates=!1)}else if(!e.editable&&!we(e)&&!t)return;var o=e.selectionReader;if(!o.lastSelection||!o.lastSelection.eq(r)||o.domChanged()){if(o.ignoreUpdates=!0,e.cursorWrapper)u=(c=e).root.getSelection(),p=document.createRange(),d=c.cursorWrapper.dom,p.setEnd(d,d.childNodes.length),p.collapse(!1),u.removeAllRanges(),u.addRange(p),!c.state.selection.visible&&n.ie&&n.ie_version<=11&&(d.disabled=!0,d.disabled=!1);else{var i,a,s=r.anchor,l=r.head;!me||r instanceof Ar.TextSelection||(r.$from.parent.inlineContent||(i=ve(e,r.from)),r.empty||r.$from.parent.inlineContent||(a=ve(e,r.to))),e.docView.setSelection(s,l,e.root),me&&(i&&(i.contentEditable="false"),a&&(a.contentEditable="false")),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):s!=l&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}var c,u,p,d;o.storeDOMState(r),o.ignoreUpdates=!1}}he.prototype.doPoll=function(e){var t=this.reader.view;t.focused||!t.editable?(this.reader.readFromDOM(e),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},he.prototype.poll=function(e){clearTimeout(this.polling),this.polling=setTimeout(e?this.doPoll.bind(this,e):this.pollFunc,0)},he.prototype.start=function(){null==this.polling&&this.poll()},he.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var me=n.safari||n.chrome&&n.chrome_version<63;function ve(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return i.contentEditable="true",i;if(a)return a.contentEditable="true",a}}function ge(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ye(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Ar.TextSelection.between(t,n,r)}function be(e){return(!e.editable||e.root.activeElement==e.dom)&&we(e)}function we(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ce(e){return!1===e.type.spec.inclusive}function ke(e){var t=e.selection,n=t.$head,r=t.$anchor,o=t.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Ce))?i:null}var Se=function e(t,n){var r=this;this.view=t,this.state=t.state,this.composing=n,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout((function(){return r.finish()}),e.commitTimeout),this.trackMappings=new ue(t.state),this.mapping=new Or.Mapping,this.mappingTo=t.state};function xe(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(n)+1<e.node(n).childCount)return!1;return e.parentOffset==e.parent.content.size}function Ee(e,t){for(var n=t||0;n<e.depth;n++)if(0<e.index(0))return!1;return 0==e.parentOffset}function Me(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Oe(e,t,n,r){return Math.max(r.anchor,r.head)>t.content.size?null:ye(e,t.resolve(n.map(r.anchor)),t.resolve(n.map(r.head)))}function Ae(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function De(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;1<o&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||Er.DOMSerializer.fromSchema(e.state.schema),l=document.createElement("div");l.appendChild(s.serializeFragment(r));for(var c,u=l.firstChild;u&&1==u.nodeType&&(c=Ne[u.nodeName.toLowerCase()]);){for(var p=c.length-1;0<=p;p--){for(var d=document.createElement(c[p]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Te(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t)})),s)return new Er.Slice(Er.Fragment.from(e.state.schema.text(t)),0,0);var c=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));c?a=c:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){return n=e(n)})),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Pe||(Pe=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Ne[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length),r.innerHTML=e;for(var a=0;a<i;a++)r=r.firstChild;return r}(n);var u=i&&i.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||Er.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(i,{preserveWhitespace:!(!l&&!p),context:o})}return a=p?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;0<=s;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=Er.Fragment.from(l.create(n[s+1],o)),i++,a++}return new Er.Slice(o,i,a)}(new Er.Slice(a.content,Math.min(a.openStart,+p[1]),Math.min(a.openEnd,+p[2])),p[3]):Er.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(Er.Fragment.from(Re(r,t,i+1))))}}(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(Er.Fragment.empty,!0);return t.copy(r.append(o))}(i[i.length-1],o.length));var a=Re(e,n);i.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),i)return{v:Er.Fragment.from(i)}},r=t.depth;0<=r;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Re(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;n<=r;r--)e=t[r].create(null,Er.Fragment.from(e));return e}Se.prototype.addRange=function(e,t){null==this.from?(this.from=e,this.to=t):(this.from=Math.min(e,this.from),this.to=Math.max(t,this.to))},Se.prototype.changedRange=function(){if(null==this.from)return function(e){var t=e.$anchor.min(e.$head),n=e.$anchor.max(e.$head);if(t.sameParent(n)&&t.parent.inlineContent&&t.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,t.parentOffset),o=t.parent.content.size,i=Math.min(o,n.parentOffset);if(0<r&&(r=t.parent.childBefore(r).offset),i<o){var a=t.parent.childAfter(i);i=a.offset+a.node.nodeSize}var s=t.start();return{from:s+r,to:s+i}}for(var l=0;;l++){var c=Ee(t,l+1),u=xe(n,l+1);if(c||u||t.index(l)!=n.index(l)||n.node(l).isTextblock){var p=t.before(l+1),d=n.after(l+1);return c&&0<t.index(l)&&(p-=t.node(l).child(t.index(l)-1).nodeSize),u&&n.index(l)+1<n.node(l).childCount&&(d+=n.node(l).child(n.index(l)+1).nodeSize),{from:p,to:d}}}}(this.state.selection);var e=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),t=this.state.doc.resolve(this.to),n=e.sharedDepth(this.to);return{from:e.before(n+1),to:t.after(n+1)}},Se.prototype.markDirty=function(e){null==this.from?this.view.docView.markDirty((e=e||this.changedRange()).from,e.to):this.view.docView.markDirty(this.from,this.to)},Se.prototype.stateUpdated=function(e){return this.trackMappings.getMapping(e,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new ue(e),this.mappingTo=e,!0):(this.markDirty(),this.destroy(),!1)},Se.prototype.finish=function(e){if(clearTimeout(this.timeout),!this.composing||e){this.view.domObserver.flush();var t=this.changedRange();this.markDirty(t),this.destroy();var r=this.state.selection,o=this.typeOver&&r instanceof Ar.TextSelection&&!r.empty&&r.$head.sameParent(r.$anchor);!function(e,t,r,o,i){var a,s,l=function(e,t,r){var o=e.docView.parseRange(r.from,r.to),i=o.node,a=o.fromOffset,s=o.toOffset,l=o.from,c=o.to,u=e.root.getSelection(),p=null,d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(p=[{node:d,offset:u.anchorOffset}],m(u)||p.push({node:u.focusNode,offset:u.focusOffset})),n.chrome&&8===e.lastKeyCode)for(var h=s;a<h;h--){var f=i.childNodes[h-1],v=f.pmViewDesc;if("BR"==f.nodeType&&!v){s=h;break}if(!v||v.size)break}var g,y,b=t.doc,w=e.someProp("domParser")||Er.DOMParser.fromSchema(e.state.schema),C=b.resolve(l),k=null,S=w.parse(i,{topNode:C.parent,topMatch:C.parent.contentMatchAt(C.index()),topOpen:!0,from:a,to:s,preserveWhitespace:!C.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:(g=w,y=C,function(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(n.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName))return g.matchTag(document.createElement("li"),y);if(e.parentNode.lastChild==e)return{ignore:!0}}}),context:C});if(p&&null!=p[0].pos){var x=p[0].pos,E=p[1]&&p[1].pos;null==E&&(E=x),k={anchor:x+l,head:E+l}}return{doc:S,sel:k,from:l,to:c}}(e,r,o),c=r.doc,u=c.slice(l.from,l.to);s=8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(a=r.selection.to,"end"):(a=r.selection.from,"start"),e.lastKeyCode=null;var p=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;return"end"==o&&(r-=s+Math.max(0,i-Math.min(s,l))-i),s<i&&e.size<t.size?(l=(i-=r<=i&&s<=r?i-r:0)+(l-s),s=i):l<i&&(s=(i-=r<=i&&l<=r?i-r:0)+(s-l),l=i),{start:i,endA:s,endB:l}}(u.content,l.doc.content,l.from,a,s);if(p){var d,h=l.doc.resolveNoCache(p.start-l.from),f=l.doc.resolveNoCache(p.endB-l.from);if(!(!h.sameParent(f)&&h.pos<l.doc.content.size&&(d=Ar.Selection.findFrom(l.doc.resolve(h.pos+1),1,!0))&&d.head==f.pos&&e.someProp("handleKeyDown",(function(t){return t(e,Me(13,"Enter"))})))){if(r.selection.anchor>p.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Ae(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Ae(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||Ae(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(c,p.start,p.endA,h,f)&&e.someProp("handleKeyDown",(function(t){return t(e,Me(8,"Backspace"))})))return n.android&&n.chrome&&(e.selectionReader.suppressUpdates=!0,setTimeout((function(){return e.selectionReader.suppressUpdates=!1}),50));var v,g,y,b,w=t.map(p.start),C=t.map(p.endA,-1);if(h.sameParent(f)&&h.parent.inlineContent)if(h.pos==f.pos)v=e.state.tr.delete(w,C),g=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(b=c.resolve(p.start))&&(y=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],d=0;d<t.childCount;d++)p.push(o(t.child(d)));if(Er.Fragment.from(p).eq(e))return{mark:r,type:n}}(h.parent.content.cut(h.parentOffset,f.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))v=e.state.tr,"add"==y.type?v.addMark(w,C,y.mark):v.removeMark(w,C,y.mark);else if(h.parent.child(h.index()).isText&&h.index()==f.index()-(f.textOffset?0:1)){var k=h.parent.textBetween(h.parentOffset,f.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,w,C,k)})))return;v=e.state.tr.insertText(k,w,C)}if(v||(v=e.state.tr.replace(w,C,l.doc.slice(p.start-l.from,p.endB-l.from))),l.sel){var S=Oe(e,v.doc,t,l.sel);S&&v.setSelection(S)}g&&v.ensureMarks(g),e.dispatch(v.scrollIntoView())}}else if(i){var x=e.state,E=x.selection;e.dispatch(x.tr.replaceSelectionWith(x.schema.text(x.doc.textBetween(E.from,E.to)),!0).scrollIntoView())}else if(l.sel){var M=Oe(e,e.state.doc,t,l.sel);M&&!M.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(M))}}(this.view,this.mapping,this.state,t,o),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Se.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Se.prototype.compositionEnd=function(){var e=this;this.composing&&(this.composing=!1,this.timeout=setTimeout((function(){return e.finish()}),50))},Se.start=function(e,t){return e.inDOMChange?t&&(clearTimeout(e.inDOMChange.timeout),e.inDOMChange.composing=!0):e.inDOMChange=new Se(e,t),e.inDOMChange},Se.commitTimeout=20;var Ne={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pe=null,Fe={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},Ie=n.ie&&n.ie_version<=11,Le=function(e){var t=this;this.view=e,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){return t.registerMutations(e)})),Ie&&(this.onCharData=function(e){return t.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})})};Le.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fe),Ie&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},Le.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),Ie&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},Le.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},Le.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},Le.prototype.registerMutation=function(e){if(this.view.editable){var t=this.view.docView.nearestDesc(e.target);if(("attributes"!=e.type||t!=this.view.docView&&"contenteditable"!=e.attributeName)&&t&&!t.ignoreMutation(e)){var n,r;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?l(e.previousSibling)+1:0;if(-1==o)return;n=t.localPosFromDOM(e.target,o,-1);var i=e.nextSibling&&e.nextSibling.parentNode==e.target?l(e.nextSibling):e.target.childNodes.length;if(-1==i)return;r=t.localPosFromDOM(e.target,i,1)}else"attributes"==e.type?(n=t.posAtStart-t.border,r=t.posAtEnd+t.border):(n=t.posAtStart,r=t.posAtEnd,e.target.nodeValue==e.oldValue&&(Se.start(this.view).typeOver=!0));Se.start(this.view).addRange(n,r)}}};var Be={},ze={};function _e(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ve(e,t)})}))}function Ve(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function $e(e){return{left:e.clientX,top:e.clientY}}ze.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,e.inDOMChange){if(e.inDOMChange.composing)return;e.inDOMChange.finish()}var r,o,i,a,s,l;e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||(r=e,s=(o=t).keyCode,a="",(i=o).ctrlKey&&(a+="c"),i.metaKey&&(a+="m"),i.altKey&&(a+="a"),i.shiftKey&&(a+="s"),l=a,8==s||n.mac&&72==s&&"c"==l?le(r,-1)||re(r):46==s||n.mac&&68==s&&"c"==l?le(r,1)||oe(r):13==s||27==s||(37==s?ee(r,-1)||re(r):39==s?ee(r,1)||oe(r):38==s?se(r,-1)||re(r):40==s?se(r,1)||oe(r):l==(n.mac?"m":"c")&&(66==s||73==s||89==s||90==s)))?t.preventDefault():e.selectionReader.poll("key")},ze.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},ze.keypress=function(e,t){if(!(e.inDOMChange||!t.charCode||t.ctrlKey&&!t.altKey||n.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var r=e.state.selection;if(!(r instanceof Ar.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var We={time:0,x:0,y:0,type:""};function je(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;0<s;s--){var l=a(s);if(l)return l.v}return!1}function He(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Ke(e,t,n,r,o){return je(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof Ar.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Ar.NodeSelection.isSelectable(s)){r=n&&0<o.$from.depth&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(He(e,Ar.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Ar.NodeSelection.isSelectable(r))&&(He(e,new Ar.NodeSelection(n),"pointer"),!0)}(e,n))}function Ue(e,t,n,r){return je(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(He(e,Ar.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;0<o;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)He(e,Ar.TextSelection.create(n,a+1,a+1+i.content.size),"pointer");else{if(!Ar.NodeSelection.isSelectable(i))continue;He(e,Ar.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function qe(e){return!!e.inDOMChange&&(e.inDOMChange.finish(!0),!0)}var Je=n.mac?"metaKey":"ctrlKey";Be.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n,r,o,i,a=qe(e),s=Date.now(),l="singleClick";s-We.time<500&&(n=t,(o=(r=We).x-n.clientX)*o+(i=r.y-n.clientY)*i<100)&&!t[Je]&&("singleClick"==We.type?l="doubleClick":"doubleClick"==We.type&&(l="tripleClick")),We={time:s,x:t.clientX,y:t.clientY,type:l};var c=e.posAtCoords($e(t));c&&("singleClick"==l?e.mouseDown=new Ge(e,c,t,a):("doubleClick"==l?function(e,t,n,r){return je(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}:Ue)(e,c.pos,c.inside,t)?t.preventDefault():e.selectionReader.poll("pointer"))};var Ge=function(e,t,r,o){var i,a,s=this;if(this.view=e,this.pos=t,this.event=r,this.flushed=o,this.selectNode=r[Je],this.allowDefault=r.shiftKey,-1<t.inside)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null,this.target=o?null:r.target,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof Ar.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&n.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e.selectionReader.poll("pointer")};Ge.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ge.prototype.up=function(e){this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)&&(this.allowDefault?(n.ie&&ke(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Ke(this.view,this.pos.pos,this.pos.inside,e,this.selectNode)?e.preventDefault():this.flushed?(He(this.view,Ar.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),e.preventDefault()):this.view.selectionReader.poll("pointer"))},Ge.prototype.move=function(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Be.touchdown=function(e){qe(e),e.selectionReader.poll("pointer")},Be.contextmenu=function(e){return qe(e)},ze.compositionstart=ze.compositionupdate=function(e){Se.start(e,!0)},ze.compositionend=function(e,t){if(!e.inDOMChange){if(!t.data)return;Se.start(e,!0)}e.inDOMChange.compositionEnd()},ze.input=function(e){var t=Se.start(e);t.composing||t.finish()};var Xe=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function Ye(e,t,n,r){var o=Te(e,t,n,e.shiftKey,e.state.selection.$from);if(!o)return!1;if(e.someProp("handlePaste",(function(t){return t(e,r,o)})))return!0;var i,a=0==(i=o).openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,s=a?e.state.tr.replaceSelectionWith(a,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Be.copy=ze.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=Xe?null:t.clipboardData,i=De(e,n.content()),a=i.dom,s=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(e,t){var n=t.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),e.focus()}),50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ze.paste=function(e,t){var n,r,o,i,a,s=Xe?null:t.clipboardData;s&&(Ye(e,s.getData("text/plain"),s.getData("text/html"),t)||0<s.files.length)?t.preventDefault():(r=t,o=(n=e).dom.ownerDocument,i=n.shiftKey||n.state.selection.$from.parent.type.spec.code,a=o.body.appendChild(o.createElement(i?"textarea":"div")),i||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout((function(){n.focus(),o.body.removeChild(a),i?Ye(n,a.value,null,r):Ye(n,a.textContent,a.innerHTML,r)}),50))};var Ze=function(e,t){this.slice=e,this.move=t},Qe=n.mac?"altKey":"ctrlKey";for(var et in Be.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords($e(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof Ar.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Ar.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(Ar.NodeSelection.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=De(e,a),l=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Xe?"Text":"text/html",l.innerHTML),Xe||t.dataTransfer.setData("text/plain",c),e.dragging=new Ze(a,!t[Qe])}},Be.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},ze.dragover=ze.dragenter=function(e,t){return t.preventDefault()},ze.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords($e(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||Te(e,t.dataTransfer.getData(Xe?"Text":"text/plain"),Xe?null:t.dataTransfer.getData("text/html"),!1,o);if(i&&(t.preventDefault(),!e.someProp("handleDrop",(function(r){return r(e,t,i,n&&n.move)})))){var a=i?Or.dropPoint(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var s=e.state.tr;n&&n.move&&s.deleteSelection();var l=s.mapping.map(a),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,u=s.doc;if(c?s.replaceRangeWith(l,l,i.content.firstChild):s.replaceRange(l,l,i),!s.doc.eq(u)){var p=s.doc.resolve(l);c&&Ar.NodeSelection.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild)?s.setSelection(new Ar.NodeSelection(p)):s.setSelection(ye(e,p,s.doc.resolve(s.mapping.map(a)))),e.focus(),e.dispatch(s.setMeta("uiEvent","drop"))}}}}}},Be.focus=function(e){e.focused||(e.dom.classList.add("ProseMirror-focused"),e.focused=!0)},Be.blur=function(e){e.focused&&(e.dom.classList.remove("ProseMirror-focused"),e.focused=!1)},ze)Be[et]=ze[et];function tt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var nt=function(e,t){this.spec=t||lt,this.side=this.spec.side||0,this.toDOM=e};nt.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new it(i-n,i-n,this)},nt.prototype.valid=function(){return!0},nt.prototype.eq=function(e){return this==e||e instanceof nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tt(this.spec,e.spec))};var rt=function(e,t){this.spec=t||lt,this.attrs=e};rt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i<=o?null:new it(o,i,this)},rt.prototype.valid=function(e,t){return t.from<t.to},rt.prototype.eq=function(e){return this==e||e instanceof rt&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)},rt.is=function(e){return e.type instanceof rt};var ot=function(e,t){this.spec=t||lt,this.attrs=e};ot.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new it(o.pos-n,i.pos-n,this)},ot.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},ot.prototype.eq=function(e){return this==e||e instanceof ot&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)};var it=function(e,t,n){this.from=e,this.to=t,this.type=n},at={spec:{}};it.prototype.copy=function(e,t){return new it(e,t,this.type)},it.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},it.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},it.widget=function(e,t,n){return new it(e,e,new nt(t,n))},it.inline=function(e,t,n,r){return new it(e,t,new rt(n,r))},it.node=function(e,t,n,r){return new it(e,t,new ot(n,r))},at.spec.get=function(){return this.type.spec},Object.defineProperties(it.prototype,at);var st=[],lt={},ct=function(e,t){this.local=e&&e.length?e:st,this.children=t&&t.length?t:st};ct.create=function(e,t){return t.length?mt(t,e,0,lt):ut},ct.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ct.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}},ct.prototype.map=function(e,t,n){return this==ut||0==e.maps.length?this:this.mapInner(e,t,0,0,n||lt)},ct.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,o,i,a){for(var s=e.slice(),l=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var l=s[a+1],c=void 0;-1==l||l+i<e||(t>=s[a]+i?s[a+1]=-1:(c=r-n-(t-e)+(i-o))&&(s[a]+=c,s[a+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,p=0;p<s.length;p+=3)if(-1==s[p+1]){var d=n.map(s[p]+i),h=d-o;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(e[p+1]+i,-1)-o,m=r.content.findIndex(h),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==h&&g+y.nodeSize==f){var b=s[p+2].mapInner(n,y,d+1,s[p]+i+1,a);b!=ut?(s[p]=h,s[p+1]=f,s[p+2]=b):(s[p+1]=-2,u=!0)}else u=!0}if(u){var w=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):a.onRemove&&a.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&s(e[l+2],t[l]+i+1);return n}(s,e,t?dt(t,o):[],n,o,i,a),C=mt(w,r,0,a);t=C.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var S=0,x=0;S<C.children.length;S+=3){for(var E=C.children[S];x<s.length&&s[x]<E;)x+=3;s.splice(x,0,C.children[S],C.children[S+1],C.children[S+2])}}return new ct(t&&t.sort(vt),s)}(this.children,i,e,t,n,r,o):i?new ct(i.sort(vt)):ut},ct.prototype.add=function(e,t){return t.length?this==ut?ct.create(e,t):this.addInner(e,t,0):this},ct.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,a){var s,l=a+n;if(s=ht(t,e,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,l+1):r.splice(i,0,a,a+e.nodeSize,mt(s,e,l+1,lt)),i+=3}}));var a=dt(i?ft(t):t,-n);return new ct(a.length?this.local.concat(a).sort(vt):this.local,r||this.children)},ct.prototype.remove=function(e){return 0==e.length||this==ut?this:this.removeInner(e,0)},ct.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>a&&c.to<s&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=ut?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,d=void 0;p<e.length;p++)if(d=e[p])for(var h=0;h<r.length;h++)r[h].type.eq(d.type)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ct(r,n):ut},ct.prototype.forChild=function(e,t){var n,r;if(this==ut)return this;if(t.isLeaf)return ct.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var l=this.local[s];if(l.from<a&&l.to>i&&l.type instanceof rt){var c=Math.max(i,l.from)-i,u=Math.min(a,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var p=new ct(r.sort(vt));return n?new pt([p,n]):p}return n||ut},ct.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!1},ct.prototype.locals=function(e){return gt(this.localsInner(e))},ct.prototype.localsInner=function(e){if(this==ut)return st;if(e.inlineContent||!this.local.some(rt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof rt||t.push(this.local[n]);return t};var ut=new ct;ct.empty=ut,ct.removeOverlap=gt;var pt=function(e){this.members=e};function dt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new it(o.from+t,o.to+t,o.type))}return n}function ht(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function ft(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function mt(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=ht(e,t,a+n);if(s){i=!0;var l=mt(s,t,n+a+1,r);l!=ut&&o.push(a,a+t.nodeSize,l)}}));for(var a=dt(i?ft(e):e,-n).sort(vt),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new ct(a,o):ut}function vt(e,t){return e.from-t.from||e.to-t.to}function gt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),yt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),yt(t,o+1,i.copy(r.to,i.to)))}}return t}function yt(e,t,n){for(;t<e.length&&0<vt(n,e[t]);)t++;e.splice(t,0,n)}function bt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=ut&&t.push(r)})),e.cursorWrapper&&t.push(ct.create(e.state.doc,[e.cursorWrapper.deco])),pt.from(t)}pt.prototype.forChild=function(e,t){if(t.isLeaf)return ct.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=ut&&(o instanceof pt?n=n.concat(o.members):n.push(o))}return pt.from(n)},pt.prototype.eq=function(e){if(!(e instanceof pt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},pt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?gt(n?t:t.sort(vt)):st},pt.from=function(e){switch(e.length){case 0:return ut;case 1:return e[0];default:return new pt(e)}};var wt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xt(this),this.cursorWrapper=null,St(this),this.docView=I(this.state.doc,kt(this),bt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.inDOMChange=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.domObserver=new Le(e),e.domObserver.start(),e.eventHandlers=Object.create(null);var t=function(t){var n=Be[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ve(e,t)||!e.editable&&t.type in ze||n(e,t)})};for(var n in Be)t(n);_e(e)}(this),this.selectionReader=new pe(this),this.pluginViews=[],this.updatePluginViews()},Ct={props:{},root:{}};function kt(e){var t=Object.create(null);return t.class="ProseMirror"+(e.focused?" ProseMirror-focused":""),t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[it.node(0,e.state.doc.content.size,t)]}function St(e){var t,r,o=ke(e.state);if(!o||n.ie&&e.mouseDown)e.cursorWrapper=null;else{var i,a=e.state.selection.visible,s=e.state.storedMarks||o.marks();e.cursorWrapper&&Er.Mark.sameSet(e.cursorWrapper.deco.spec.marks,s)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==a?e.cursorWrapper.deco.pos!=o.pos&&(i=e.cursorWrapper.dom):(t=a,(r=document.createElement("span")).textContent="\ufeff",t||(r.style.position="absolute",r.style.left="-100000px"),i=r),i&&(e.cursorWrapper={dom:i,deco:it.widget(o.pos,i,{isCursorWrapper:!0,marks:s,raw:!0,visible:a})})}}function xt(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}Ct.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},wt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_e(this),this._props=e,this.updateState(e.state)},wt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},wt.prototype.updateState=function(e){var t=this,n=this.state;if(this.state=e,n.plugins!=e.plugins&&_e(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(e)){var r=this.editable;this.editable=xt(this),St(this);var o=bt(this),i=kt(this),a=n.config!=e.config?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",s=!this.docView.matchesNode(e.doc,i,o),l=s||!e.selection.eq(n.selection)||this.selectionReader.domChanged(),u="preserve"==a&&l&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=e.dom.ownerDocument,a=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var l=e.root.elementFromPoint(a,s);if(l!=e.dom&&e.dom.contains(l)){var u=l.getBoundingClientRect();if(u.top>=o-20){t=l,n=u.top;break}}}for(var p=[],d=e.dom;d&&(p.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),d!=i.body);d=c(d));return{refDOM:t,refTop:n,stack:p}}(this);if(l&&(this.domObserver.stop(),s&&(this.docView.update(e.doc,i,o,this)||(this.docView.destroy(),this.docView=I(e.doc,i,o,this.dom,this)),this.selectionReader.clearDOMState()),fe(this),this.domObserver.start()),r!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(n),"reset"==a)this.dom.scrollTop=0;else if("to selection"==a){var p=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(t)}))||(e.selection instanceof Ar.NodeSelection?g(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),p):g(this,this.coordsAtPos(e.selection.head),p))}else u&&function(e){for(var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0,i=0==o?0:o-n,a=0;a<r.length;a++){var s=r[a],l=s.dom,c=s.top,u=s.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=u&&(l.scrollLeft=u)}}(u)}},wt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},wt.prototype.updatePluginViews=function(e){var t=this.state.plugins;if(e&&e.plugins==t)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<t.length;o++){var i=t[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},wt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},wt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},wt.prototype.focus=function(){this.domObserver.stop(),fe(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},Ct.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},wt.prototype.posAtCoords=function(e){var t=b(this,e);return this.inDOMChange&&t&&(t.pos=this.inDOMChange.mapping.map(t.pos),-1!=t.inside&&(t.inside=this.inDOMChange.mapping.map(t.inside))),t},wt.prototype.coordsAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),C(this,e)},wt.prototype.domAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),this.docView.domFromPos(e)},wt.prototype.nodeDOM=function(e){this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e));var t=this.docView.descAt(e);return t?t.nodeDOM:null},wt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},wt.prototype.endOfTextblock=function(e,t){return O(this,t||this.state,e)},wt.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.inDOMChange&&e.inDOMChange.destroy(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],bt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},wt.prototype.dispatchEvent=function(e){var t,n;Ve(t=this,n=e)||!Be[n.type]||!t.editable&&n.type in ze||Be[n.type](t,n)},wt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(wt.prototype,Ct),t.EditorView=wt,t.Decoration=it,t.DecorationSet=ct,t.__serializeForClipboard=De,t.__parseFromClipboard=Te}));g(Gr);var Xr=Gr.EditorView,Yr=Gr.Decoration,Zr=Gr.DecorationSet,Qr=(Gr.__serializeForClipboard,Gr.__parseFromClipboard,new Nr("common")),eo={name:"common",plugin:new Rr({key:Qr,state:{init:function(){return{editorHasFocus:!1,hideInlineToolbar:!1}},apply:function(e,t){var n=u({},t),r=e.getMeta("EDITOR_FOCUSED");return void 0!==r&&(n.editorHasFocus=r),n.hideInlineToolbar=e.getMeta("HIDE_OVERLAYS"),n}},props:{handleDOMEvents:{focus:function(e){var t=e.state;return(0,e.dispatch)(t.tr.setMeta("EDITOR_FOCUSED",!0)),!1},blur:function(e){var t=e.state;return(0,e.dispatch)(t.tr.setMeta("EDITOR_FOCUSED",!1)),!1}},decorations:function(e){var t=e&&Qr.getState(e),n=t.editorHasFocus,r=t.hideInlineToolbar;if(!e.selection.empty&&n&&!r){var o=e.selection,i=o.$from,a=o.$to;return Zr.create(e.doc,[Yr.inline(i.pos,a.pos,{class:"nib-selected",style:"position: relative;"})])}}}}),keymaps:{},schema:{nodes:["doc","paragraph","text"]}},to={"mod-/":function(e,t){t(e.tr.setMeta("SHOW_HELP_MODAL",!0))}},no={help:{key:"mod-/",label:"Help"}},ro=new Nr("help"),oo=new Rr({key:ro,state:{init:function(){return{helpVisible:!1}},apply:function(e,t){return e.getMeta("SHOW_HELP_MODAL")?{helpVisible:!0}:e.getMeta("HIDE_HELP_MODAL")?{helpVisible:!1}:t}}}),io=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).hideHelpModal=function(){var e=n.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_HELP_MODAL",!0))},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var t,n=this,o=(t=this.context.config.plugins.options,Fa(t).filter((function(e){return e.KeymapInfo})).map((function(e){return{name:e.name,keymaps:Object.values(e.KeymapInfo)}})));return r.createElement(at,{hideModal:this.hideHelpModal,render:function(){return r.createElement(ao,{onClick:n.stopPropagation},r.createElement(so,null,r.createElement(lo,null,"Help"),r.createElement(uo,{onClick:n.hideHelpModal})),r.createElement(po,null,r.createElement(ho,null,r.createElement(co,null,"Keyboard Shortcuts"),o.map((function(t){var n=t.name,o=t.keymaps;return r.createElement(e.Fragment,{key:"plugin-keymap-".concat(n)},o.map((function(e){var t=e.key,n=e.label;return r.createElement(fo,{key:"option-key-".concat(t)},r.createElement("span",null,n),r.createElement("span",null,function(e){var t="\u2318";"Windows"===jr()&&(t="^");var n=e.replace("mod",t);return(n=(n=n.replace(/-/g," + ")).replace("shift","\u21e7")).replace("alt","\u2325")}(t)))})))})))))}})}}]),t}();io.contextType=Cr;var ao=Xe("div",{target:"e8bw80q0",label:"Wrapper"})({name:"1h31r9f",styles:"font-size:16px;min-width:372px;border-radius:2px;"}),so=Xe("div",{target:"e8bw80q1",label:"Header"})({name:"hmzxds",styles:"box-shadow:rgb(235,236,240) 0px 1px 0px;padding:12px 24px;display:flex;justify-content:space-between;align-items:center;"}),lo=Xe("div",{target:"e8bw80q2",label:"Title"})({name:"bk9fzy",styles:"font-size:20px;"}),co=Xe("div",{target:"e8bw80q3",label:"SubTitle"})({name:"1ftjf08",styles:"font-weight:bold;padding:0px 24px 10px;"}),uo=Xe(nt.Cross,{target:"e8bw80q4",label:"StyledCross"})({name:"4g6ai3",styles:"cursor:pointer;"}),po=Xe("div",{target:"e8bw80q5",label:"MainSection"})({name:"1is0qkf",styles:"padding:20px 0;"}),ho=Xe("div",{target:"e8bw80q6",label:"OptionWrapper"})({name:"vboads",styles:"height:256px;overflow:scroll;"}),fo=Xe("div",{target:"e8bw80q7",label:"Option"})({name:"1envl27",styles:"padding:4px 24px;display:flex;justify-content:space-between;"}),mo={name:"help",KeymapInfo:no,keymaps:to,modals:[{condition:function(e){var t=ro.getState(e);return t&&t.helpVisible},component:io}],plugin:oo,toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).showHelpModal=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("SHOW_HELP_MODAL",!0))},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){return r.createElement(Ye,{onClick:this.showHelpModal,title:Hr(no.help)},r.createElement(nt.Question,null))}}]),t}()},vo=function(){};vo.prototype.append=function(e){return e.length?(e=vo.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},vo.prototype.prepend=function(e){return e.length?vo.from(e).append(this):this},vo.prototype.appendInner=function(e){return new yo(this,e)},vo.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),t<=e?vo.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},vo.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},vo.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},vo.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},vo.from=function(e){return e instanceof vo?e:e&&e.length?new go(e):vo.empty};var go=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e);var n={length:{},depth:{}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;n<=o;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(vo);vo.empty=new go([]);var yo=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&!(o<n&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(o<t&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):n<=e?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(vo),bo=vo,wo=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=bo)&&"object"==typeof n&&"default"in n?n.default:n,o=function(e,t){this.items=e,this.eventCount=t};o.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var r,a,s=this.items.length;;s--)if(n.items.get(s-1).selection){--s;break}t&&(r=this.remapping(s,this.items.length),a=r.maps.length);var l,c,u=e.tr,p=[],d=[];return this.items.forEach((function(e,t){if(!e.step)return r||(r=n.remapping(s,t+1),a=r.maps.length),a--,void d.push(e);if(r){d.push(new i(e.map));var h,f=e.step.map(r.slice(a));f&&u.maybeStep(f).doc&&(h=u.mapping.maps[u.mapping.maps.length-1],p.push(new i(h,null,null,p.length+d.length))),a--,h&&r.appendMap(h,a)}else u.maybeStep(e.step);return e.selection?(l=r?e.selection.map(r.slice(a)):e.selection,c=new o(n.items.slice(0,s).append(d.reverse().concat(p)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:u,selection:l}},o.prototype.addTransform=function(e,t,n,r){for(var a=[],l=this.eventCount,c=this.items,u=!r&&c.length?c.get(c.length-1):null,p=0;p<e.steps.length;p++){var d,h=e.steps[p].invert(e.docs[p]),f=new i(e.mapping.maps[p],h,t);(d=u&&u.merge(f))&&(f=d,p?a.pop():c=c.slice(0,c.length-1)),a.push(f),t&&(l++,t=null),r||(u=f)}var m,v,g,y=l-n.depth;return s<y&&(v=y,(m=c).forEach((function(e,t){if(e.selection&&0==v--)return g=t,!1})),c=m.slice(g),l-=y),new o(c.append(a),l)},o.prototype.remapping=function(e,t){var n=new Or.Mapping;return this.items.forEach((function(t,r){var o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?o=n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,o)}),e,t),n},o.prototype.addMaps=function(e){return 0==this.eventCount?this:new o(this.items.append(e.map((function(e){return new i(e)}))),this.eventCount)},o.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-t),a=e.mapping,s=e.steps.length,l=this.eventCount;this.items.forEach((function(e){e.selection&&l--}),r);var c=t;this.items.forEach((function(t){var r=a.getMirror(--c);if(null!=r){s=Math.min(s,r);var o=a.maps[r];if(t.step){var u=e.steps[r].invert(e.docs[r]),p=t.selection&&t.selection.map(a.slice(c,r));p&&l++,n.push(new i(o,u,p))}else n.push(new i(o))}}),r);for(var u=[],p=t;p<s;p++)u.push(new i(a.maps[p]));var d=this.items.slice(0,r).append(u).append(n),h=new o(d,l);return 500<h.emptyItemCount()&&(h=h.compress(this.items.length-n.length)),h},o.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},o.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,a=[],s=0;return this.items.forEach((function(r,o){if(e<=o)a.push(r),r.selection&&s++;else if(r.step){var l=r.step.map(t.slice(n)),c=l&&l.getMap();if(n--,c&&t.appendMap(c,n),l){var u=r.selection&&r.selection.map(t.slice(n));u&&s++;var p,d=new i(c.invert(),l,u),h=a.length-1;(p=a.length&&a[h].merge(d))?a[h]=p:a.push(d)}}else r.map&&n--}),this.items.length,0),new o(r.from(a.reverse()),s)},o.empty=new o(r.empty,0);var i=function(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r};i.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new i(t.getMap().invert(),t,this.selection)}};var a=function(e,t,n,r){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r},s=20;function l(e){var t=[];return e.forEach((function(e,n,r,o){return t.push(r,o)})),t}function c(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function u(e,t,n,r){var o=h(t),i=f.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(s){var l=s.selection.resolve(s.transform.doc),c=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),u=new a(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(l).setMeta(f,{redo:r,historyState:u}).scrollIntoView())}}var p=!1,d=null;function h(e){var t=e.plugins;if(d!=t){p=!1,d=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){p=!0;break}}return p}var f=new Ar.PluginKey("history"),m=new Ar.PluginKey("closeHistory");t.HistoryState=a,t.closeHistory=function(e){return e.setMeta(m,!0)},t.history=function(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new Ar.Plugin({key:f,state:{init:function(){return new a(o.empty,o.empty,null,0)},apply:function(t,n,r){return function(e,t,n,r){var i,s=n.getMeta(f);if(s)return s.historyState;n.getMeta(m)&&(e=new a(e.done,e.undone,null,0));var u=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(u&&u.getMeta(f))return u.getMeta(f).redo?new a(e.done.addTransform(n,null,r,h(t)),e.undone,l(n.mapping.maps[n.steps.length-1]),e.prevTime):new a(e.done,e.undone.addTransform(n,null,r,h(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||u&&!1===u.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new a(e.done.rebased(n,i),e.undone.rebased(n,i),c(e.prevRanges,n.mapping),e.prevTime):new a(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),c(e.prevRanges,n.mapping),e.prevTime);var p=e.prevTime<(n.time||0)-r.newGroupDelay||!u&&!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,r){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges),d=u?c(e.prevRanges,n.mapping):l(n.mapping.maps[n.steps.length-1]);return new a(e.done.addTransform(n,p?t.selection.getBookmark():null,r,h(t)),o.empty,d,n.time)}(n,r,t,e)}},config:e})},t.undo=function(e,t){var n=f.getState(e);return!(!n||0==n.done.eventCount||(t&&u(n,e,t,!1),0))},t.redo=function(e,t){var n=f.getState(e);return!(!n||0==n.undone.eventCount||(t&&u(n,e,t,!0),0))},t.undoDepth=function(e){var t=f.getState(e);return t?t.done.eventCount:0},t.redoDepth=function(e){var t=f.getState(e);return t?t.undone.eventCount:0}}));g(wo),wo.HistoryState,wo.closeHistory;var Co=wo.history,ko=wo.undo,So=wo.redo,xo=(wo.undoDepth,wo.redoDepth,{"mod-shift-z":function(e,t){return So(e,t)},"mod-z":function(e,t){return ko(e,t)}}),Eo={redo:{key:"mod-shift-Z",label:"Redo"},undo:{key:"mod-Z",label:"Undo"}},Mo=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).undo=function(){var e=n.props.app_params.view,t=e.state,r=e.dispatch;ko(t,r)},n.redo=function(){var e=n.props.app_params.view,t=e.state,r=e.dispatch;So(t,r)},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){return r.createElement(r.Fragment,null,r.createElement(Ye,{onClick:this.undo,title:Hr(Eo.undo)},r.createElement(nt.Undo,null)),r.createElement(dr,{type:"toolbar"}),r.createElement(Ye,{onClick:this.redo,title:Hr(Eo.redo)},r.createElement(nt.Redo,null)))}}]),t}(),Oo=Co(),Ao={name:"history",keymaps:xo,KeymapInfo:Eo,toolbarComponent:Mo,plugin:Oo},Do=function(){function e(t,n){var r=this;i(this,e),this.dom=document.createElement("span"),this.dom.style.position="relative",this.dom.style.display="inline-block",this.img=document.createElement("img"),this.img.src=t.attrs.src,this.img.style=t.attrs.style,this.dom.appendChild(this.img),this.img.addEventListener("mousedown",(function(e){r.img.style.outline="2px solid #065FD4",r.div1=document.createElement("div"),r.div1.style="height: 10px; width: 10px; position: absolute;left: 0px;top: 0px; background-color: #065FD4;",r.dom.appendChild(r.div1),r.div2=document.createElement("div"),r.div2.style="height: 10px; width: 10px; position: absolute;right: 0px;top: 0px; background-color: #065FD4;",r.dom.appendChild(r.div2),r.div3=document.createElement("div"),r.div3.style="height: 10px; width: 10px; position: absolute;left: 0px;bottom: 5px; background-color: #065FD4;",r.dom.appendChild(r.div3),r.div4=document.createElement("div"),r.div4.style="height: 10px; width: 10px; position: absolute;right: 0px;bottom: 5px; background-color: #065FD4;",r.dom.appendChild(r.div4),e.stopPropagation()}))}return s(e,[{key:"stopEvent",value:function(){return!0}}]),e}(),To=new Nr("image"),Ro=new Rr({key:To,state:{init:function(){return{imageToolbarVisible:!1}},apply:function(e,t){return e.getMeta("SHOW_IMAGE_TOOLBAR")?{imageToolbarVisible:!0}:e.getMeta("HIDE_IMAGE_TOOLBAR")?{imageToolbarVisible:!1}:t}},props:{nodeViews:{image:function(e,t){return new Do(e,t)}}}}),No=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).state={uploading:!1},n.handleImageInputChange=function(e){var t=e.target.files;n.insertImage(t[0])},n.insertImage=function(e){n.setState({uploading:!0}),(0,n.context.config.plugins.image.uploadCallback)(e).then((function(e){var t=e.src;if(n.setState({uploading:!1}),t){var r=n.props.view,o=r.state,i=r.dispatch,a=o.selection,s=a.$from,l=a.$to,c=o.schema.nodes.image;i(o.tr.replaceRangeWith(s.pos,l.pos,c.create({src:t})))}})).finally((function(){n.hideImageModal()}))},n.stopDefault=function(e){e.preventDefault(),e.stopPropagation()},n.onImageDrop=function(e){n.stopDefault(e);for(var t=e.dataTransfer,r=t.items,o=t.files,i=r||o,a=!!r,s=0;s<i.length;s++)if((!a||"file"===i[s].kind)&&i[s].type.match("^image/")){var l=a?i[s].getAsFile():i[s];n.insertImage(l)}},n.hideImageModal=function(){var e=n.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_IMAGE_TOOLBAR",!0))},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e=this,t=this.state.uploading;return r.createElement(at,{hideModal:this.hideImageModal,render:function(){return r.createElement(Po,{onClick:e.stopPropagation},r.createElement("label",{htmlFor:"file"},r.createElement(Lo,{type:"file",id:"file",onChange:e.handleImageInputChange}),r.createElement(Fo,{onDragEnter:e.stopDefault,onDragOver:e.stopDefault,onDrop:e.onImageDrop,uploading:t},r.createElement(Io,null,"Drag and Drop the Image ",r.createElement("br",null)," or ",r.createElement("br",null)," Click to Upload"),r.createElement(Bo,{uploading:t}))))}})}}]),t}();No.contextType=Cr;var Po=Xe("div",{target:"ezxsf5c0",label:"Wrapper"})({name:"sqrven",styles:"background-color:white;min-height:240px;min-width:300px;padding:20px;"}),Fo=Xe("div",{target:"ezxsf5c1",label:"UploadSection"})("align-items:center;background:",(function(e){return e.theme.imageUploadModal.backgroundColor}),";border:1px dashed ",(function(e){var t=e.theme;return e.uploading?t.imageUploadModal.backgroundColor.borderActiveColor:t.imageUploadModal.backgroundColor.borderColor}),";display:flex;flex-direction:column;height:",(function(e){return e.theme.imageUploadModal.height}),";justify-content:center;width:",(function(e){return e.theme.imageUploadModal.width}),";> span{margin-bottom:10px;}"),Io=Xe("span",{target:"ezxsf5c2",label:"UploadLabel"})({name:"43t5xz",styles:"margin-top:50px;text-align:center;"}),Lo=Xe("input",{target:"ezxsf5c3",label:"FileUploadInput"})({name:"1hyfx7x",styles:"display:none;"}),Bo=Xe(mr,{target:"ezxsf5c4",label:"StyledSpinner"})("margin-top:10px;visibility:",(function(e){return e.uploading?"visible":"hidden"}),";"),zo={name:"image",modals:[{condition:function(e){var t=To.getState(e);return t&&t.imageToolbarVisible},component:No}],plugin:Ro,schema:{nodes:["image"]},toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).showImageModal=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("SHOW_IMAGE_TOOLBAR",!0))},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){return r.createElement(Ye,{onClick:this.showImageModal,title:"Image"},r.createElement(nt.Image,null))}}]),t}()},_o=function(e,t){return function(n,r){var o=n.schema.marks[e];return Ir(o,t)(n,r)}},Vo={"mod-b":function(e,t){return _o("strong")(e,t)},"mod-i":function(e,t){return _o("em",{level:1})(e,t)},"mod-u":function(e,t){return _o("underline",{level:2})(e,t)},"mod-shift-s":function(e,t){return _o("strike",{level:2})(e,t)}},$o={strong:{key:"mod-B",label:"Bold"},em:{key:"mod-I",label:"Italic"},underline:{key:"mod-U",label:"Underline"},strike:{key:"mod-shift-S",label:"Strikethrough"}},Wo=new Nr("inline"),jo=function(e){var t=e.selection,n=t.$from,r=t.$to,o=[];return t.empty&&(o=m(e.storedMarks||r.marks())),e.doc.nodesBetween(n.pos,r.pos,(function(e){e.marks&&(o=[].concat(m(o),m(e.marks)))})),o},Ho=new Rr({key:Wo,state:{init:function(e,t){return{activeMarks:jo(t)}},apply:function(e,t,n,r){var o=n.storedMarks&&n.storedMarks.length,i=r.storedMarks&&r.storedMarks.length;return e.docChanged||n.selection!==r.selection||o!==i?{activeMarks:jo(r)}:t}}}),Ko={strong:"Bold",em:"Italic",underline:"Underline",strike:"Strike"},Uo={name:"inline",keymaps:Vo,KeymapInfo:$o,toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).getActiveMarks=function(){var e=n.props.app_params.view.state,t=Wo.getState(e);return t&&t.activeMarks},n.isSubsupMarkActive=function(e,t){var r=n.props.app_params.view.state.schema.marks;return e.find((function(e){return e.type===r.subsup&&e.attrs.type===t}))},n.toggleMarkofType=function(e){var t=e.currentTarget.getAttribute("name"),r=n.props.app_params.view,o=r.state,i=r.dispatch,a=o.schema.marks[t];Ir(a)(o,i)},n.toggleSupSubMark=function(e,t){var r=n.props.app_params.view,o=r.state,i=r.dispatch,a=o.schema,s=o.selection,l=o.tr,c=s.$from,u=s.$to,p=a.marks.subsup;n.isSubsupMarkActive(n.getActiveMarks(),e)?i(l.removeMark(c.pos,u.pos,o.schema.marks.subsup)):(n.isSubsupMarkActive(n.getActiveMarks(),t)&&l.removeMark(c.pos,u.pos,o.schema.marks.subsup),l.addMark(c.pos,u.pos,p.create({type:e})),i(l))},n.toggleSupMark=function(){n.toggleSupSubMark("sup","sub")},n.toggleSubMark=function(e){n.toggleSupSubMark("sub","sup")},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var t=this;if(!this.props.app_params.view)return null;var n=this.getActiveMarks(),o=this.props.app_params.view.state.schema.marks,i=this.props.config.options;return r.createElement(r.Fragment,null,["strong","em","underline","strike"].reduce((function(a,s,l){if(0<=i.indexOf(s)){a.length||a.push(r.createElement(dr,{key:"inlinestyle-separator",type:"toolbar"}));var c=nt[Ko[s]];a.push(r.createElement(e.Fragment,{key:"inlinestyle-".concat(l)},r.createElement(Ye,{name:s,onClick:t.toggleMarkofType,selected:o[s].isInSet(n),title:Hr($o[s])},r.createElement(c,null)),r.createElement(dr,{type:"toolbar"})))}return a}),[]),0<=i.indexOf("subsup")&&r.createElement(r.Fragment,null,r.createElement(Ye,{name:"sup",onClick:this.toggleSupMark,selected:this.isSubsupMarkActive(n,"sup"),title:"Superscript"},r.createElement(nt.Sup,null)),r.createElement(dr,{type:"toolbar"}),r.createElement(Ye,{name:"sub",onClick:this.toggleSubMark,selected:this.isSubsupMarkActive(n,"sub"),title:"Subscript"},r.createElement(nt.Sub,null))))}}]),t}(),plugin:Ho,schema:{marks:["em","strike","strong","subsup","underline"]}},qo={"mod-k":function(e,t){t(e.tr.setMeta("SHOW_LINK_TOOLBAR",!0))}},Jo={link:{key:"mod-K",label:"Link"}},Go=new Nr("link"),Xo=function(e){var t,n=e.selection,r=n.$from,o=n.$to,i=e.schema.marks;return e.doc.nodesBetween(r.pos,o.pos,(function(e,n){if(e.marks){var r=e.marks.find((function(e){return e.type===i.link}));r&&(t={from:n,to:n+e.nodeSize,href:r.attrs.href})}})),t},Yo=new Rr({key:Go,state:{init:function(e,t){return{link:Xo(t)}},apply:function(e,t,n,r){var o=Xo(r);if(e.getMeta("HIDE_EDIT_LINK_TOOLBAR")||e.getMeta("HIDE_LINK_TOOLBAR"))return{link:o};var i=t.decoration;if(e.getMeta("SHOW_LINK_TOOLBAR")){var a=r.selection,s=a.$from,l=a.$to;if(s.pos===l.pos){var c=document.createElement("span");c.className="nib-link-marker",i=Zr.create(r.doc,[Yr.widget(s.pos,c)])}else i=Zr.create(r.doc,[Yr.inline(s.pos,l.pos,{class:"nib-link-marker"})]);return{link:o,decoration:i}}return o?(i&&(!t.link||t.link.from===o.from&&t.link.to===o.to)||(i=Zr.create(r.doc,[Yr.inline(o.from,o.to,{class:"nib-edit-link-marker"})])),{link:o,decoration:i}):{decoration:i}}},props:{decorations:function(e){return(e&&Go.getState(e)).decoration}}}),Zo=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).showLinkToolbar=function(){var e=n.props.app_params.view,t=void 0===e?{}:e,r=t.state,o=t.dispatch;t.hasFocus||t.focus(),o(r.tr.setMeta("SHOW_LINK_TOOLBAR",!0))},n.isLinkMarkActive=function(){var e=n.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var r=Go.getState(t);return r&&!!r.link}},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){return r.createElement(Ye,{name:"link",onClick:this.showLinkToolbar,disabled:this.isLinkMarkActive(),title:Hr(Jo.link)},r.createElement(nt.Link,null))}}]),t}(),Qo={elmClassName:"nib-link-marker",component:function(){function t(e){var n;return i(this,t),(n=f(this,d(t).call(this,e))).updateValue=function(e){n.setState(l({},"".concat(e.target.name),e.target.value))},n.addLink=function(){var e=n.state,t=e.linkText,r=e.href;if(t&&t.length){var o=n.props.view,i=o.state,a=o.dispatch,s=i.tr,l=i.selection,c=l.$from,u=l.$to;a(s.insertText(t,c.pos,u.pos).addMark(c.pos,c.pos+t.length,i.schema.marks.link.create({href:r})).setMeta("SHOW_LINK_TOOLBAR",!1)),o.focus(),n.closeOverlay()}},n.getSelectedText=function(){var e=n.props.view;if(!e)return"";var t=e.state,r=t.selection,o=r.$from,i=r.$to;return t.doc.textBetween(o.pos,i.pos)},n.handleKeyDown=function(e){"Enter"===e.key&&n.addLink()},n.closeOverlay=function(){var e=n.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_LINK_TOOLBAR",!0))},n.state={linkText:n.getSelectedText(),href:"",isMouseDown:!1},n.overlayWrapper=r.createRef(),n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.linkText,o=t.href,i=this.props,a=i.editorWrapper,s=i.marker;return r.createElement(ut,{closeOverlay:this.closeOverlay,editorWrapper:a,marker:s,render:function(){return r.createElement(ei,{ref:e.overlayWrapper},r.createElement("div",null,r.createElement(rt,{autoFocus:!0,label:"Text",name:"linkText",onChange:e.updateValue,onKeyPress:e.handleKeyDown,value:n}),r.createElement(rt,{label:"Href",name:"href",onChange:e.updateValue,onKeyPress:e.handleKeyDown,value:o})),r.createElement(ti,{onClick:e.addLink},"Apply"))}})}}]),t}()},ei=Xe("div",{target:"ecs4ukm0",label:"LinkPopup"})({name:"1mpxeds",styles:"align-items:flex-end;border-radius:4px;display:flex;padding:5px 10px;font-size:14px;"}),ti=Xe(Qe,{target:"ecs4ukm1",label:"StyledLinkButton"})("margin:4px 0;background:",(function(e){return e.theme.overlay.backgroundColor}),";color:",(function(e){return e.theme.overlay.color}),";"),ni={elmClassName:"nib-edit-link-marker",component:function(){function t(e){var n;return i(this,t),(n=f(this,d(t).call(this,e))).updateHref=function(e){n.setState({href:e.target.value})},n.getLink=function(){var e=n.props.view,t=(e=void 0===e?{}:e).state;if(t){var r=Go.getState(t);return r&&r.link}},n.getActiveLinkMark=function(){var e=n.props.view;if(e){var t=n.getLink();if(t)return e.domAtPos(t.from).node.querySelector("a")}},n.updateLink=function(){var e=n.getLink(),t=n.props.view,r=t.state;(0,t.dispatch)(r.tr.removeMark(e.from,e.to,r.schema.marks.link).addMark(e.from,e.to,r.schema.marks.link.create({href:n.state.href})).setSelection(new Dr(r.doc.resolve(e.to)))),n.closeOverlay()},n.unLink=function(){var e=n.getLink(),t=n.props.view,r=t.state;(0,t.dispatch)(r.tr.removeMark(e.from,e.to,r.schema.marks.link)),t.focus(),n.closeOverlay()},n.closeOverlay=function(){var e=n.props.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_EDIT_LINK_TOOLBAR",!0))},n.state={href:"",isMouseDown:!1},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e=this,t=this.getLink();if(!t)return null;var n=this.props,o=n.editorWrapper,i=n.marker;return r.createElement(ut,{closeOverlay:this.closeOverlay,editorWrapper:o,marker:i,render:function(){return r.createElement(ri,null,r.createElement("label",{htmlFor:"href"},"Href"),r.createElement(rt,{name:"href",onChange:e.updateHref,defaultValue:t.href}),r.createElement(Qe,{onClick:e.updateLink},"Apply"),r.createElement(dr,null),r.createElement(Qe,{onClick:e.unLink},"Unlink"))}})}}]),t}()},ri=Xe("div",{target:"e1g8t770",label:"LinkPopup"})({name:"1b7tnjq",styles:"align-items:center;background:white;border-radius:4px;display:flex;padding:5px 10px;font-size:14px;"}),oi={name:"link",keymaps:qo,KeymapInfo:Jo,toolbarComponent:Zo,plugin:Yo,schema:{marks:["link"]},overlays:[Qo,ni]},ii=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=["ol",0],r=["ul",0],o=["li",0],i={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?n:["ol",{start:e.attrs.order},0]}},a={parseDOM:[{tag:"ul"}],toDOM:function(){return r}},s={parseDOM:[{tag:"li"}],toDOM:function(){return o},defining:!0};function l(e,t){var n={};for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n}t.orderedList=i,t.bulletList=a,t.listItem=s,t.addListNodes=function(e,t,n){return e.append({ordered_list:l(i,{content:"list_item+",group:n}),bullet_list:l(a,{content:"list_item+",group:n}),list_item:l(s,{content:t})})},t.wrapInList=function(e,t){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,s=i.blockRange(a),l=!1,c=s;if(!s)return!1;if(2<=s.depth&&i.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;var u=n.doc.resolve(s.start-2);c=new Er.NodeRange(u,u,s.depth),s.endIndex<s.parent.childCount&&(s=new Er.NodeRange(i,n.doc.resolve(a.end(s.depth)),s.depth)),l=!0}var p=Or.findWrapping(c,e,t,s);return!!p&&(r&&r(function(e,t,n,r,o){for(var i=Er.Fragment.empty,a=n.length-1;0<=a;a--)i=Er.Fragment.from(n[a].type.create(n[a].attrs,i));e.step(new Or.ReplaceAroundStep(t.start-(r?2:0),t.end,t.start,t.end,new Er.Slice(i,0,0),n.length,!0));for(var s=0,l=0;l<n.length;l++)n[l].type==o&&(s=l+1);for(var c=n.length-s,u=t.start+n.length-(r?2:0),p=t.parent,d=t.startIndex,h=t.endIndex,f=!0;d<h;d++,f=!1)!f&&Or.canSplit(e.doc,u,c)&&(e.split(u,c),u+=2*c),u+=p.child(d).nodeSize;return e}(n.tr,s,p,l,e).scrollIntoView()),!0)}},t.splitListItem=function(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=r.node;if(a&&a.isBlock||o.depth<2||!o.sameParent(i))return!1;var s=o.node(-1);if(s.type!=e)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var l=Er.Fragment.empty,c=0<o.index(-1),u=o.depth-(c?1:2);u>=o.depth-3;u--)l=Er.Fragment.from(o.node(u).copy(l));l=l.append(Er.Fragment.from(e.createAndFill()));var p=t.tr.replace(o.before(c?null:-1),o.after(-3),new Er.Slice(l,c?3:2,2));p.setSelection(t.selection.constructor.near(p.doc.resolve(o.pos+(c?3:2)))),n(p.scrollIntoView())}return!0}var d=i.pos==o.end()?s.defaultContentType(0):null,h=t.tr.delete(o.pos,i.pos),f=d&&[null,{type:d}];return!!Or.canSplit(h.doc,o.pos,2,f)&&(n&&n(h.split(o.pos,2,f).scrollIntoView()),!0)}},t.liftListItem=function(e){return function(t,n){var r,o,i,a,s,l,c=t.selection,u=c.$from,p=c.$to,d=u.blockRange(p,(function(t){return t.childCount&&t.firstChild.type==e}));return!!d&&(!n||(u.node(d.depth-1).type==e?(r=n,o=e,i=d,a=t.tr,(s=i.end)<(l=i.$to.end(i.depth))&&(a.step(new Or.ReplaceAroundStep(s-1,l,s,l,new Er.Slice(Er.Fragment.from(o.create(null,i.parent.copy())),1,0),1,!0)),i=new Er.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(l),i.depth)),r(a.lift(i,Or.liftTarget(i)).scrollIntoView()),!0):function(e,t,n){for(var r=e.tr,o=n.parent,i=n.end,a=n.endIndex-1,s=n.startIndex;s<a;a--)i-=o.child(a).nodeSize,r.delete(i-1,i+1);var l=r.doc.resolve(n.start),c=l.nodeAfter,u=0==n.startIndex,p=n.endIndex==o.childCount,d=l.node(-1),h=l.index(-1);if(!d.canReplace(h+(u?0:1),h+1,c.content.append(p?Er.Fragment.empty:Er.Fragment.from(o))))return!1;var f=l.pos,m=f+c.nodeSize;return r.step(new Or.ReplaceAroundStep(f-(u?1:0),m+(p?1:0),f+1,m-1,new Er.Slice((u?Er.Fragment.empty:Er.Fragment.from(o.copy(Er.Fragment.empty))).append(p?Er.Fragment.empty:Er.Fragment.from(o.copy(Er.Fragment.empty))),u?0:1,p?0:1),u?0:1)),t(r.scrollIntoView()),!0}(t,n,d)))}},t.sinkListItem=function(e){return function(t,n){var r=t.selection,o=r.$from,i=r.$to,a=o.blockRange(i,(function(t){return t.childCount&&t.firstChild.type==e}));if(!a)return!1;var s=a.startIndex;if(0==s)return!1;var l=a.parent,c=l.child(s-1);if(c.type!=e)return!1;if(n){var u=c.lastChild&&c.lastChild.type==l.type,p=Er.Fragment.from(u?e.create():null),d=new Er.Slice(Er.Fragment.from(e.create(null,Er.Fragment.from(l.copy(p)))),u?3:1,0),h=a.start,f=a.end;n(t.tr.step(new Or.ReplaceAroundStep(h-(u?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}}));g(ii),ii.orderedList,ii.bulletList,ii.listItem,ii.addListNodes;var ai=ii.wrapInList,si=ii.splitListItem,li=ii.liftListItem,ci=ii.sinkListItem,ui=function(e,t){var n=e.state,r=e.dispatch,o=n.selection.$anchor,i=n.schema.nodes,a=o.node(o.depth-2),s=a&&a.type.name,l=o.node(o.depth-1);return(l&&l.type.name)===i.listItem.name?s!==t?(li(i.listItem)(e.state,e.dispatch),ai(i[t])(e.state,r)):pi(i.listItem,e):ai(i[t])(n,r)},pi=function(e,t){for(var n=t.state.selection.$from.depth;1<n;)li(e)(t.state,t.dispatch),n=t.state.selection.$from.depth;return!0},di={"mod-shift-7":function(e,t){return ui("orderedList")(e,t)},"mod-shift-8":function(e,t){return ui("bulletList")(e,t)},Enter:function(e,t){return r=t,o=(n=e).selection.$anchor,i=n.schema.nodes,(a=o.node(o.depth-1)).type===i.listItem&&(0<a.textContent.length?si(i.listItem)(n,r):li(i.listItem)(n,r));var n,r,o,i,a},Tab:function(e,t){return ci(e.schema.nodes.listItem)(e,t)},"shift-Tab":function(e,t){return li(e.schema.nodes.listItem)(e,t)}},hi={orderedList:{key:"mod-shift-7",label:"Numbered List"},bulletList:{key:"mod-shift-8",label:"Bullet List"}},fi=function(e){var t=e.schema.nodes,n=t.bulletList,r=t.orderedList,o=e.selection.$from.node(-2);if(o&&(o.type===n||o.type===r))return o.type},mi=new Nr("list"),vi=new Rr({key:mi,state:{init:function(e,t){return{selectedListType:fi(t)}},apply:function(e,t,n,r){return e.docChanged||n.selection!==r.selection?{selectedListType:fi(r)}:t}}}),gi={name:"list",keymaps:di,KeymapInfo:hi,toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).toggleList=function(e){var t=e.currentTarget.getAttribute("name"),r=n.props.app_params.view;ui(r,t)},n.getSelectedListType=function(){var e=n.props.app_params.view,t=(e=void 0===e?{}:e).state;if(t){var r=mi.getState(t),o=r&&r.selectedListType;return o&&o.name}},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){var e=this.getSelectedListType();return r.createElement(r.Fragment,null,r.createElement(Ye,{name:"bulletList",onClick:this.toggleList,selected:"bulletList"===e,title:Hr(hi.bulletList)},r.createElement(nt.ListBulleted,null)),r.createElement(dr,{type:"toolbar"}),r.createElement(Ye,{name:"orderedList",onClick:this.toggleList,selected:"orderedList"===e,title:Hr(hi.orderedList)},r.createElement(nt.ListNumbered,null)))}}]),t}(),plugin:vi,schema:{nodes:["heading","bulletList","listItem","orderedList"]}},yi=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),o=/MSIE \d/.test(navigator.userAgent),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);var a=n.ie=!!(o||i||r);n.ie_version=o?document.documentMode||6:i?+i[1]:r?+r[1]:null,n.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var s=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!s,n.chrome_version=s&&+s[1],n.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit=!a&&"WebkitAppearance"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},c=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},u=function(e,t,n){var r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},p=function(e,t,n,r){return n&&(h(e,t,n,r,-1)||h(e,t,n,r,1))},d=/^(img|br|input|textarea|hr)$/i;function h(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:f(e))||3==e.nodeType&&"\ufeff"==e.nodeValue){var i=e.parentNode;if(1!=i.nodeType||(a=e.pmViewDesc)&&a.node&&a.node.isBlock||d.test(e.nodeName)||"false"==e.contentEditable)return!1;t=l(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(o<0?-1:0)],t=o<0?f(e):0}}var a}function f(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}var m=function(e){var t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function v(e,t){return"number"==typeof e?e:e[t]}function g(e,t,n){for(var r,o=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,a=e.dom.ownerDocument,s=a.defaultView,l=n||e.dom;l;l=c(l))if(1==l.nodeType){var u=l==a.body||1!=l.nodeType,p=u?{left:0,right:(r=s).innerWidth,top:0,bottom:r.innerHeight}:l.getBoundingClientRect(),d=0,h=0;if(t.top<p.top+v(o,"top")?h=-(p.top-t.top+v(i,"top")):t.bottom>p.bottom-v(o,"bottom")&&(h=t.bottom-p.bottom+v(i,"bottom")),t.left<p.left+v(o,"left")?d=-(p.left-t.left+v(i,"left")):t.right>p.right-v(o,"right")&&(d=t.right-p.right+v(i,"right")),(d||h)&&(u?s.scrollBy(d,h):(h&&(l.scrollTop+=h),d&&(l.scrollLeft+=d))),u)break}}function y(e,t){for(var n,r,o=2e8,i=0,a=t.top,s=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var p=void 0;if(1==l.nodeType)p=l.getClientRects();else{if(3!=l.nodeType)continue;p=u(l).getClientRects()}for(var d=0;d<p.length;d++){var h=p[d];if(h.top<=a&&h.bottom>=s){a=Math.max(h.bottom,a),s=Math.min(h.top,s);var f=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(f<o){n=l,r=(o=f)&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==l.nodeType&&f&&(i=c+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=C(r,1);if(i.top!=i.bottom&&b(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:e,offset:i}:y(n,r)}function b(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function w(e,t){var n,r,o=e.root;if(o.caretPositionFromPoint){var i,a=o.caretPositionFromPoint(t.left,t.top);a&&(n=(i=a).offsetNode,r=i.offset)}if(!n&&o.caretRangeFromPoint){var s,l=o.caretRangeFromPoint(t.left,t.top);l&&(n=(s=l).startContainer,r=s.startOffset)}var c,u,p,d,h=o.elementFromPoint(t.left,t.top+1);if(!h||!e.dom.contains(1!=h.nodeType?h.parentNode:h)){var f=e.dom.getBoundingClientRect();if(!b(t,f))return null;if(!(h=function e(t,n,r){var o=t.childNodes.length;if(o&&r.top<r.bottom)for(var i=Math.max(0,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2),a=i;;){var s=t.childNodes[a];if(1==s.nodeType)for(var l=s.getClientRects(),c=0;c<l.length;c++){var u=l[c];if(b(n,u))return e(s,n,u)}if((a=(a+1)%o)==i)break}return t}(e.dom,t,f)))return null}p=t,h=(d=(u=h).parentNode)&&/^li$/i.test(d.nodeName)&&p.left<u.getBoundingClientRect().left?d:u,n&&(n==e.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(c=function(e,t,n,r){for(var o=-1,i=t;i!=e.dom;){var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(a.node.isBlock&&a.parent){var s=a.dom.getBoundingClientRect();if(s.left>r.left||s.top>r.top)o=a.posBefore;else{if(!(s.right<r.left||s.bottom<r.top))break;o=a.posAfter}}i=a.dom.parentNode}return-1<o?o:e.docView.posFromDOM(t,n)}(e,n,r,t))),null==c&&(c=function(e,t,n){var r=y(t,n),o=r.node,i=r.offset,a=-1;if(1==o.nodeType&&!o.firstChild){var s=o.getBoundingClientRect();a=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return e.docView.posFromDOM(o,i,a)}(e,h,t));var m=e.docView.nearestDesc(h,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function C(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function k(e,t){var n,r,o=e.docView.domFromPos(t),i=o.node,a=o.offset;if(3==i.nodeType)a<i.nodeValue.length&&(r=C(u(i,a,a+1),-1),n="left"),r&&r.left!=r.right||!a||(r=C(u(i,a-1,a),1),n="right");else if(i.firstChild){if(a<i.childNodes.length){var s=i.childNodes[a];r=C(3==s.nodeType?u(s):s,-1),n="left"}if((!r||r.top==r.bottom)&&a){var l=i.childNodes[a-1];r=C(3==l.nodeType?u(l):l,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var c=r[n];return{top:r.top,bottom:r.bottom,left:c,right:c}}function S(e,t,n){var r=e.state,o=e.root.activeElement;r==t&&e.inDOMChange||e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o.focus()}}var x=/[\u0590-\u08ac]/,E=null,M=null,O=!1;function A(e,t,n){return E==t&&M==n?O:(E=t,O="up"==(M=n)||"down"==n?(r=e,i=n,a=(o=t).selection,s="up"==i?a.$anchor.min(a.$head):a.$anchor.max(a.$head),S(r,o,(function(){for(var e=r.docView.domFromPos(s.pos).node;;){var t=r.docView.nearestDesc(e,!0);if(!t)break;if(t.node.isBlock){e=t.dom;break}e=t.dom.parentNode}for(var n=k(r,s.pos),o=e.firstChild;o;o=o.nextSibling){var a=void 0;if(1==o.nodeType)a=o.getClientRects();else{if(3!=o.nodeType)continue;a=u(o,0,o.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==i?c.bottom<n.top+1:c.top>n.bottom-1))return!1}}return!0}))):function(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,a=o==r.parent.content.size,s=getSelection();return x.test(r.parent.textContent)&&s.modify?S(e,t,(function(){var t=s.getRangeAt(0),o=s.focusNode,i=s.focusOffset;s.modify("move",n,"character");var a=!(r.depth?e.docView.domAfterPos(r.before()):e.dom).contains(1==s.focusNode.nodeType?s.focusNode:s.focusNode.parentNode)||o==s.focusNode&&i==s.focusOffset;return s.removeAllRanges(),s.addRange(t),a})):"left"==n||"backward"==n?i:a}(e,t,n));var r,o,i,a,s}var D=function(e,t,n,r){this.parent=e,this.children=t,((this.dom=n).pmViewDesc=this).contentDOM=r,this.dirty=0},T={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};D.prototype.matchesWidget=function(){return!1},D.prototype.matchesMark=function(){return!1},D.prototype.matchesNode=function(){return!1},D.prototype.matchesHack=function(){return!1},T.beforePosition.get=function(){return!1},D.prototype.parseRule=function(){return null},D.prototype.stopEvent=function(){return!1},T.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},T.border.get=function(){return 0},D.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},D.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var r=this.children[t];if(r==e)return n;n+=r.size}},T.posBefore.get=function(){return this.parent.posBeforeChild(this)},T.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},T.posAfter.get=function(){return this.posBefore+this.size},T.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},D.prototype.localPosFromDOM=function(e,t,n){var r;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var o,i;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var a,s;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&(!(s=a.pmViewDesc)||s.parent!=this);)a=a.nextSibling;return a?this.posBeforeChild(s):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){r=!1;break}if(l.parentNode.firstChild!=l)break}if(null==r&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){r=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==r?0<n:r)?this.posAtEnd:this.posAtStart},D.prototype.nearestDesc=function(e,t){for(var n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(e):o.nodeDOM==e))return o;n=!1}}},D.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},D.prototype.posFromDOM=function(e,t,n){for(var r=e;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}},D.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}},D.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,n=0;;n++){if(t==e){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+e);var r=this.children[n],o=t+r.size;if(e<o)return r.domFromPos(e-t-r.border);t=o}},D.prototype.parseRange=function(e,t,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=0,a=0;;a++){var s=this.children[a],c=i+s.size;if(-1==r&&e<=c){var u=i+s.border;if(u<=e&&t<=c-s.border&&s.node&&s.contentDOM&&this.contentDOM.contains(s.contentDOM))return s.parseRange(e-u,t-u,n+u);e=n+i;for(var p=a;0<p;p--){var d=this.children[p-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=l(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(-1<r&&t<=c){t=n+c;for(var h=a+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=l(f.dom);break}t+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}},D.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},D.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]},D.prototype.setSelection=function(e,t,n,r){for(var o=Math.min(e,t),i=Math.max(e,t),a=0,s=0;a<this.children.length;a++){var l=this.children[a],c=s+l.size;if(s<o&&i<c)return l.setSelection(e-s-l.border,t-s-l.border,n,r);s=c}var u=this.domFromPos(e),d=this.domFromPos(t),h=n.getSelection(),f=document.createRange();if(r||!p(u.node,u.offset,h.anchorNode,h.anchorOffset)||!p(d.node,d.offset,h.focusNode,h.focusOffset)){if(h.extend)f.setEnd(u.node,u.offset),f.collapse(!1);else{if(t<e){var m=u;u=d,d=m}f.setEnd(d.node,d.offset),f.setStart(u.node,u.offset)}h.removeAllRanges(),h.addRange(f),h.extend&&h.extend(d.node,d.offset)}},D.prototype.ignoreMutation=function(e){return!this.contentDOM},T.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},D.prototype.markDirty=function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&n<=t:e<i&&n<t){var a=n+o.border,s=i-o.border;if(a<=e&&t<=s)return this.dirty=e==n||t==i?2:1,void(e==a&&t==s&&o.contentLost?o.dirty=3:o.markDirty(e-a,t-a));o.dirty=3}n=i}this.dirty=2},Object.defineProperties(D.prototype,T);var R=[],N=function(e){function t(t,n,r,o){var i,a=n.type.toDOM;if("function"==typeof a&&(a=a(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=a.nodeType){var s=document.createElement("span");s.appendChild(a),a=s}a.contentEditable=!1,a.classList.add("ProseMirror-widget")}e.call(this,t,R,a,null),this.widget=n,i=this}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(D),P=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){for(var t,n=this.dom.firstChild;n;n=n.nextSibling){var r=void 0;if(3==n.nodeType){var o=n.nodeValue.replace(/\ufeff/g,"");if(!o)continue;r=document.createTextNode(o)}else{if("\ufeff"==n.textContent)continue;r=n.cloneNode(!0)}t||(t=document.createDocumentFragment()),t.appendChild(r)}return t?{skip:t}:e.prototype.parseRule.call(this)},t.prototype.ignoreMutation=function(){return!1},t}(N),F=function(e){function t(t,n,r,o){e.call(this,t,[],r,o),this.mark=n}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).create=function(e,n,r,o){var i=o.nodeViews[n.type.name],a=i&&i(n,o,r);return a&&a.dom||(a=Er.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},t}(D),I=function(e){function t(t,n,r,o,i,a,s,l,c){e.call(this,t,n.isLeaf?R:[],i,a),this.nodeDOM=s,this.node=n,this.outerDeco=r,this.innerDeco=o,a&&this.updateChildren(l,c)}e&&(t.__proto__=e);var r={size:{},border:{}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).create=function(e,n,r,o,i,a){var s,l=i.nodeViews[n.type.name],c=l&&l(n,i,(function(){return s?s.parent?s.parent.posBeforeChild(s):void 0:a}),r),u=c&&c.dom,p=c&&c.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else if(!u){var d;u=(d=Er.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,p=d.contentDOM}p||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var h=u;return u=K(u,r,n),c?s=new _(e,n,r,o,u,p,h,c,i,a+1):n.isText?new B(e,n,r,o,u,h,i):new t(e,n,r,o,u,p,h,i,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?Er.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&U(t,this.outerDeco)&&n.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,r=new J(this),o=this.node.inlineContent;!function(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var a=0,s=[],l=null,c=0;;){if(a<o.length&&o[a].to==i){for(var u=o[a++],p=void 0;a<o.length&&o[a].to==i;)(p||(p=[u])).push(o[a++]);if(p){p.sort(G);for(var d=0;d<p.length;d++)n(p[d],c)}else n(u,c)}var h=void 0;if(l)h=l,l=null;else{if(!(c<e.childCount))break;h=e.child(c++)}for(var f=0;f<s.length;f++)s[f].to<=i&&s.splice(f--,1);for(;a<o.length&&o[a].from==i;)s.push(o[a++]);var m=i+h.nodeSize;if(h.isText){var v=m;a<o.length&&o[a].from<v&&(v=o[a].from);for(var g=0;g<s.length;g++)s[g].to<v&&(v=s[g].to);v<m&&(l=h.cut(v-i),h=h.cut(0,v-i),m=v)}r(h,s.length?s.slice():R,t.forChild(i,h),c-1),i=m}else for(var y=0;y<e.childCount;y++){var b=e.child(y);r(b,o,t.forChild(i,b),y),i+=b.nodeSize}}(this.node,this.innerDeco,(function(i,a){i.spec.marks?r.syncToMarks(i.spec.marks,o,e):0<=i.type.side&&r.syncToMarks(a==n.node.childCount?Er.Mark.none:n.node.child(a).marks,o,e),r.placeWidget(i,e,t)}),(function(n,i,a,s){r.syncToMarks(n.marks,o,e),r.findNodeMatch(n,i,a,s)||r.updateNextNode(n,i,a,e,s)||r.addNode(n,i,a,e,t),t+=n.nodeSize})),r.syncToMarks(R,o,e),this.node.isTextblock&&r.addTextblockHacks(),r.destroyRest(),(r.changed||2==this.dirty)&&this.renderChildren()},t.prototype.renderChildren=function(){!function e(t,n){for(var r=t.firstChild,o=0;o<n.length;o++){var i=n[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=q(r);r=r.nextSibling}else t.insertBefore(a,r);if(i instanceof F){var s=r?r.previousSibling:t.lastChild;e(i.contentDOM,i.children),r=s?s.nextSibling:t.firstChild}}for(;r;)r=q(r)}(this.contentDOM,this.children),n.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.update=function(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)},t.prototype.updateInner=function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!U(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=j(this.dom,this.nodeDOM,W(this.outerDeco,this.node,t),W(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(t.prototype,r),t}(D);function L(e,t,n,r,o){return K(r,t,e),new I(null,e,t,n,r,r,r,o,0)}var B=function(e){function t(t,n,r,o,i,a,s){e.call(this,t,n,r,o,i,null,a,s)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){var e=this.nodeDOM.parentNode;return e?{skip:e}:{ignore:!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,!(this.dirty=0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,r)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type},t}(I),z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(D),_=function(e){function t(t,n,r,o,i,a,s,l,c,u){e.call(this,t,n,r,o,i,a,s,c,u),this.spec=l}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.update=function(t,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,r,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,r,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,r,o){this.spec.setSelection?this.spec.setSelection(t,n,r):e.prototype.setSelection.call(this,t,n,r,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(I);function V(e){e&&(this.nodeName=e)}V.prototype=Object.create(null);var $=[new V];function W(e,t,n){if(0==e.length)return $;for(var r=n?$[0]:new V,o=[r],i=0;i<e.length;i++){var a=e[i].type.attrs,s=r;if(a)for(var l in a.nodeName&&o.push(s=new V(a.nodeName)),a){var c=a[l];null!=c&&(n&&1==o.length&&o.push(s=r=new V(t.isInline?"span":"div")),"class"==l?s.class=(s.class?s.class+" ":"")+c:"style"==l?s.style=(s.style?s.style+";":"")+c:"nodeName"!=l&&(s[l]=c))}}return o}function j(e,t,n,r){if(n==$&&r==$)return t;for(var o=t,i=0;i<r.length;i++){var a=r[i],s=n[i];if(i){var l=void 0;s&&s.nodeName==a.nodeName&&o!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==a.nodeName||(l=document.createElement(a.nodeName)).appendChild(o),o=l}H(o,s||$[0],a)}return o}function H(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):R,a=n.class?n.class.split(" "):R,s=0;s<i.length;s++)-1==a.indexOf(i[s])&&e.classList.remove(i[s]);for(var l=0;l<a.length;l++)-1==i.indexOf(a[l])&&e.classList.add(a[l])}if(t.style!=n.style){if(t.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function K(e,t,n){return j(e,e,$,W(t,n,1!=e.nodeType))}function U(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function q(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var J=function(e){this.top=e,this.index=0,this.stack=[],this.changed=!1,this.preMatched=function(e,t){for(var n=[],r=e.childCount,o=t.length-1;0<r&&0<=o;o--){var i=t[o],a=i.node;if(a){if(a!=e.child(r-1))break;n[--r]=i}}return n}(e.node.content,e.children)};function G(e,t){return e.type.side-t.type.side}function X(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=0<t?r.max(o):r.min(o),a=i.parent.inlineContent?i.depth?e.doc.resolve(0<t?i.after():i.before()):null:i;return a&&Ar.Selection.findFrom(a,t)}function Y(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Z(e,t,n){var r=e.state.selection;if(r instanceof Ar.TextSelection){if(!r.empty||-1<n.indexOf("s"))return!1;if(e.endOfTextblock(0<t?"right":"left")){var o=X(e.state,t);return!!(o&&o instanceof Ar.NodeSelection)&&Y(e,o)}var i,a=r.$head,s=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(s&&Ar.NodeSelection.isSelectable(s)){var l=t<0?a.pos-s.nodeSize:a.pos;if(s.isAtom||(i=e.docView.descAt(l))&&!i.contentDOM)return Y(e,new Ar.NodeSelection(t<0?e.state.doc.resolve(a.pos-s.nodeSize):a))}return!1}if(r instanceof Ar.NodeSelection&&r.node.isInline)return Y(e,new Ar.TextSelection(0<t?r.$to:r.$from));var c=X(e.state,t);return!!c&&Y(e,c)}function Q(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ee(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function te(e){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r){var i,a,s=!1;for(n.gecko&&1==r.nodeType&&o<Q(r)&&ee(r.childNodes[o])&&(s=!0);;)if(0<o)if(1!=r.nodeType){if(3!=r.nodeType||"\ufeff"!=r.nodeValue.charAt(o-1))break;n.ie&&n.ie_version<=11&&(s=!0),i=r,a=--o}else{var c=r.childNodes[o-1];if(ee(c))i=r,a=--o;else{if(3!=c.nodeType)break;o=(r=c).nodeValue.length}}else{if(re(r))break;for(var u=r.previousSibling;u&&ee(u);)i=r.parentNode,a=l(u),u=u.previousSibling;if(u)o=Q(r=u);else{if((r=r.parentNode)==e.dom)break;o=0}}s?oe(e,t,r,o):i&&oe(e,t,i,a)}}function ne(e){var t=e.root.getSelection(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,a=Q(n);;)if(r<a){if(1!=n.nodeType)break;if(!ee(n.childNodes[r]))break;o=n,i=++r}else{if(re(n))break;for(var s=n.nextSibling;s&&ee(s);)o=s.parentNode,i=l(s)+1,s=s.nextSibling;if(s)r=0,a=Q(n=s);else{if((n=n.parentNode)==e.dom)break;r=a=0}}o&&oe(e,t,o,i)}}function re(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function oe(e,t,n,r){if(m(t)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(n,r);e.selectionReader.storeDOMState(e.selection)}function ie(e,t,n){var r=e.state.selection;if(r instanceof Ar.TextSelection&&!r.empty||-1<n.indexOf("s"))return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=X(e.state,t);if(a&&a instanceof Ar.NodeSelection)return Y(e,a)}if(o.parent.inlineContent)return!1;var s=Ar.Selection.findFrom(t<0?o:i,t);return!s||Y(e,s)}function ae(e,t){if(!(e.state.selection instanceof Ar.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(0<t?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(!a||a.isText)return!1;var s=e.state.tr;return t<0?s.delete(r.pos-a.nodeSize,r.pos):s.delete(r.pos,r.pos+a.nodeSize),e.dispatch(s),!0}function se(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function le(e,t){var r,o,i=t.keyCode,a=(o="",(r=t).ctrlKey&&(o+="c"),r.metaKey&&(o+="m"),r.altKey&&(o+="a"),r.shiftKey&&(o+="s"),o);return 8==i||n.mac&&72==i&&"c"==a?ae(e,-1)||te(e):46==i||n.mac&&68==i&&"c"==a?ae(e,1)||ne(e):13==i||27==i||(37==i?Z(e,-1,a)||te(e):39==i?Z(e,1,a)||ne(e):38==i?ie(e,-1,a)||te(e):40==i?function(e){if(n.chrome&&!(0<e.state.selection.$head.parentOffset)){var t=e.root.getSelection(),r=t.focusNode,o=t.focusOffset;if(r&&1==r.nodeType&&0==o&&r.firstChild&&"false"==r.firstChild.contentEditable){var i=r.firstChild;se(e,i,!0),setTimeout((function(){return se(e,i,!1)}),20)}}}(e)||ie(e,1,a)||ne(e):a==(n.mac?"m":"c")&&(66==i||73==i||89==i||90==i))}J.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},J.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},J.prototype.syncToMarks=function(e,t,n){for(var r=this,o=0,i=this.stack.length>>1,a=Math.min(i,e.length);o<a&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<i;)r.destroyRest(),r.top.dirty=0,r.index=r.stack.pop(),r.top=r.stack.pop(),i--;for(;i<e.length;){r.stack.push(r.top,r.index+1);for(var s=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(r.top.children[l].matchesMark(e[i])){s=l;break}if(-1<s)s>r.index&&(r.changed=!0,r.top.children.splice(r.index,s-r.index)),r.top=r.top.children[r.index];else{var c=F.create(r.top,e[i],t,n);r.top.children.splice(r.index,0,c),r.top=c,r.changed=!0}r.index=0,i++}},J.prototype.findNodeMatch=function(e,t,n,r){var o=-1,i=this.preMatched[r],a=this.top.children;if(i&&i.matchesNode(e,t,n))o=a.indexOf(i);else for(var s=this.index,l=Math.min(a.length,s+5);s<l;s++){var c=a[s];if(c.matchesNode(e,t,n)&&this.preMatched.indexOf(c)<0){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},J.prototype.updateNextNode=function(e,t,n,r,o){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof I){var a=this.preMatched.indexOf(i);if(-1<a&&a!=o)return!1;var s=i.dom;if(i.update(e,t,n,r))return i.dom!=s&&(this.changed=!0),this.index++,!0}return!1},J.prototype.addNode=function(e,t,n,r,o){this.top.children.splice(this.index++,0,I.create(this.top,e,t,n,r,o)),this.changed=!0},J.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var r=new(e.spec.isCursorWrapper?P:N)(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},J.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof F;)e=e.children[e.children.length-1];if(!e||!(e instanceof B)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new z(this.top,R,t,null)),this.changed=!0}};var ce=function(e,t,n){this.prev=e,this.mapping=t,this.state=n},ue=function(e){this.seen=[new ce(null,null,e)],Ar.EditorState.addApplyListener(this.track=this.track.bind(this))};ue.prototype.destroy=function(){Ar.EditorState.removeApplyListener(this.track)},ue.prototype.find=function(e){for(var t=this.seen.length-1;0<=t;t--){var n=this.seen[t];if(n.state==e)return n}},ue.prototype.track=function(e,t,n){var r=this.seen.length<200?this.find(e):null;r&&this.seen.push(new ce(r,t.docChanged?t.mapping:null,n))},ue.prototype.getMapping=function(e,t){var n=this.find(e);if(!n)return null;for(var r=[],o=n;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var i=t||new Or.Mapping,a=r.length-1;0<=a;a--)i.appendMapping(r[a]);return i};var pe=function(e){var t=this;this.view=e,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=e.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=new("onselectionchange"in document?de:he)(this),this.focusFunc=function(){return t.poller.start(be(t.view))}.bind(this),this.blurFunc=this.poller.stop,e.dom.addEventListener("focus",this.focusFunc),e.dom.addEventListener("blur",this.blurFunc),e.editable||this.poller.start(!1)};pe.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},pe.prototype.poll=function(e){this.poller.poll(e)},pe.prototype.editableChanged=function(){this.view.editable?be(this.view)||this.poller.stop():this.poller.start()},pe.prototype.domChanged=function(){var e=this.view.root.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastHeadNode||e.focusOffset!=this.lastHeadOffset},pe.prototype.storeDOMState=function(e){var t=this.view.root.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastHeadNode=t.focusNode,this.lastHeadOffset=t.focusOffset,this.lastSelection=e},pe.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},pe.prototype.readFromDOM=function(e){if(!this.ignoreUpdates&&this.domChanged()&&be(this.view)){if(this.suppressUpdates)return fe(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var t,n,r=this.view.root.getSelection(),o=this.view.state.doc,i=this.view.docView.nearestDesc(r.focusNode),a=i&&0==i.size,s=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(s);if(m(r)){for(t=l;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Ar.NodeSelection.isSelectable(i.node)&&i.parent){var c=i.posBefore;n=new Ar.NodeSelection(s==c?l:o.resolve(c))}}else t=o.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!n){var u="pointer"==e||this.view.state.selection.head<l.pos&&!a?1:-1;n=ye(this.view,t,l,u)}if(this.view.state.selection.eq(n))fe(this.view);else{var p=this.view.state.tr.setSelection(n);"pointer"==e?p.setMeta("pointer",!0):"key"==e&&p.scrollIntoView(),this.view.dispatch(p)}}}};var de=function(e){var t=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=e,this.readFunc=function(){return e.readFromDOM(t.originTime>Date.now()-50?t.curOrigin:null)}};de.prototype.poll=function(e){this.curOrigin=e,this.originTime=Date.now()},de.prototype.start=function(e){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,e&&this.readFunc())},de.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var he=function(e){this.polling=null,this.reader=e,this.pollFunc=this.doPoll.bind(this,null)};function fe(e,t,r){var o=e.state.selection;if(function(e,t){if(t instanceof Ar.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ge(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ge(e)}(e,o),e.editable&&!e.hasFocus()){if(!t)return;n.gecko&&n.gecko_version<=55&&(e.selectionReader.ignoreUpdates=!0,e.dom.focus(),e.selectionReader.ignoreUpdates=!1)}else if(!e.editable&&!we(e)&&!t)return;var i=e.selectionReader;if(!i.lastSelection||!i.lastSelection.eq(o)||i.domChanged()){if(i.ignoreUpdates=!0,e.cursorWrapper)p=(u=e).root.getSelection(),d=document.createRange(),h=u.cursorWrapper.dom,d.setEnd(h,h.childNodes.length),d.collapse(!1),p.removeAllRanges(),p.addRange(d),!u.state.selection.visible&&n.ie&&n.ie_version<=11&&(h.disabled=!0,h.disabled=!1);else{var a,s,l=o.anchor,c=o.head;!me||o instanceof Ar.TextSelection||(o.$from.parent.inlineContent||(a=ve(e,o.from)),o.empty||o.$from.parent.inlineContent||(s=ve(e,o.to))),e.docView.setSelection(l,c,e.root,r),me&&(a&&(a.contentEditable="false"),s&&(s.contentEditable="false")),o.visible?e.dom.classList.remove("ProseMirror-hideselection"):l!=c&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}var u,p,d,h;i.storeDOMState(o),i.ignoreUpdates=!1}}he.prototype.doPoll=function(e){var t=this.reader.view;t.focused||!t.editable?(this.reader.readFromDOM(e),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},he.prototype.poll=function(e){clearTimeout(this.polling),this.polling=setTimeout(e?this.doPoll.bind(this,e):this.pollFunc,0)},he.prototype.start=function(){null==this.polling&&this.poll()},he.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var me=n.safari||n.chrome&&n.chrome_version<63;function ve(e,t){var n=e.docView.domFromPos(t),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return i.contentEditable="true",i;if(a)return a.contentEditable="true",a}}function ge(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function ye(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||Ar.TextSelection.between(t,n,r)}function be(e){return(!e.editable||e.root.activeElement==e.dom)&&we(e)}function we(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ce(e){return!1===e.type.spec.inclusive}function ke(e){var t=e.selection,n=t.$head,r=t.$anchor,o=t.visible,i=n.pos!=r.pos||o&&!n.parent.inlineContent?null:n;return i&&(!o||e.storedMarks||0==i.parent.content.length||i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.some(Ce))?i:null}var Se=function e(t,n){var r=this;this.view=t,this.state=t.state,this.composing=n,this.compositionEndedAt=null,this.from=this.to=null,this.typeOver=!1,this.timeout=n?null:setTimeout((function(){return r.finish()}),e.commitTimeout),this.trackMappings=new ue(t.state),this.mapping=new Or.Mapping,this.mappingTo=t.state};function xe(e,t){for(var n=t||0;n<e.depth;n++)if(e.index(n)+1<e.node(n).childCount)return!1;return e.parentOffset==e.parent.content.size}function Ee(e,t){for(var n=t||0;n<e.depth;n++)if(0<e.index(0))return!1;return 0==e.parentOffset}function Me(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function Oe(e,t,n,r){return Math.max(r.anchor,r.head)>t.content.size?null:ye(e,t.resolve(n.map(r.anchor)),t.resolve(n.map(r.head)))}function Ae(e,t,n){for(var r=e.depth,o=t?e.end():e.pos;0<r&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n)for(var i=e.node(r).maybeChild(e.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function De(e,t){for(var n=[],r=t.content,o=t.openStart,i=t.openEnd;1<o&&1<i&&1==r.childCount&&1==r.firstChild.childCount;){o--,i--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var s=e.someProp("clipboardSerializer")||Er.DOMSerializer.fromSchema(e.state.schema),l=document.createElement("div");l.appendChild(s.serializeFragment(r));for(var c,u=l.firstChild;u&&1==u.nodeType&&(c=Ne[u.nodeName.toLowerCase()]);){for(var p=c.length-1;0<=p;p--){for(var d=document.createElement(c[p]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n)),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Te(e,t,n,r,o){var i,a,s=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||s||!n);if(l){if(e.someProp("transformPastedText",(function(e){t=e(t)})),s)return new Er.Slice(Er.Fragment.from(e.state.schema.text(t)),0,0);var c=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));c?a=c:(i=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){i.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){return n=e(n)})),i=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=(Pe||(Pe=document.implementation.createHTMLDocument("title"))).createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=o&&Ne[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length),r.innerHTML=e;for(var a=0;a<i;a++)r=r.firstChild;return r}(n);var u=i&&i.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||Er.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(i,{preserveWhitespace:!(!l&&!p),context:o})}return a=p?function(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var o=e.content,i=e.openStart,a=e.openEnd,s=n.length-2;0<=s;s-=2){var l=r.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;o=Er.Fragment.from(l.create(n[s+1],o)),i++,a++}return new Er.Slice(o,i,a)}(new Er.Slice(a.content,Math.min(a.openStart,+p[1]),Math.min(a.openEnd,+p[2])),p[3]):Er.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n).contentMatchAt(t.index(n)),o=void 0,i=[];if(e.forEach((function(e){if(i){var t,n=r.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&o.length&&function e(t,n,r,o,i){if(i<t.length&&i<n.length&&t[i]==n[i]){var a=e(t,n,r,o.lastChild,i+1);if(a)return o.copy(o.content.replaceChild(o.childCount-1,a));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?r.type:t[i+1]))return o.copy(o.content.append(Er.Fragment.from(Re(r,t,i+1))))}}(n,o,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=function e(t,n){if(0==n)return t;var r=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(Er.Fragment.empty,!0);return t.copy(r.append(o))}(i[i.length-1],o.length));var a=Re(e,n);i.push(a),r=r.matchType(a.type,a.attrs),o=n}}})),i)return{v:Er.Fragment.from(i)}},r=t.depth;0<=r;r--){var o=n(r);if(o)return o.v}return e}(a.content,o),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function Re(e,t,n){void 0===n&&(n=0);for(var r=t.length-1;n<=r;r--)e=t[r].create(null,Er.Fragment.from(e));return e}Se.prototype.addRange=function(e,t){null==this.from?(this.from=e,this.to=t):(this.from=Math.min(e,this.from),this.to=Math.max(t,this.to))},Se.prototype.changedRange=function(){if(null==this.from)return function(e){var t=e.$anchor.min(e.$head),n=e.$anchor.max(e.$head);if(t.sameParent(n)&&t.parent.inlineContent&&t.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,t.parentOffset),o=t.parent.content.size,i=Math.min(o,n.parentOffset);if(0<r&&(r=t.parent.childBefore(r).offset),i<o){var a=t.parent.childAfter(i);i=a.offset+a.node.nodeSize}var s=t.start();return{from:s+r,to:s+i}}for(var l=0;;l++){var c=Ee(t,l+1),u=xe(n,l+1);if(c||u||t.index(l)!=n.index(l)||n.node(l).isTextblock){var p=t.before(l+1),d=n.after(l+1);return c&&0<t.index(l)&&(p-=t.node(l).child(t.index(l)-1).nodeSize),u&&n.index(l)+1<n.node(l).childCount&&(d+=n.node(l).child(n.index(l)+1).nodeSize),{from:p,to:d}}}}(this.state.selection);var e=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),t=this.state.doc.resolve(this.to),n=e.sharedDepth(this.to);return{from:e.before(n+1),to:t.after(n+1)}},Se.prototype.markDirty=function(e){null==this.from?this.view.docView.markDirty((e=e||this.changedRange()).from,e.to):this.view.docView.markDirty(this.from,this.to)},Se.prototype.stateUpdated=function(e){return this.trackMappings.getMapping(e,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new ue(e),this.mappingTo=e,!0):(this.markDirty(),this.destroy(),!1)},Se.prototype.finish=function(e){if(clearTimeout(this.timeout),!this.composing||e){this.view.domObserver.flush();var t=this.changedRange();this.markDirty(t),this.destroy();var r=this.state.selection,o=this.typeOver&&r instanceof Ar.TextSelection&&!r.empty&&r.$head.sameParent(r.$anchor);!function(e,t,r,o,i){var a,s,l=function(e,t,r){var o=e.docView.parseRange(r.from,r.to),i=o.node,a=o.fromOffset,s=o.toOffset,l=o.from,c=o.to,u=e.root.getSelection(),p=null,d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(p=[{node:d,offset:u.anchorOffset}],m(u)||p.push({node:u.focusNode,offset:u.focusOffset})),n.chrome&&8===e.lastKeyCode)for(var h=s;a<h;h--){var f=i.childNodes[h-1],v=f.pmViewDesc;if("BR"==f.nodeType&&!v){s=h;break}if(!v||v.size)break}var g,y,b=t.doc,w=e.someProp("domParser")||Er.DOMParser.fromSchema(e.state.schema),C=b.resolve(l),k=null,S=w.parse(i,{topNode:C.parent,topMatch:C.parent.contentMatchAt(C.index()),topOpen:!0,from:a,to:s,preserveWhitespace:!C.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:(g=w,y=C,function(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(n.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName))return g.matchTag(document.createElement("li"),y);if(e.parentNode.lastChild==e||n.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}}),context:C});if(p&&null!=p[0].pos){var x=p[0].pos,E=p[1]&&p[1].pos;null==E&&(E=x),k={anchor:x+l,head:E+l}}return{doc:S,sel:k,from:l,to:c}}(e,r,o),c=r.doc,u=c.slice(l.from,l.to);s=8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(a=r.selection.to,"end"):(a=r.selection.from,"start"),e.lastKeyCode=null;var p=function(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var a=e.findDiffEnd(t,n+e.size,n+t.size),s=a.a,l=a.b;return"end"==o&&(r-=s+Math.max(0,i-Math.min(s,l))-i),s<i&&e.size<t.size?(l=(i-=r<=i&&s<=r?i-r:0)+(l-s),s=i):l<i&&(s=(i-=r<=i&&l<=r?i-r:0)+(s-l),l=i),{start:i,endA:s,endB:l}}(u.content,l.doc.content,l.from,a,s);if(p){r.selection.from<r.selection.to&&p.start==p.endB&&r.selection instanceof Ar.TextSelection&&(p.start>r.selection.from&&p.start<=r.selection.from+2?p.start=r.selection.from:p.endA<r.selection.to&&p.endA>=r.selection.to-2&&(p.endB+=r.selection.to-p.endA,p.endA=r.selection.to));var d,h=l.doc.resolveNoCache(p.start-l.from),f=l.doc.resolveNoCache(p.endB-l.from);if(!(!h.sameParent(f)&&h.pos<l.doc.content.size&&(d=Ar.Selection.findFrom(l.doc.resolve(h.pos+1),1,!0))&&d.head==f.pos&&e.someProp("handleKeyDown",(function(t){return t(e,Me(13,"Enter"))})))){if(r.selection.anchor>p.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Ae(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var a=e.resolve(Ae(i,!0,!0));return!(!a.parent.isTextblock||a.pos>n||Ae(a,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(a.parent.content)}(c,p.start,p.endA,h,f)&&e.someProp("handleKeyDown",(function(t){return t(e,Me(8,"Backspace"))})))return n.android&&n.chrome&&(e.selectionReader.suppressUpdates=!0,setTimeout((function(){return e.selectionReader.suppressUpdates=!1}),50));var v,g,y,b,w=t.map(p.start),C=t.map(p.endA,-1);if(h.sameParent(f)&&h.parent.inlineContent)if(h.pos==f.pos)v=e.state.tr.delete(w,C),g=c.resolve(p.start).marksAcross(c.resolve(p.endA));else if(p.endA==p.endB&&(b=c.resolve(p.start))&&(y=function(e,t){for(var n,r,o,i=e.firstChild.marks,a=t.firstChild.marks,s=i,l=a,c=0;c<a.length;c++)s=a[c].removeFromSet(s);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==s.length&&0==l.length)r=s[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=s.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var p=[],d=0;d<t.childCount;d++)p.push(o(t.child(d)));if(Er.Fragment.from(p).eq(e))return{mark:r,type:n}}(h.parent.content.cut(h.parentOffset,f.parentOffset),b.parent.content.cut(b.parentOffset,p.endA-b.start()))))v=e.state.tr,"add"==y.type?v.addMark(w,C,y.mark):v.removeMark(w,C,y.mark);else if(h.parent.child(h.index()).isText&&h.index()==f.index()-(f.textOffset?0:1)){var k=h.parent.textBetween(h.parentOffset,f.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,w,C,k)})))return;v=e.state.tr.insertText(k,w,C)}if(v||(v=e.state.tr.replace(w,C,l.doc.slice(p.start-l.from,p.endB-l.from))),l.sel){var S=Oe(e,v.doc,t,l.sel);S&&v.setSelection(S)}g&&v.ensureMarks(g),e.dispatch(v.scrollIntoView())}}else if(i){var x=e.state,E=x.selection;e.dispatch(x.tr.replaceSelectionWith(x.schema.text(x.doc.textBetween(E.from,E.to)),!0).scrollIntoView())}else if(l.sel){var M=Oe(e,e.state.doc,t,l.sel);M&&!M.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(M))}}(this.view,this.mapping,this.state,t,o),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Se.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Se.prototype.compositionEnd=function(e){var t=this;this.composing&&(this.composing=!1,e&&(this.compositionEndedAt=e.timeStamp),this.timeout=setTimeout((function(){return t.finish()}),50))},Se.prototype.ignoreKeyDownOnCompositionEnd=function(e){return!!(n.safari&&null!==this.compositionEndedAt&&Math.abs(e.timeStamp-this.compositionEndedAt)<500)&&!(this.compositionEndedAt=null)},Se.start=function(e,t){return e.inDOMChange?t&&(clearTimeout(e.inDOMChange.timeout),e.inDOMChange.composing=!0,e.inDOMChange.compositionEndedAt=null):e.inDOMChange=new Se(e,t),e.inDOMChange},Se.commitTimeout=20;var Ne={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pe=null,Fe={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},Ie=n.ie&&n.ie_version<=11,Le=function(e){var t=this;this.view=e,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){return t.registerMutations(e)})),Ie&&(this.onCharData=function(e){return t.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})})};Le.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fe),Ie&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},Le.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),Ie&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},Le.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},Le.prototype.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},Le.prototype.registerMutation=function(e){if(this.view.editable){var t=this.view.docView.nearestDesc(e.target);if(("attributes"!=e.type||t!=this.view.docView&&"contenteditable"!=e.attributeName)&&t&&!t.ignoreMutation(e)){var n,r;if("childList"==e.type){var o=e.previousSibling&&e.previousSibling.parentNode==e.target?l(e.previousSibling)+1:0;if(-1==o)return;n=t.localPosFromDOM(e.target,o,-1);var i=e.nextSibling&&e.nextSibling.parentNode==e.target?l(e.nextSibling):e.target.childNodes.length;if(-1==i)return;r=t.localPosFromDOM(e.target,i,1)}else"attributes"==e.type?(n=t.posAtStart-t.border,r=t.posAtEnd+t.border):(n=t.posAtStart,r=t.posAtEnd,e.target.nodeValue==e.oldValue&&(Se.start(this.view).typeOver=!0));Se.start(this.view).addRange(n,r)}}};var Be={},ze={};function _e(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ve(e,t)})}))}function Ve(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function $e(e){return{left:e.clientX,top:e.clientY}}ze.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,e.inDOMChange){if(e.inDOMChange.composing)return;if(e.inDOMChange.ignoreKeyDownOnCompositionEnd(t))return;e.inDOMChange.finish()}e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||le(e,t)?t.preventDefault():e.selectionReader.poll("key")},ze.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},ze.keypress=function(e,t){if(!(e.inDOMChange||!t.charCode||t.ctrlKey&&!t.altKey||n.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var r=e.state.selection;if(!(r instanceof Ar.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}}};var We={time:0,x:0,y:0,type:""};function je(e,t,n,r,o){if(-1==r)return!1;for(var i=e.state.doc.resolve(r),a=function(r){if(e.someProp(t,(function(t){return r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},s=i.depth+1;0<s;s--){var l=a(s);if(l)return l.v}return!1}function He(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Ke(e,t,n,r,o){return je(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?function(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof Ar.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),a=i.depth+1;0<a;a--){var s=a>i.depth?i.nodeAfter:i.node(a);if(Ar.NodeSelection.isSelectable(s)){r=n&&0<o.$from.depth&&a>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(a);break}}return null!=r&&(He(e,Ar.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Ar.NodeSelection.isSelectable(r))&&(He(e,new Ar.NodeSelection(n),"pointer"),!0)}(e,n))}function Ue(e,t,n,r){return je(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(He(e,Ar.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),o=r.depth+1;0<o;o--){var i=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(i.inlineContent)He(e,Ar.TextSelection.create(n,a+1,a+1+i.content.size),"pointer");else{if(!Ar.NodeSelection.isSelectable(i))continue;He(e,Ar.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function qe(e){return!!e.inDOMChange&&(e.inDOMChange.finish(!0),!0)}var Je=n.mac?"metaKey":"ctrlKey";Be.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n,r,o,i,a=qe(e),s=Date.now(),l="singleClick";s-We.time<500&&(n=t,(o=(r=We).x-n.clientX)*o+(i=r.y-n.clientY)*i<100)&&!t[Je]&&("singleClick"==We.type?l="doubleClick":"doubleClick"==We.type&&(l="tripleClick")),We={time:s,x:t.clientX,y:t.clientY,type:l};var c=e.posAtCoords($e(t));c&&("singleClick"==l?e.mouseDown=new Ge(e,c,t,a):("doubleClick"==l?function(e,t,n,r){return je(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}:Ue)(e,c.pos,c.inside,t)?t.preventDefault():e.selectionReader.poll("pointer"))};var Ge=function(e,t,r,o){var i,a,s=this;if(this.view=e,this.pos=t,this.event=r,this.flushed=o,this.selectNode=r[Je],this.allowDefault=r.shiftKey,-1<t.inside)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var l=e.state.doc.resolve(t.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var c=o?null:r.target,u=c?e.docView.nearestDesc(c,!0):null;this.target=u?u.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof Ar.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&n.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),e.selectionReader.poll("pointer")};Ge.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ge.prototype.up=function(e){this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)&&(this.allowDefault?(n.ie&&ke(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Ke(this.view,this.pos.pos,this.pos.inside,e,this.selectNode)?e.preventDefault():this.flushed||n.chrome&&!(this.view.state.selection instanceof Ar.TextSelection)?(He(this.view,Ar.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),e.preventDefault()):this.view.selectionReader.poll("pointer"))},Ge.prototype.move=function(e){!this.allowDefault&&(4<Math.abs(this.event.x-e.clientX)||4<Math.abs(this.event.y-e.clientY))&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},Be.touchdown=function(e){qe(e),e.selectionReader.poll("pointer")},Be.contextmenu=function(e){return qe(e)},ze.compositionstart=ze.compositionupdate=function(e){Se.start(e,!0)},ze.compositionend=function(e,t){if(!e.inDOMChange){if(!t.data)return;Se.start(e,!0)}e.inDOMChange.compositionEnd(t)},ze.input=function(e){var t=Se.start(e);t.composing||t.finish()};var Xe=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function Ye(e,t,n,r){var o=Te(e,t,n,e.shiftKey,e.state.selection.$from);if(!o)return!1;if(e.someProp("handlePaste",(function(t){return t(e,r,o)})))return!0;var i,a=0==(i=o).openStart&&0==i.openEnd&&1==i.content.childCount?i.content.firstChild:null,s=a?e.state.tr.replaceSelectionWith(a,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Be.copy=ze.cut=function(e,t){var n=e.state.selection,r="cut"==t.type;if(!n.empty){var o=Xe?null:t.clipboardData,i=De(e,n.content()),a=i.dom,s=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",s)):function(e,t){var n=t.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),e.focus()}),50)}(e,a),r&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ze.paste=function(e,t){var n,r,o,i,a,s=Xe?null:t.clipboardData;s&&(Ye(e,s.getData("text/plain"),s.getData("text/html"),t)||0<s.files.length)?t.preventDefault():(r=t,o=(n=e).dom.ownerDocument,i=n.shiftKey||n.state.selection.$from.parent.type.spec.code,a=o.body.appendChild(o.createElement(i?"textarea":"div")),i||(a.contentEditable="true"),a.style.cssText="position: fixed; left: -10000px; top: 10px",a.focus(),setTimeout((function(){n.focus(),o.body.removeChild(a),i?Ye(n,a.value,null,r):Ye(n,a.textContent,a.innerHTML,r)}),50))};var Ze=function(e,t){this.slice=e,this.move=t},Qe=n.mac?"altKey":"ctrlKey";for(var et in Be.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,o=r.empty?null:e.posAtCoords($e(t));if(o&&o.pos>=r.from&&o.pos<=(r instanceof Ar.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Ar.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(Ar.NodeSelection.create(e.state.doc,i.posBefore)))}var a=e.state.selection.content(),s=De(e,a),l=s.dom,c=s.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Xe?"Text":"text/html",l.innerHTML),Xe||t.dataTransfer.setData("text/plain",c),e.dragging=new Ze(a,!t[Qe])}},Be.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},ze.dragover=ze.dragenter=function(e,t){return t.preventDefault()},ze.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords($e(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||Te(e,t.dataTransfer.getData(Xe?"Text":"text/plain"),Xe?null:t.dataTransfer.getData("text/html"),!1,o);if(i&&(t.preventDefault(),!e.someProp("handleDrop",(function(r){return r(e,t,i,n&&n.move)})))){var a=i?Or.dropPoint(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var s=e.state.tr;n&&n.move&&s.deleteSelection();var l=s.mapping.map(a),c=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,u=s.doc;if(c?s.replaceRangeWith(l,l,i.content.firstChild):s.replaceRange(l,l,i),!s.doc.eq(u)){var p=s.doc.resolve(l);c&&Ar.NodeSelection.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild)?s.setSelection(new Ar.NodeSelection(p)):s.setSelection(ye(e,p,s.doc.resolve(s.mapping.map(a)))),e.focus(),e.dispatch(s.setMeta("uiEvent","drop"))}}}}}},Be.focus=function(e){e.focused||(e.dom.classList.add("ProseMirror-focused"),e.focused=!0)},Be.blur=function(e){e.focused&&(e.dom.classList.remove("ProseMirror-focused"),e.focused=!1)},ze)Be[et]=ze[et];function tt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var nt=function(e,t){this.spec=t||lt,this.side=this.spec.side||0,this.toDOM=e};nt.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new it(i-n,i-n,this)},nt.prototype.valid=function(){return!0},nt.prototype.eq=function(e){return this==e||e instanceof nt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tt(this.spec,e.spec))};var rt=function(e,t){this.spec=t||lt,this.attrs=e};rt.prototype.map=function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i<=o?null:new it(o,i,this)},rt.prototype.valid=function(e,t){return t.from<t.to},rt.prototype.eq=function(e){return this==e||e instanceof rt&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)},rt.is=function(e){return e.type instanceof rt};var ot=function(e,t){this.spec=t||lt,this.attrs=e};ot.prototype.map=function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new it(o.pos-n,i.pos-n,this)},ot.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),r=n.index,o=n.offset;return o==t.from&&o+e.child(r).nodeSize==t.to},ot.prototype.eq=function(e){return this==e||e instanceof ot&&tt(this.attrs,e.attrs)&&tt(this.spec,e.spec)};var it=function(e,t,n){this.from=e,this.to=t,this.type=n},at={spec:{}};it.prototype.copy=function(e,t){return new it(e,t,this.type)},it.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},it.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},it.widget=function(e,t,n){return new it(e,e,new nt(t,n))},it.inline=function(e,t,n,r){return new it(e,t,new rt(n,r))},it.node=function(e,t,n,r){return new it(e,t,new ot(n,r))},at.spec.get=function(){return this.type.spec},Object.defineProperties(it.prototype,at);var st=[],lt={},ct=function(e,t){this.local=e&&e.length?e:st,this.children=t&&t.length?t:st};ct.create=function(e,t){return t.length?mt(t,e,0,lt):ut},ct.prototype.find=function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r},ct.prototype.findInner=function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var a=this.local[i];a.from<=t&&a.to>=e&&(!o||o(a.spec))&&n.push(a.copy(a.from+r,a.to+r))}for(var s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){var l=this.children[s]+1;this.children[s+2].findInner(e-l,t-l,n,r+l,o)}},ct.prototype.map=function(e,t,n){return this==ut||0==e.maps.length?this:this.mapInner(e,t,0,0,n||lt)},ct.prototype.mapInner=function(e,t,n,r,o){for(var i,a=0;a<this.local.length;a++){var s=this.local[a].map(e,n,r);s&&s.type.valid(t,s)?(i||(i=[])).push(s):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?function(e,t,n,r,o,i,a){for(var s=e.slice(),l=function(e,t,n,r){for(var a=0;a<s.length;a+=3){var l=s[a+1],c=void 0;-1==l||l+i<e||(t>=s[a]+i?s[a+1]=-1:(c=r-n-(t-e)+(i-o))&&(s[a]+=c,s[a+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,p=0;p<s.length;p+=3)if(-1==s[p+1]){var d=n.map(s[p]+i),h=d-o;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(e[p+1]+i,-1)-o,m=r.content.findIndex(h),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==h&&g+y.nodeSize==f){var b=s[p+2].mapInner(n,y,d+1,s[p]+i+1,a);b!=ut?(s[p]=h,s[p+1]=f,s[p+2]=b):(s[p+1]=-2,u=!0)}else u=!0}if(u){var w=function(e,t,n,r,o,i,a){function s(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):a.onRemove&&a.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)s(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&s(e[l+2],t[l]+i+1);return n}(s,e,t||[],n,o,i,a),C=mt(w,r,0,a);t=C.local;for(var k=0;k<s.length;k+=3)s[k+1]<0&&(s.splice(k,3),k-=3);for(var S=0,x=0;S<C.children.length;S+=3){for(var E=C.children[S];x<s.length&&s[x]<E;)x+=3;s.splice(x,0,C.children[S],C.children[S+1],C.children[S+2])}}return new ct(t&&t.sort(vt),s)}(this.children,i,e,t,n,r,o):i?new ct(i.sort(vt)):ut},ct.prototype.add=function(e,t){return t.length?this==ut?ct.create(e,t):this.addInner(e,t,0):this},ct.prototype.addInner=function(e,t,n){var r,o=this,i=0;e.forEach((function(e,a){var s,l=a+n;if(s=ht(t,e,l)){for(r||(r=o.children.slice());i<r.length&&r[i]<a;)i+=3;r[i]==a?r[i+2]=r[i+2].addInner(e,s,l+1):r.splice(i,0,a,a+e.nodeSize,mt(s,e,l+1,lt)),i+=3}}));var a=dt(i?ft(t):t,-n);return new ct(a.length?this.local.concat(a).sort(vt):this.local,r||this.children)},ct.prototype.remove=function(e){return 0==e.length||this==ut?this:this.removeInner(e,0)},ct.prototype.removeInner=function(e,t){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,a=n[o]+t,s=n[o+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>a&&c.to<s&&(e[l]=null,(i||(i=[])).push(c));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,a+1);u!=ut?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,d=void 0;p<e.length;p++)if(d=e[p])for(var h=0;h<r.length;h++)r[h].type.eq(d.type)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new ct(r,n):ut},ct.prototype.forChild=function(e,t){var n,r;if(this==ut)return this;if(t.isLeaf)return ct.empty;for(var o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(n=this.children[o+2]);break}for(var i=e+1,a=i+t.content.size,s=0;s<this.local.length;s++){var l=this.local[s];if(l.from<a&&l.to>i&&l.type instanceof rt){var c=Math.max(i,l.from)-i,u=Math.min(a,l.to)-i;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){var p=new ct(r.sort(vt));return n?new pt([p,n]):p}return n||ut},ct.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof ct)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!1},ct.prototype.locals=function(e){return gt(this.localsInner(e))},ct.prototype.localsInner=function(e){if(this==ut)return st;if(e.inlineContent||!this.local.some(rt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof rt||t.push(this.local[n]);return t};var ut=new ct;ct.empty=ut,ct.removeOverlap=gt;var pt=function(e){this.members=e};function dt(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new it(o.from+t,o.to+t,o.type))}return n}function ht(e,t,n){if(t.isLeaf)return null;for(var r=n+t.nodeSize,o=null,i=0,a=void 0;i<e.length;i++)(a=e[i])&&a.from>n&&a.to<r&&((o||(o=[])).push(a),e[i]=null);return o}function ft(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function mt(e,t,n,r){var o=[],i=!1;t.forEach((function(t,a){var s=ht(e,t,a+n);if(s){i=!0;var l=mt(s,t,n+a+1,r);l!=ut&&o.push(a,a+t.nodeSize,l)}}));for(var a=dt(i?ft(e):e,-n).sort(vt),s=0;s<a.length;s++)a[s].type.valid(t,a[s])||(r.onRemove&&r.onRemove(a[s].spec),a.splice(s--,1));return a.length||o.length?new ct(a,o):ut}function vt(e,t){return e.from-t.from||e.to-t.to}function gt(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),yt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),yt(t,o+1,i.copy(r.to,i.to)))}}return t}function yt(e,t,n){for(;t<e.length&&0<vt(n,e[t]);)t++;e.splice(t,0,n)}function bt(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=ut&&t.push(r)})),e.cursorWrapper&&t.push(ct.create(e.state.doc,[e.cursorWrapper.deco])),pt.from(t)}pt.prototype.forChild=function(e,t){if(t.isLeaf)return ct.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(e,t);o!=ut&&(o instanceof pt?n=n.concat(o.members):n.push(o))}return pt.from(n)},pt.prototype.eq=function(e){if(!(e instanceof pt)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},pt.prototype.locals=function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?gt(n?t:t.sort(vt)):st},pt.from=function(e){switch(e.length){case 0:return ut;case 1:return e[0];default:return new pt(e)}};var wt=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=xt(this),this.redraw=!1,this.cursorWrapper=null,St(this),this.nodeViews=Mt(this),this.docView=L(this.state.doc,kt(this),bt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.inDOMChange=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.domObserver=new Le(e),e.domObserver.start(),e.eventHandlers=Object.create(null);var t=function(t){var n=Be[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ve(e,t)||!e.editable&&t.type in ze||n(e,t)})};for(var n in Be)t(n);_e(e)}(this),this.selectionReader=new pe(this),this.pluginViews=[],this.updatePluginViews()},Ct={props:{},root:{}};function kt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t.class+=" "+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),[it.node(0,e.state.doc.content.size,t)]}function St(e){var t,r,o=ke(e.state);if(!o||n.ie&&e.mouseDown)e.cursorWrapper=null;else{var i,a=e.state.selection.visible,s=e.state.storedMarks||o.marks();e.cursorWrapper&&Er.Mark.sameSet(e.cursorWrapper.deco.spec.marks,s)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==a?e.cursorWrapper.deco.pos!=o.pos&&(i=e.cursorWrapper.dom):(t=a,(r=document.createElement("span")).textContent="\ufeff",t||(r.style.position="absolute",r.style.left="-100000px"),i=r),i&&(e.cursorWrapper={dom:i,deco:it.widget(o.pos,i,{isCursorWrapper:!0,marks:s,raw:!0,visible:a})})}}function xt(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Et(e){var t=e.getSelection(),n=t.focusOffset,r=t.focusNode;return r&&3!=r.nodeType?[r,n,1==r.nodeType?r.childNodes[n-1]:null,1==r.nodeType?r.childNodes[n]:null]:null}function Mt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}Ct.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},wt.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&_e(this),this._props=e;var t=Mt(this);(function(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r})(t,this.nodeViews)&&(this.nodeViews=t,this.redraw=!0),this.updateState(e.state)},wt.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)},wt.prototype.updateState=function(e){var t=this,r=this.state;if(this.state=e,r.plugins!=e.plugins&&_e(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(e)){var o=this.editable;this.editable=xt(this),St(this);var i,a,s,l=bt(this),u=kt(this),d=r.config!=e.config?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",h=this.redraw||!this.docView.matchesNode(e.doc,u,l),f=h||!e.selection.eq(r.selection)||this.selectionReader.domChanged(),m="preserve"==d&&f&&function(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=e.dom.ownerDocument,a=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var l=e.root.elementFromPoint(a,s);if(l!=e.dom&&e.dom.contains(l)){var u=l.getBoundingClientRect();if(u.top>=o-20){t=l,n=u.top;break}}}for(var p=[],d=e.dom;d&&(p.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),d!=i.body);d=c(d));return{refDOM:t,refTop:n,stack:p}}(this);if(f){this.domObserver.stop();var v=!1;if(h){var y=n.chrome&&Et(this.root);!this.redraw&&this.docView.update(e.doc,u,l,this)||(this.docView.destroy(),this.docView=L(e.doc,u,l,this.dom,this),this.redraw=!1),this.selectionReader.clearDOMState(),y&&(v=function(e,t){var n=Et(t);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<e.length;r++)if(n[r]!=e[r])return!0;return!1}(y,this.root))}!v&&this.mouseDown&&this.selectionReader.domChanged()&&(a=(i=this).docView.domFromPos(i.state.selection.anchor),s=i.root.getSelection(),p(a.node,a.offset,s.anchorNode,s.anchorOffset))||fe(this,!1,v),this.domObserver.start()}if(o!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(r),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var b=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(t)}))||(e.selection instanceof Ar.NodeSelection?g(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),b):g(this,this.coordsAtPos(e.selection.head),b))}else m&&function(e){for(var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0,i=0==o?0:o-n,a=0;a<r.length;a++){var s=r[a],l=s.dom,c=s.top,u=s.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=u&&(l.scrollLeft=u)}}(m)}},wt.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},wt.prototype.updatePluginViews=function(e){var t=this.state.plugins;if(e&&e.plugins==t)for(var n=0;n<this.pluginViews.length;n++){var r=this.pluginViews[n];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var o=0;o<t.length;o++){var i=t[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},wt.prototype.someProp=function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var a=o[i].props[e];if(null!=a&&(n=t?t(a):a))return n}},wt.prototype.hasFocus=function(){return this.root.activeElement==this.dom},wt.prototype.focus=function(){this.domObserver.stop(),fe(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},Ct.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},wt.prototype.posAtCoords=function(e){var t=w(this,e);return this.inDOMChange&&t&&(t.pos=this.inDOMChange.mapping.map(t.pos),-1!=t.inside&&(t.inside=this.inDOMChange.mapping.map(t.inside))),t},wt.prototype.coordsAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),k(this,e)},wt.prototype.domAtPos=function(e){return this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e)),this.docView.domFromPos(e)},wt.prototype.nodeDOM=function(e){this.inDOMChange&&(e=this.inDOMChange.mapping.invert().map(e));var t=this.docView.descAt(e);return t?t.nodeDOM:null},wt.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(r=this.inDOMChange.mapping.map(r)),r},wt.prototype.endOfTextblock=function(e,t){return A(this,t||this.state,e)},wt.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.inDOMChange&&e.inDOMChange.destroy(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t])}(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],bt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},wt.prototype.dispatchEvent=function(e){var t,n;Ve(t=this,n=e)||!Be[n.type]||!t.editable&&n.type in ze||Be[n.type](t,n)},wt.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(wt.prototype,Ct),t.EditorView=wt,t.Decoration=it,t.DecorationSet=ct,t.__serializeForClipboard=De,t.__parseFromClipboard=Te}));g(yi),yi.EditorView,yi.Decoration,yi.DecorationSet,yi.__serializeForClipboard,yi.__parseFromClipboard;for(var bi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},wi={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Ci="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ki="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Si="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),xi="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ei=Ci&&(xi||+Ci[1]<57)||Si&&xi,Mi=0;Mi<10;Mi++)bi[48+Mi]=bi[96+Mi]=String(Mi);for(Mi=1;Mi<=24;Mi++)bi[Mi+111]="F"+Mi;for(Mi=65;Mi<=90;Mi++)bi[Mi]=String.fromCharCode(Mi+32),wi[Mi]=String.fromCharCode(Mi);for(var Oi in bi)wi.hasOwnProperty(Oi)||(wi[Oi]=bi[Oi]);function Ai(e){var t=!(Ei&&(e.ctrlKey||e.altKey||e.metaKey)||ki&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?wi:bi)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}var Di=Ai;Ai.base=bi,Ai.shift=wi;var Ti=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=Di)&&"object"==typeof n&&"default"in n?n.default:n,o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function i(e){var t,n,r,i,a=e.split(/-(?!$)/),s=a[a.length-1];"Space"==s&&(s=" ");for(var l=0;l<a.length-1;l++){var c=a[l];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);o?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function a(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function s(e){var t=function(e){var t=Object.create(null);for(var n in e)t[i(n)]=e[n];return t}(e);return function(e,n){var o,i=r(n),s=1==i.length&&" "!=i,l=t[a(i,n,!s)];if(l&&l(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(o=r.base[n.keyCode])&&o!=i){var c=t[a(o,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}t.keymap=function(e){return new Ar.Plugin({props:{handleKeyDown:s(e)}})},t.keydownHandler=s}));g(Ti);var Ri=Ti.keymap,Ni=(Ti.keydownHandler,y((function(e,t){var n,r;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"!=typeof WeakMap){var o=new WeakMap;n=function(e){return o.get(e)},r=function(e,t){return o.set(e,t),t}}else{var i=[],a=0;n=function(e){for(var t=0;t<i.length;t+=2)if(i[t]==e)return i[t+1]},r=function(e,t){return 10==a&&(a=0),i[a++]=e,i[a++]=t}}var s=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},l=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function c(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}l.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,a=o+1,l=1;i<this.width&&this.map[t+l]==n;l++)i++;for(var c=1;a<this.height&&this.map[t+this.width*c]==n;c++)a++;return new s(r,o,i,a)}}throw new RangeError("No cell with offset "+e+" found")},l.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},l.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,a=r.top,s=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[a*this.width+(n<0?o-1:i)]:(n<0?0==a:s==this.height)?null:this.map[o+this.width*(n<0?a-1:s)]},l.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,a=n.bottom,l=this.findCell(t),c=l.left,u=l.right,p=l.top,d=l.bottom;return new s(Math.min(r,c),Math.min(i,p),Math.max(o,u),Math.max(a,d))},l.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,a=this.map[i];n[a]||(n[a]=!0,o==e.left&&o&&this.map[i-1]==a||r==e.top&&r&&this.map[i-this.width]==a||t.push(a))}return t},l.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var a=t+e*this.width,s=(e+1)*this.width;a<s&&this.map[a]<o;)a++;return a==s?i-1:this.map[a]}o=i}},l.get=function(e){return n(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var a=0;a<r;a++)for(var s=e.child(a),l=0;l<s.childCount;l++){var c=s.child(l);a+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var u=0;u<o.childCount;u++){var p=o.child(u);i+=p.attrs.colspan,1<p.attrs.rowspan&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,a=[],s=0,u=t*n;s<u;s++)r[s]=0;for(var p=0,d=0;p<n;p++){var h=e.child(p);d++;for(var f=0;;f++){for(;o<r.length&&0!=r[o];)o++;if(f==h.childCount)break;for(var m=h.child(f),v=m.attrs,g=v.colspan,y=v.rowspan,b=v.colwidth,w=0;w<y;w++){if(n<=w+p){(i||(i=[])).push({type:"overlong_rowspan",pos:d,n:y-w});break}for(var C=o+w*t,k=0;k<g;k++){0==r[C+k]?r[C+k]=d:(i||(i=[])).push({type:"collision",row:p,pos:d,n:g-k});var S=b&&b[k];if(S){var x=(C+k)%t*2,E=a[x];null==E||E!=S&&1==a[x+1]?(a[x]=S,a[x+1]=1):E==S&&a[x+1]++}}}o+=g,d+=m.nodeSize}for(var M=(p+1)*t,O=0;o<M;)0==r[o++]&&O++;O&&(i||(i=[])).push({type:"missing",row:p,n:O}),d++}for(var A=new l(t,n,r,i),D=!1,T=0;!D&&T<a.length;T+=2)null!=a[T]&&a[T+1]<n&&(D=!0);return D&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var a=n.nodeAt(i),s=null,l=0;l<a.attrs.colspan;l++){var u=t[(r+l)%e.width*2];null==u||a.attrs.colwidth&&a.attrs.colwidth[l]==u||((s||(s=c(a.attrs)))[l]=u)}s&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:s})}}}(A,a,e),A}(e))};var u=new Ar.PluginKey("selectingCells");function p(e){for(var t=e.depth-1;0<t;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function d(e){for(var t=e.selection.$head,n=t.depth;0<n;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function h(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:p(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var a=o.type.spec.tableRole;if("cell"==a||"header_cell"==a)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function f(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function m(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function v(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function g(e,t,n){var r=e.start(-1),o=l.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function y(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function b(e,t,n){void 0===n&&(n=1);var r=y(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return 0<e}))||(r.colwidth=null)),r}function w(e,t,n){void 0===n&&(n=1);var r=y(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var C=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),o=l.get(r),i=t.start(-1),a=o.rectBetween(t.pos-i,n.pos-i),s=t.node(0),c=o.cellsInRect(a).filter((function(e){return e!=n.pos-i}));c.unshift(n.pos-i);var u=c.map((function(e){var t=r.nodeAt(e),n=e+i+1;return new Ar.SelectionRange(s.resolve(n),s.resolve(n+t.content.size))}));e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(f(r)&&f(o)&&v(r,o)){var i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?t.rowSelection(r,o):i&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return Ar.TextSelection.between(r,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=l.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var s=[],c=a*t.width+r.left,u=r.left;u<r.right;u++,c++){var p=t.map[c];if(!o[p]){o[p]=!0;var d=t.findCell(p),h=e.nodeAt(p),f=r.left-d.left,m=d.right-r.right;if(0<f||0<m){var v=h.attrs;0<f&&(v=b(v,0,f)),0<m&&(v=b(v,v.colspan-m,m)),h=d.left<r.left?h.type.createAndFill(v):h.type.create(v,h.content)}if(d.top<r.top||d.bottom>r.bottom){var g=y(h.attrs,"rowspan",Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top));h=d.top<r.top?h.type.createAndFill(g):h.type.create(g,h.content)}s.push(h)}}i.push(e.child(a).copy(Er.Fragment.from(s)))}var w=this.isColSelection()&&this.isRowSelection()?e:i;return new Er.Slice(Er.Fragment.from(w),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=Er.Slice.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var a=o[i],s=a.$from,l=a.$to,c=t.mapping.slice(r);t.replace(c.map(s.pos),c.map(l.pos),i?Er.Slice.empty:n)}var u=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);u&&t.setSelection(u)},t.prototype.replaceWith=function(e,t){this.replace(e,new Er.Slice(Er.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=l.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(0<Math.min(e,t))return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=l.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),a=r.findCell(n.pos-o),s=e.node(0);return i.top<=a.top?(0<i.top&&(e=s.resolve(o+r.map[i.left])),a.bottom<r.height&&(n=s.resolve(o+r.map[r.width*(r.height-1)+a.right-1]))):(0<a.top&&(n=s.resolve(o+r.map[a.left])),i.bottom<r.height&&(e=s.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=l.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(0<Math.min(n,r))return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=l.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),a=r.findCell(n.pos-o),s=e.node(0);return i.left<=a.left?(0<i.left&&(e=s.resolve(o+r.map[i.top*r.width])),a.right<r.width&&(n=s.resolve(o+r.map[r.width*(a.top+1)-1]))):(0<a.left&&(n=s.resolve(o+r.map[a.top*r.width])),i.right<r.width&&(e=s.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new k(this.$anchorCell.pos,this.$headCell.pos)},t}(Ar.Selection);C.prototype.visible=!1,Ar.Selection.jsonID("cell",C);var k=function(e,t){this.anchor=e,this.head=t};function S(e){if(!(e.selection instanceof C))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(yi.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))})),yi.DecorationSet.create(e.doc,t)}function x(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var a in t){var s=t[a].getFromDOM,l=s&&s(e);null!=l&&(i[a]=l)}return i}function E(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function M(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}function O(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(0<n&&0<r||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,a=o.type.schema,s=[];if("row"==i)for(var l=0;l<t.childCount;l++){var c=t.child(l).content,u=l?0:Math.max(0,n-1),p=l<t.childCount-1?0:Math.max(0,r-1);(u||p)&&(c=A(M(a).row,new Er.Slice(c,u,p)).content),s.push(c)}else{if("cell"!=i&&"header_cell"!=i)return null;s.push(n||r?A(M(a).row,new Er.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;0<=i;i--)for(var a=o.child(i).attrs,s=a.rowspan,l=a.colspan,c=r;c<r+s;c++)n[c]=(n[c]||0)+l;for(var u=0,p=0;p<n.length;p++)u=Math.max(u,n[p]);for(var d=0;d<n.length;d++)if(d>=t.length&&t.push(Er.Fragment.empty),n[d]<u){for(var h=M(e).cell.createAndFill(),f=[],m=n[d];m<u;m++)f.push(h);t[d]=t[d].append(Er.Fragment.from(f))}return{height:t.length,width:u,rows:t}}(a,s)}function A(e,t){var n=e.createAndFill();return new Or.Transform(n).replace(0,n.content.size,t).doc}function D(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var a=[],s=[],l=0;l<i.length;l++){for(var c=i[l],u=[],p=a[l]||0,d=0;p<t;d++){var h=c.child(d%c.childCount);p+h.attrs.colspan>t&&(h=h.type.create(b(h.attrs,h.attrs.colspan,p+h.attrs.colspan-t),h.content)),u.push(h),p+=h.attrs.colspan;for(var f=1;f<h.attrs.rowspan;f++)a[l+f]=(a[l+f]||0)+h.attrs.colspan}s.push(Er.Fragment.from(u))}i=s,r=t}if(o!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var w=[],C=i[g%o],k=0;k<C.childCount;k++){var S=C.child(k);v+S.attrs.rowspan>n&&(S=S.type.create(y(S.attrs,"rowspan",n-S.attrs.rowspan),S.content)),w.push(S)}m.push(Er.Fragment.from(w))}i=m,o=n}return{width:r,height:o,rows:i}}function T(e,t,n,r,o,i,a,s){if(0==a||a==t.height)return!1;for(var l=!1,c=o;c<i;c++){var u=a*t.width+c,p=t.map[u];if(t.map[u-t.width]==p){l=!0;var d=n.nodeAt(p),h=t.findCell(p),f=h.top,m=h.left;e.setNodeMarkup(e.mapping.slice(s).map(p+r),null,y(d.attrs,"rowspan",a-f)),e.insert(e.mapping.slice(s).map(t.positionAt(a,m,n)),d.type.createAndFill(y(d.attrs,"rowspan",f+d.attrs.rowspan-a))),c+=d.attrs.colspan-1}}return l}function R(e,t,n,r,o,i,a,s){if(0==a||a==t.width)return!1;for(var l=!1,c=o;c<i;c++){var u=c*t.width+a,p=t.map[u];if(t.map[u-1]==p){l=!0;var d=n.nodeAt(p),h=t.colCount(p),f=e.mapping.slice(s).map(p+r);e.setNodeMarkup(f,null,b(d.attrs,a-h,d.attrs.colspan-(a-h))),e.insert(f+d.nodeSize,d.type.createAndFill(b(d.attrs,0,a-h))),c+=d.attrs.rowspan-1}}return l}function N(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,a=l.get(i),s=r.top,c=r.left,u=c+o.width,p=s+o.height,d=e.tr,h=0;function f(){i=n?d.doc.nodeAt(n-1):d.doc,a=l.get(i),h=d.mapping.maps.length}(function(e,t,n,r,o,i,a){var s,l,c=M(e.doc.type.schema);if(o>t.width)for(var u=0,p=0;u<t.height;u++){var d=n.child(u);p+=d.nodeSize;var h=[],f=void 0;f=null==d.lastChild||d.lastChild.type==c.cell?s||(s=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var m=t.width;m<o;m++)h.push(f);e.insert(e.mapping.slice(a).map(p-1+r),h)}if(i>t.height){for(var v=[],g=0,y=(t.height-1)*t.width;g<Math.max(t.width,o);g++){var b=!(g>=t.width)&&n.nodeAt(t.map[y+g]).type==c.header_cell;v.push(b?l||(l=c.header_cell.createAndFill()):s||(s=c.cell.createAndFill()))}for(var w=c.row.create(null,Er.Fragment.from(v)),C=[],k=t.height;k<i;k++)C.push(w);e.insert(e.mapping.slice(a).map(r+n.nodeSize-2),C)}return!(!s&&!l)})(d,a,i,n,u,p,h)&&f(),T(d,a,i,n,c,u,s,h)&&f(),T(d,a,i,n,c,u,p,h)&&f(),R(d,a,i,n,s,p,c,h)&&f(),R(d,a,i,n,s,p,u,h)&&f();for(var m=s;m<p;m++){var v=a.positionAt(m,c,i),g=a.positionAt(m,u,i);d.replace(d.mapping.slice(h).map(v+n),d.mapping.slice(h).map(g+n),new Er.Slice(o.rows[m-s],0,0))}f(),d.setSelection(new C(d.doc.resolve(n+a.positionAt(s,c,i)),d.doc.resolve(n+a.positionAt(p-1,u-1,i)))),t(d)}k.prototype.map=function(e){return new k(e.map(this.anchor),e.map(this.head))},k.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&v(t,n)?new C(t,n):Ar.Selection.near(n,1)};var P=Ti.keydownHandler({ArrowLeft:I("horiz",-1),ArrowRight:I("horiz",1),ArrowUp:I("vert",-1),ArrowDown:I("vert",1),"Shift-ArrowLeft":L("horiz",-1),"Shift-ArrowRight":L("horiz",1),"Shift-ArrowUp":L("vert",-1),"Shift-ArrowDown":L("vert",1),Backspace:B,"Mod-Backspace":B,Delete:B,"Mod-Delete":B});function F(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function I(e,t){return function(n,r,o){var i=n.selection;if(i instanceof C)return F(n,r,Ar.Selection.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;var a=$(o,e,t);if(null==a)return!1;if("horiz"==e)return F(n,r,Ar.Selection.near(n.doc.resolve(i.head+t),t));var s=n.doc.resolve(a),l=g(s,e,t);return F(n,r,l?Ar.Selection.near(l,1):t<0?Ar.Selection.near(n.doc.resolve(s.before(-1)),-1):Ar.Selection.near(n.doc.resolve(s.after(-1)),1))}}function L(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof C)){var a=$(o,e,t);if(null==a)return!1;i=new C(n.doc.resolve(a))}var s=g(i.$headCell,e,t);return!!s&&F(n,r,new C(i.$anchorCell,s))}}function B(e,t){var n=e.selection;if(!(n instanceof C))return!1;if(t){var r=e.tr,o=M(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Er.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function z(e,t){var n=p(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new C(n))),!0)}function _(e,t,n){if(!d(e.state))return!1;var r=O(n),o=e.state.selection;if(o instanceof C){r||(r={width:1,height:1,rows:[Er.Fragment.from(A(M(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),s=l.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=D(r,s.right-s.left,s.bottom-s.top),N(e.state,e.dispatch,a,s,r),!0}if(r){var c=h(e.state),u=c.start(-1);return N(e.state,e.dispatch,u,l.get(c.node(-1)).findCell(c.pos-u),r),!0}return!1}function V(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=W(e,t.target);if(t.shiftKey&&e.state.selection instanceof C)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=p(e.state.selection.$anchor))&&j(e,t).pos!=n.pos)o(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",a)}function o(t,n){var r=j(e,n),o=null==u.getState(e.state);if(!r||!v(t,r)){if(!o)return;r=t}var i=new C(t,r);if(o||!e.state.selection.eq(i)){var a=e.state.tr.setSelection(i);o&&a.setMeta(u,t.pos),e.dispatch(a)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",a),null!=u.getState(e.state)&&e.dispatch(e.state.tr.setMeta(u,-1))}function a(n){var a,s=u.getState(e.state);if(null!=s)a=e.state.doc.resolve(s);else if(W(e,n.target)!=r&&!(a=j(e,t)))return i();a&&o(a,n)}}function $(e,t,n){if(!(e.state.selection instanceof Ar.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;0<=o;o--){var i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){var a=r.before(o),s="vert"==t?0<n?"down":"up":0<n?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function W(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function j(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?p(e.state.doc.resolve(n.pos)):null}function H(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=l.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,a,s=[],c=0;c<o.height;c++)s.push(0);for(var u=0;u<o.problems.length;u++){var p=o.problems[u];if("collision"==p.type){for(var d=t.nodeAt(p.pos),h=0;h<d.attrs.rowspan;h++)s[p.row+h]+=p.n;r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,b(d.attrs,d.attrs.colspan-p.n,p.n))}else if("missing"==p.type)s[p.row]+=p.n;else if("overlong_rowspan"==p.type){var f=t.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,y(f.attrs,"rowspan",f.attrs.rowspan-p.n))}else if("colwidth mismatch"==p.type){var m=t.nodeAt(p.pos);r.setNodeMarkup(r.mapping.map(n+1+p.pos),null,y(m.attrs,"colwidth",p.colwidth))}}for(var v=0;v<s.length;v++)s[v]&&(null==i&&(i=v),a=v);for(var g=0,w=n+1;g<o.height;g++){var C=t.child(g),k=w+C.nodeSize,S=s[g];if(0<S){var x="cell";C.firstChild&&(x=C.firstChild.type.spec.tableRole);for(var E=[],O=0;O<S;O++)E.push(M(e.schema)[x].createAndFill());var A=0!=g&&i!=g-1||a!=g?k-1:w+1;r.insert(r.mapping.map(A),E)}w=k}return r}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,a=n.childCount;e:for(var s=0,l=0;s<a;s++){for(var c=n.child(s),u=l,p=Math.min(i,s+3);u<p;u++)if(t.child(u)==c){l=u+1,r+=c.nodeSize;continue e}o(c,r),l<i&&t.child(l).sameMarkup(c)?e(t.child(l),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function K(e){var t,n=e.selection,r=h(e),o=r.node(-1),i=r.start(-1),a=l.get(o);return(t=n instanceof C?a.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):a.findCell(r.pos-i)).tableStart=i,t.map=a,t.table=o,t}function U(e,t,n){var r=t.map,o=t.tableStart,i=t.table,a=0<n?-1:0;(function(e,t,n){for(var r=M(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+a)&&(a=0==n||n==r.width?null:0);for(var s=0;s<r.height;s++){var l=s*r.width+n;if(0<n&&n<r.width&&r.map[l-1]==r.map[l]){var c=r.map[l],u=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(o+c),null,w(u.attrs,n-r.colCount(c))),s+=u.attrs.rowspan-1}else{var p=null==a?M(i.type.schema).cell:i.nodeAt(r.map[l+a]).type,d=r.positionAt(s,n,i);e.insert(e.mapping.map(o+d),p.createAndFill())}}return e}function q(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=e.mapping.maps.length,s=0;s<r.height;){var l=s*r.width+n,c=r.map[l],u=o.nodeAt(c);if(0<n&&r.map[l-1]==c||n<r.width-1&&r.map[l+1]==c)e.setNodeMarkup(e.mapping.slice(a).map(i+c),null,b(u.attrs,n-r.colCount(c)));else{var p=e.mapping.slice(a).map(i+c);e.delete(p,p+u.nodeSize)}s+=u.attrs.rowspan}}function J(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,a=o,s=0;s<n;s++)a+=i.child(s).nodeSize;var l=[],c=0<n?-1:0;(function(e,t,n){for(var r=M(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0})(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var u=0,p=r.width*n;u<r.width;u++,p++)if(0<n&&n<r.height&&r.map[p]==r.map[p-r.width]){var d=r.map[p],h=i.nodeAt(d).attrs;e.setNodeMarkup(o+d,null,y(h,"rowspan",h.rowspan+1)),u+=h.colspan-1}else{var f=null==c?M(i.type.schema).cell:i.nodeAt(r.map[p+c*r.width]).type;l.push(f.createAndFill())}return e.insert(a,M(i.type.schema).row.create(null,l)),e}function G(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,a=0,s=0;s<n;s++)a+=o.child(s).nodeSize;var l=a+o.child(n).nodeSize,c=e.mapping.maps.length;e.delete(a+i,l+i);for(var u=0,p=n*r.width;u<r.width;u++,p++){var d=r.map[p];if(0<n&&d==r.map[p-r.width]){var h=o.nodeAt(d).attrs;e.setNodeMarkup(e.mapping.slice(c).map(d+i),null,y(h,"rowspan",h.rowspan-1)),u+=h.colspan-1}else if(n<r.width&&d==r.map[p+r.width]){var f=o.nodeAt(d),m=f.type.create(y(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),v=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(c).map(i+v),m),u+=f.attrs.colspan-1}}}function X(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function Y(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Z(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?(n=e,function(e,t){if(!d(e))return!1;if(t){for(var r=M(e.schema),o=K(e),i=e.tr,a=o.map.cellsInRect("column"==n?new s(o.left,0,o.right,o.map.height):"row"==n?new s(0,o.top,o.map.width,o.bottom):o),l=a.map((function(e){return o.table.nodeAt(e)})),c=0;c<a.length;c++)l[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+a[c],r.cell,l[c].attrs);if(0==i.steps.length)for(var u=0;u<a.length;u++)i.setNodeMarkup(o.tableStart+a[u],r.header_cell,l[u].attrs);t(i)}return!0}):function(t,n){if(!d(t))return!1;if(n){var r=M(t.schema),o=K(t),i=t.tr,a=Y("row",o,r),l=Y("column",o,r),c=("column"===e?a:"row"===e&&l)?1:0,u="column"==e?new s(0,c,1,o.map.height):"row"==e?new s(c,0,o.map.width,1):o,p="column"==e?l?r.cell:r.header_cell:"row"==e?a?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,p,n.attrs)})),n(i)}return!0};var n}var Q=Z("row",{useDeprecatedLogic:!0}),ee=Z("column",{useDeprecatedLogic:!0}),te=Z("cell",{useDeprecatedLogic:!0}),ne=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),re(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function re(e,t,n,r,o,i){for(var a=0,s=!0,l=t.firstChild,c=e.firstChild,u=0,p=0;u<c.childCount;u++)for(var d=c.child(u).attrs,h=d.colspan,f=d.colwidth,m=0;m<h;m++,p++){var v=o==p?i:f&&f[m],g=v?v+"px":"";a+=v||r,v||(s=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}n.style.minWidth=s?(n.style.width=a+"px",""):(n.style.width="",a+"px")}ne.prototype.update=function(e){return e.type==this.node.type&&(re(this.node=e,this.colgroup,this.table,this.cellMinWidth),!0)},ne.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var oe=new Ar.PluginKey("tableColumnResizing"),ie=function(e,t){this.activeHandle=e,this.dragging=t};function ae(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=p(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=l.get(o.node(-1)),a=o.start(-1),s=i.map.indexOf(o.pos-a);return s%i.width==0?-1:a+i.map[s-1]}function se(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function le(e,t){e.dispatch(e.state.tr.setMeta(oe,{setHandle:t}))}function ce(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}ie.prototype.apply=function(e){var t=this,n=e.getMeta(oe);if(n&&null!=n.setHandle)return new ie(n.setHandle,null);if(n&&void 0!==n.setDragging)return new ie(t.activeHandle,n.setDragging);if(-1<t.activeHandle&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);f(e.doc.resolve(r))||(r=null),t=new ie(r,t.dragging)}return t},t.tableEditing=function(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new Ar.Plugin({key:u,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(u);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:S,handleDOMEvents:{mousedown:V},createSelectionBetween:function(e){if(null!=u.getState(e.state))return e.state.selection},handleTripleClick:z,handleKeyDown:P,handlePaste:_},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,i=(t||e).selection,a=(t||e).doc;if(i instanceof Ar.NodeSelection&&(o=i.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=C.create(a,i.from);else if("row"==o){var s=a.resolve(i.from+1);r=C.rowSelection(s,s)}else if(!n){var c=l.get(i.node),u=i.from+1,p=u+c.map[c.width*c.height-1];r=C.create(a,u+1,p)}}else i instanceof Ar.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;0<=i&&!(t.after(i+1)<t.end(i));i--,r++);for(var a=n.depth;0<=a&&!(n.before(a+1)>n.start(a));a--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(i)?r=Ar.TextSelection.create(a,i.from):i instanceof Ar.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;0<i;i--){var a=r.node(i);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){t=a;break}}for(var s=o.depth;0<s;s--){var l=o.node(s);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return t!==n&&0===o.parentOffset}(i)&&(r=Ar.TextSelection.create(a,i.$from.start(),i.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,H(r,n),t)}})},t.fixTables=H,t.handlePaste=_,t.cellAround=p,t.isInTable=d,t.selectionCell=h,t.moveCellForward=m,t.inSameTable=v,t.findCell=function(e){return l.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return l.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=g,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return x(e,t)}}],toDOM:function(e){return["td",E(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return x(e,t)}}],toDOM:function(e){return["th",E(e,t),0]}}}},t.CellSelection=C,t.TableMap=l,t.columnResizing=function(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=ne);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new Ar.Plugin({key:oe,state:{init:function(e,t){return this.spec.props.nodeViews[M(t.schema).table.name]=function(e,t){return new r(e,n,t)},new ie(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return-1<oe.getState(e).activeHandle?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,o){var i=oe.getState(e.state);if(!i.dragging){var a=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),s=-1;if(a){var c=a.getBoundingClientRect(),u=c.left,p=c.right;t.clientX-u<=n?s=ae(e,t,"left"):p-t.clientX<=n&&(s=ae(e,t,"right"))}if(s!=i.activeHandle){if(!o&&-1!==s){var d=e.state.doc.resolve(s),h=d.node(-1),f=l.get(h),m=d.start(-1);if(f.colCount(d.pos-m)+d.nodeAfter.attrs.colspan-1==f.width-1)return}le(e,s)}}}(e,n,t,0,o)},mouseleave:function(e){var t,n;t=e,-1<(n=oe.getState(t.state)).activeHandle&&!n.dragging&&le(t,-1)},mousedown:function(e,t){!function(e,t,n){var r=oe.getState(e.state);if(-1!=r.activeHandle&&!r.dragging){var o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var a=e.domAtPos(t),s=a.node.childNodes[a.offset].offsetWidth,l=r;if(o)for(var c=0;c<r;c++)o[c]&&(s-=o[c],l--);return s/l}(e,r.activeHandle,o.attrs);e.dispatch(e.state.tr.setMeta(oe,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",a),window.addEventListener("mousemove",s),t.preventDefault()}function a(t){window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",s);var r=oe.getState(e.state);r.dragging&&(function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=l.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan-1,c=e.state.tr,u=0;u<i.height;u++){var p=u*i.width+s;if(!u||i.map[p]!=i.map[p-i.width]){var d=i.map[p],h=o.nodeAt(d).attrs,f=1==h.colspan?0:s-i.colCount(d);if(!h.colwidth||h.colwidth[f]!=n){var m=h.colwidth?h.colwidth.slice():ce(h.colspan);m[f]=n,c.setNodeMarkup(a+d,null,y(h,"colwidth",m))}}}c.docChanged&&e.dispatch(c)}(e,r.activeHandle,se(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(oe,{setDragging:null})))}function s(t){if(!t.which)return a(t);var r=oe.getState(e.state),o=se(r.dragging,t,n);!function(e,t,n,r){for(var o=e.state.doc.resolve(t),i=o.node(-1),a=o.start(-1),s=l.get(i).colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1,c=e.domAtPos(o.start(-1)).node;"TABLE"!=c.nodeName;)c=c.parentNode;re(i,c.firstChild,c,r,s,n)}(e,r.activeHandle,o,n)}}(e,t,n)}},decorations:function(e){var t=oe.getState(e);if(-1<t.activeHandle)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=l.get(o),a=r.start(-1),s=i.colCount(r.pos-a)+r.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var u=s+c*i.width-1;if(!(s!=i.width&&i.map[u]==i.map[u+1]||0!=c&&i.map[u-1]==i.map[u-1-i.width])){var p=i.map[u],d=a+p+o.nodeAt(p).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(yi.Decoration.widget(d,h))}}return yi.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=oe,t.updateColumnsOnResize=re,t.__pastedCells=O,t.__insertCells=N,t.__clipCells=D,t.addColumn=U,t.addColumnBefore=function(e,t){if(!d(e))return!1;if(t){var n=K(e);t(U(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!d(e))return!1;if(t){var n=K(e);t(U(e.tr,n,n.right))}return!0},t.removeColumn=q,t.deleteColumn=function(e,t){if(!d(e))return!1;if(t){var n=K(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;q(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=l.get(n.table);t(r)}return!0},t.addRow=J,t.addRowBefore=function(e,t){if(!d(e))return!1;if(t){var n=K(e);t(J(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!d(e))return!1;if(t){var n=K(e);t(J(e.tr,n,n.bottom))}return!0},t.removeRow=G,t.deleteRow=function(e,t){if(!d(e))return!1;if(t){var n=K(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;G(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=l.get(n.table);t(r)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof C)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=K(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,a=i,s=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(0<t.left&&o[a]==o[a-1]||t.right<n&&o[l]==o[l+1])return!0;a+=n,l+=n}for(var u=t.left;u<t.right;u++){if(0<t.top&&o[i]==o[i-n]||t.bottom<r&&o[s]==o[s+n])return!0;i++,s++}return!1}(o,r))return!1;if(t){for(var i,a,s=e.tr,l={},c=Er.Fragment.empty,u=r.top;u<r.bottom;u++)for(var p=r.left;p<r.right;p++){var d=o.map[u*o.width+p],h=r.table.nodeAt(d);if(!l[d])if(l[d]=!0,null==i)i=d,a=h;else{X(h)||(c=c.append(h.content));var f=s.mapping.map(d+r.tableStart);s.delete(f,f+h.nodeSize)}}if(s.setNodeMarkup(i+r.tableStart,null,y(w(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),c.size){var m=i+1+a.content.size,v=X(a)?i+1:m;s.replaceWith(v+r.tableStart,m+r.tableStart,c)}s.setSelection(new C(s.doc.resolve(i+r.tableStart))),t(s)}return!0},t.splitCell=function(e,t){var n,r,o=e.selection;if(o instanceof C){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;n=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(n=function(e){for(var t=e.depth-1;0<t;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;r=p(o.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(t){var i=n.attrs,a=[],s=i.colwidth;1<i.rowspan&&(i=y(i,"rowspan",1)),1<i.colspan&&(i=y(i,"colspan",1));for(var l=K(e),c=e.tr,u=0;u<l.right-l.left;u++)a.push(s?y(i,"colwidth",s&&s[u]?[s[u]]:null):i);for(var d,h=M(e.schema)[n.type.spec.tableRole],f=0;f<l.bottom;f++)if(f>=l.top){var m=l.map.positionAt(f,l.left,l.table);f==l.top&&(m+=n.nodeSize);for(var v=l.left,g=0;v<l.right;v++,g++)v==l.left&&f==l.top||c.insert(d=c.mapping.map(m+l.tableStart,1),h.createAndFill(a[g]))}c.setNodeMarkup(r,null,a[0]),o instanceof C&&c.setSelection(new C(c.doc.resolve(o.$anchorCell.pos),d&&c.doc.resolve(d))),t(c)}return!0},t.setCellAttr=function(e,t){return function(n,r){if(!d(n))return!1;var o=h(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof C?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&i.setNodeMarkup(r,null,y(n.attrs,e,t))})):i.setNodeMarkup(o.pos,null,y(o.nodeAfter.attrs,e,t)),r(i)}return!0}},t.toggleHeader=Z,t.toggleHeaderRow=Q,t.toggleHeaderColumn=ee,t.toggleHeaderCell=te,t.goToNextCell=function(e){return function(t,n){if(!d(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();0<=r;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var a=e.node(-1),s=e.indexAfter(-1),l=e.after();s<a.childCount;s++){var c=a.child(s);if(c.childCount)return l+1;l+=c.nodeSize}}}(h(t),e);if(null!=r){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(Ar.TextSelection.between(o,m(o))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,r=n.depth;0<r;r--)if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0;return!1}}))),Pi=g(Ni),Fi=Ni.tableEditing,Ii=Ni.fixTables,Li=Ni.handlePaste,Bi=Ni.cellAround,zi=Ni.isInTable,_i=Ni.selectionCell,Vi=Ni.moveCellForward,$i=Ni.inSameTable,Wi=Ni.findCell,ji=Ni.colCount,Hi=Ni.nextCell,Ki=Ni.tableNodes,Ui=Ni.CellSelection,qi=Ni.TableMap,Ji=Ni.columnResizing,Gi=Ni.columnResizingPluginKey,Xi=Ni.updateColumnsOnResize,Yi=Ni.__pastedCells,Zi=Ni.__insertCells,Qi=Ni.__clipCells,ea=Ni.addColumn,ta=Ni.addColumnBefore,na=Ni.addColumnAfter,ra=Ni.removeColumn,oa=Ni.deleteColumn,ia=Ni.addRow,aa=Ni.addRowBefore,sa=Ni.addRowAfter,la=Ni.removeRow,ca=Ni.deleteRow,ua=Ni.mergeCells,pa=Ni.splitCell,da=Ni.setCellAttr,ha=Ni.toggleHeader,fa=Ni.toggleHeaderRow,ma=Ni.toggleHeaderColumn,va=Ni.toggleHeaderCell,ga=Ni.goToNextCell,ya=Ni.deleteTable,ba=Object.freeze({default:Pi,__moduleExports:Ni,tableEditing:Fi,fixTables:Ii,handlePaste:Li,cellAround:Bi,isInTable:zi,selectionCell:_i,moveCellForward:Vi,inSameTable:$i,findCell:Wi,colCount:ji,nextCell:Hi,tableNodes:Ki,CellSelection:Ui,TableMap:qi,columnResizing:Ji,columnResizingPluginKey:Gi,updateColumnsOnResize:Xi,__pastedCells:Yi,__insertCells:Zi,__clipCells:Qi,addColumn:ea,addColumnBefore:ta,addColumnAfter:na,removeColumn:ra,deleteColumn:oa,addRow:ia,addRowBefore:aa,addRowAfter:sa,removeRow:la,deleteRow:ca,mergeCells:ua,splitCell:pa,setCellAttr:da,toggleHeader:ha,toggleHeaderRow:fa,toggleHeaderColumn:ma,toggleHeaderCell:va,goToNextCell:ga,deleteTable:ya}),wa={Tab:ga(1),"shift-Tab":ga(-1)},Ca=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).updateTable=function(e){var t=e.target.getAttribute("name"),r=n.props,o=r.view,i=r.updateMenuPosition,a=o.state,s=o.dispatch;ba[t](a,s),i()},n}return p(t,e.Component),s(t,[{key:"render",value:function(){return r.createElement(ka,null,r.createElement(Sa,{name:"addRowBefore",onClick:this.updateTable},"Add Row Before"),r.createElement(Sa,{name:"addRowAfter",onClick:this.updateTable},"Add Row After"),r.createElement(Sa,{name:"addColumnBefore",onClick:this.updateTable},"Add Column Before"),r.createElement(Sa,{name:"addColumnAfter",onClick:this.updateTable},"Add Column After"),r.createElement(Sa,{name:"deleteRow",onClick:this.updateTable},"Delete Row"),r.createElement(Sa,{name:"deleteColumn",onClick:this.updateTable,lastOption:!0},"Delete Column"))}}]),t}(),ka=Xe("div",{target:"e1ezibju0",label:"MenuWrapper"})("border:",(function(e){return e.theme.table.cell.menuWrapper.border}),";background-color:",(function(e){return e.theme.table.cell.menuWrapper.backgroundColor}),";color:",(function(e){return e.theme.table.cell.menuWrapper.color}),";cursor:pointer;left:-155px;position:absolute;font-size:",(function(e){return e.theme.table.cell.menuWrapper.fontSize}),";border-radius:",(function(e){return e.theme.table.cell.menuWrapper.borderRadius}),";top:16px;box-shadow:",(function(e){return e.theme.table.cell.menuWrapper.boxShadow}),";"),Sa=Xe("div",{target:"e1ezibju1",label:"MenuOption"})("border-bottom:",(function(e){var t=e.lastOption,n=e.theme;return t?"":n.table.cell.menuOption.borderBottom}),";padding:",(function(e){return e.theme.table.cell.menuOption.padding}),";width:",(function(e){return e.theme.table.cell.menuOption.width}),";text-align:center;&:hover{",(function(e){return e.theme.table.cell.menuOption["&:hover"]}),";}"),xa=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).state={menuPosition:{left:0,top:0},menuVisible:!1},n.componentDidMount=function(){n.updateStatePosition()},n.componentDidUpdate=function(e){e.marker!==n.props.marker&&n.updateStatePosition()},n.updateStatePosition=function(){var e=n.props,t=e.editorWrapper,r=e.marker,o=t.current.getBoundingClientRect(),i=o.top,a=o.left,s=r.getBoundingClientRect(),l=s.top,c=s.left,u=s.width;n.setState({top:l-i,left:c+u-a-20,menuVisible:!1})},n.toggleMenuVisible=function(){n.setState({menuVisible:!n.state.menuVisible})},n}return p(t,e.Component),s(t,[{key:"render",value:function(){var e=this;if(this.props.marker){var t=this.state,n=t.top,o=t.left,i=t.menuVisible;return r.createElement(kr,{render:function(){return r.createElement(Ea,{onMouseDown:function(e){return e.preventDefault()},style:{top:n,left:o}},r.createElement(Ma,{onClick:e.toggleMenuVisible}),i&&r.createElement(Ca,{view:e.props.view,updateMenuPosition:e.updateStatePosition}))}})}}}]),t}(),Ea=Xe("div",{target:"e16scjwq0",label:"Wrapper"})({name:"12efcmn",styles:"position:absolute;"}),Ma=Xe(nt.ArrowDown,{target:"e16scjwq1",label:"StyledArrowDownIcon"})("fill:",(function(e){return e.theme.table.cell.menuIcon.color}),";height:",(function(e){return e.theme.table.cell.menuIcon.height}),"px;width:",(function(e){return e.theme.table.cell.menuIcon.width}),"px;&:hover{",(function(e){return e.theme.table.cell.menuIcon["&:hover"]}),";}"),Oa=[{elmClassName:"nib-table-cell-marker",component:xa}],Aa=y((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var i=b(e[r])(n.selection);if(i){var a=l(i.pos,t)(n);if(a!==n)return a}}return n}},r=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return function(n){var r=Ar.Selection.findFrom(n.doc.resolve(e),t,!0);return r?n.setSelection(r):n}},o=function(e,t){return function(o){var a="number"==typeof t,l=o.selection.$from,c=a?o.doc.resolve(t):i(o.selection)?o.doc.resolve(l.pos+1):l,u=c.parent;if(c.depth,h(u)&&o!==(o=n(u.type,e)(o)))return r(c.pos)(o);if(d(c,e))return o.insert(c.pos,e),s(r(a?c.pos:o.selection.$anchor.pos)(o));for(var p=c.depth;0<p;p--){var f=c.after(p),m=o.doc.resolve(f);if(d(m,e))return o.insert(f,e),s(r(f)(o))}return o}},i=function(e){return e instanceof Ar.NodeSelection},a=function(e,t){return Array.isArray(e)&&-1<e.indexOf(t.type)||t.type===e},s=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},l=function(e,t){return function(n){var o=n.doc.nodeAt(e),i=n.doc.resolve(e);if(c(i,t)){var a=(n=n.replaceWith(e,e+o.nodeSize,t)).selection.$from.pos-1;return n=r(Math.max(a,0),-1)(n),n=r(n.selection.$from.start())(n),s(n)}return n}},c=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof Er.Fragment?t:Er.Fragment.from(t))},u=function(e){return function(t){var n=t.doc.nodeAt(e);return s(t.delete(e,e+n.nodeSize))}},p=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t},d=function(e,t){var n=e.index();return t instanceof Er.Fragment?e.parent.canReplace(n,n,t):t instanceof Er.Node&&e.parent.canReplaceWith(n,n,t.type)},h=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},f=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},m=function(e){return function(t){for(var n=t.$from,r=n.depth;0<r;r--){var o=n.node(r);if(e(o))return{pos:0<r?n.before(r):0,start:n.start(r),depth:r,node:o}}}},v=function(e,t){for(var n=e.depth;0<n;n--){var r=e.node(n);if(t(r))return{pos:0<n?e.before(n):0,start:e.start(n),depth:n,node:r}}},g=function(e,t){return function(n){var r=m(e)(n);if(r)return C(r.pos,t)}},y=function(e){return function(t){return!!m(e)(t)}},b=function(e){return function(t){return m((function(t){return a(e,t)}))(t)}},w=function(e){var t=e.$from.nodeBefore,n=Ar.Selection.findFrom(e.$from,-1);if(n&&t){var r=b(t.type)(n);return r?r.pos:n.$from.pos}},C=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},k=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},S=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return k(e,n).filter((function(e){return t(e.node)}))},x=function(e,t,n){return S(e,(function(e){return e.type===t}),n)},E=function(e){return m((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},M=function(e){return e instanceof Ni.CellSelection},O=function(e){if(M(e)){var t=e.$anchorCell.start(-1);return Ni.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},A=function(e){return!!M(e)&&e.isColSelection()&&e.isRowSelection()},D=function(e){return function(t){var n=E(t);if(n){var r=Ni.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(0<=t&&t<=r.width-1){var o=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},T=function(e){return function(t){var n=E(t);if(n){var r=Ni.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(0<=t&&t<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},R=function(e){var t=E(e);if(t){var n=Ni.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},N=function(e){return function(t){var n=E(t.selection);if(n){var r=Ni.TableMap.get(n.node);if(0<=e&&e<=r.height){for(var i=n.node,a=p(i.type.schema),s=n.start,l=0;l<e+1;l++)s+=i.child(l).nodeSize;var c=i.child(e),u=[],d=0;if(c.forEach((function(e){1===e.attrs.rowspan&&(d+=e.attrs.colspan,u.push(a[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),d<r.width){for(var h=[],f=function(n){var r=_(n,(function(t,r){var o=t.node.attrs.rowspan;return 1<o&&e<n+o}))(t);h.push.apply(h,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},m=e;0<=m;m--)f(m);h.length&&h.forEach((function(e){t=L(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return o(a.row.create(c.attrs,u),s)(t)}}return t}},P=function(e){return function(t){var n=E(t.selection);if(n){var r=Ni.TableMap.get(n.node);if(0===e&&1===r.width)return I(t);if(0<=e&&e<=r.width)return Ni.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),s(t)}return t}},F=function(e){return function(t){var n=E(t.selection);if(n){var r=Ni.TableMap.get(n.node);if(0===e&&1===r.height)return I(t);if(0<=e&&e<=r.height)return Ni.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),s(t)}return t}},I=function(e){for(var t=e.selection.$from,n=t.depth;0<n;n--)if("table"===t.node(n).type.spec.tableRole)return s(e.delete(t.before(n),t.after(n)));return e},L=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),s(n)):n}},B=function(e){return v(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},z=function(e){var t=B(e);if(t){var n=v(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)})),r=Ni.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},_=function(e,t){return function(n){var r=[],o=T(e)(n.selection);if(o)for(var i=o.length-1;0<=i;i--)t(o[i],n)&&r.push(o[i]);return r}};t.isNodeSelection=i,t.canInsert=d,t.findParentNode=m,t.findParentNodeClosestToPos=v,t.findParentDomRef=g,t.hasParentNode=y,t.findParentNodeOfType=b,t.findParentNodeOfTypeClosestToPos=function(e,t){return v(e,(function(e){return a(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return y((function(t){return a(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return g((function(t){return a(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(i(t)){var n=t.node,r=t.$from;if(a(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=w,t.findDomRefAtPos=C,t.flatten=k,t.findChildren=S,t.findTextNodes=function(e,t){return S(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return S(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return S(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return S(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=x,t.findChildrenByMark=function(e,t,n){return S(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!x(e,t).length},t.findTable=E,t.isCellSelection=M,t.getSelectionRect=O,t.isColumnSelected=function(e){return function(t){if(M(t)){var n=O(t);return!!n&&t.isColSelection()&&e>=n.left&&e<n.right}return!1}},t.isRowSelected=function(e){return function(t){if(M(t)){var n=O(t);return!!n&&t.isRowSelection()&&e>=n.top&&e<n.bottom}return!1}},t.isTableSelected=A,t.getCellsInColumn=D,t.getCellsInRow=T,t.getCellsInTable=R,t.selectColumn=function(e){return function(t){var n=D(e)(t.selection);if(n){var r=t.doc.resolve(n[0].pos),o=t.doc.resolve(n[n.length-1].pos);return s(t.setSelection(new Ni.CellSelection(r,o)))}return t}},t.selectRow=function(e){return function(t){var n=T(e)(t.selection);if(n){var r=t.doc.resolve(n[0].pos),o=t.doc.resolve(n[n.length-1].pos);return s(t.setSelection(new Ni.CellSelection(r,o)))}return t}},t.selectTable=function(e){var t=R(e.selection);if(t){var n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return s(e.setSelection(new Ni.CellSelection(n,r)))}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=p(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos,e.pos+e.node.nodeSize-1,new Er.Slice(r,0,0)),s(n)}return n}},t.addColumnAt=function(e){return function(t){var n=E(t.selection);if(n){var r=Ni.TableMap.get(n.node);if(0<=e&&e<=r.width)return s(Ni.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.addRowAt=function(e,t){return function(n){var r=E(n.selection);if(r){var o=Ni.TableMap.get(r.node),i=e-1;if(t&&0<=i)return s(N(i)(n));if(0<=e&&e<=o.height)return s(Ni.addRow(n,{map:o,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=N,t.removeColumnAt=P,t.removeRowAt=F,t.removeTable=I,t.removeSelectedColumns=function(e){var t=e.selection;if(A(t))return I(e);if(M(t)){var n=E(t);if(n){var r=Ni.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=i.right-1;Ni.removeColumn(e,i,a),a!==i.left;a--)i.table=i.tableStart?e.doc.nodeAt(i.tableStart-1):e.doc,i.map=Ni.TableMap.get(i.table);return s(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(A(t))return I(e);if(M(t)){var n=E(t);if(n){var r=Ni.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var i=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=i.bottom-1;Ni.removeRow(e,i,a),a!==i.top;a--)i.table=i.tableStart?e.doc.nodeAt(i.tableStart-1):e.doc,i.map=Ni.TableMap.get(i.table);return s(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=z(e);return n?P(n.left)(r(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=z(e);return n?F(n.top)(r(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(r){var o=D(e)(r.selection);if(o){for(var i=o.length-1;0<=i;i--)r=t(o[i],r);if(n){var a=r.doc.resolve(r.mapping.map(o[o.length-1].pos));r.setSelection(Ar.Selection.near(a))}return s(r)}return r}},t.forEachCellInRow=function(e,t,n){return function(r){var o=T(e)(r.selection);if(o){for(var i=o.length-1;0<=i;i--)r=t(o[i],r);if(n){var a=r.doc.resolve(r.mapping.map(o[o.length-1].pos));r.setSelection(Ar.Selection.near(a))}}return r}},t.setCellAttrs=L,t.createTable=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3,r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,i=p(e),a=i.cell,s=i.header_cell,l=i.row,c=i.table,u=[],d=[],h=0;h<n;h++)u.push(f(a,o)),r&&d.push(f(s,o));for(var m=[],v=0;v<t;v++)m.push(l.createChecked(null,r&&0===v?d:u));return c.createChecked(null,m)},t.findCellClosestToPos=B,t.findCellRectClosestToPos=z,t.getSelectionRangeInColumn=function(e){return function(t){for(var n=e,r=e,o=function(e){D(e)(t.selection).forEach((function(t){var o=t.node.attrs.colspan+e-1;n<=o&&(n=e),r<o&&(r=o)}))},i=e;0<=i;i--)o(i);var a=function(e){D(e)(t.selection).forEach((function(t){var n=t.node.attrs.colspan+e-1;1<t.node.attrs.colspan&&r<n&&(r=n)}))};for(i=e;i<=r;i++)a(i);var s=[];for(i=n;i<=r;i++){var l=D(i)(t.selection);l&&l.length&&s.push(i)}n=s[0],r=s[s.length-1];for(var c=D(n)(t.selection),u=T(0)(t.selection),p=t.doc.resolve(c[c.length-1].pos),d=void 0,h=r;n<=h;h--){var f=D(h)(t.selection);if(f&&f.length){for(var m=u.length-1;0<=m;m--)if(u[m].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:p,$head:t.doc.resolve(d.pos),indexes:s}}},t.getSelectionRangeInRow=function(e){return function(t){for(var n=e,r=e,o=function(e){T(e)(t.selection).forEach((function(t){var o=t.node.attrs.rowspan+e-1;n<=o&&(n=e),r<o&&(r=o)}))},i=e;0<=i;i--)o(i);var a=function(e){T(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;1<t.node.attrs.rowspan&&r<n&&(r=n)}))};for(i=e;i<=r;i++)a(i);var s=[];for(i=n;i<=r;i++){var l=T(i)(t.selection);l&&l.length&&s.push(i)}n=s[0],r=s[s.length-1];for(var c=T(n)(t.selection),u=D(0)(t.selection),p=t.doc.resolve(c[c.length-1].pos),d=void 0,h=r;n<=h;h--){var f=T(h)(t.selection);if(f&&f.length){for(var m=u.length-1;0<=m;m--)if(u[m].pos===f[0].pos){d=f[0];break}if(d)break}}return{$anchor:p,$head:t.doc.resolve(d.pos),indexes:s}}},t.removeParentNodeOfType=function(e){return function(t){var n=b(e)(t.selection);return n?u(n.pos)(t):t}},t.replaceParentNodeOfType=n,t.removeSelectedNode=function(e){if(i(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return s(e.delete(t,n))}return e},t.replaceSelectedNode=function(e){return function(t){if(i(t.selection)){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.canReplaceWith(r.index(),r.indexAfter(),e.type))return s(t.replaceWith(r.pos,o.pos,e))}return t}},t.setTextSelection=r,t.safeInsert=o,t.setParentNodeMarkup=function(e,t,n,r){return function(o){var i=b(e)(o.selection);return i?s(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),r)):o}},t.selectParentNodeOfType=function(e){return function(t){if(!i(t.selection)){var n=b(e)(t.selection);if(n)return s(t.setSelection(Ar.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=w(e.selection);return"number"==typeof t?u(t)(e):e}}));g(Aa),Aa.isNodeSelection,Aa.canInsert;var Da=Aa.findParentNode,Ta=(Aa.findParentNodeClosestToPos,Aa.findParentDomRef,Aa.hasParentNode,Aa.findParentNodeOfType,Aa.findParentNodeOfTypeClosestToPos,Aa.hasParentNodeOfType,Aa.findParentDomRefOfType,Aa.findSelectedNodeOfType,Aa.findPositionOfNodeBefore,Aa.findDomRefAtPos,Aa.flatten,Aa.findChildren,Aa.findTextNodes,Aa.findInlineNodes,Aa.findBlockNodes,Aa.findChildrenByAttr,Aa.findChildrenByType,Aa.findChildrenByMark,Aa.contains,Aa.findTable,Aa.isCellSelection,Aa.getSelectionRect,Aa.isColumnSelected,Aa.isRowSelected,Aa.isTableSelected,Aa.getCellsInColumn,Aa.getCellsInRow,Aa.getCellsInTable,Aa.selectColumn,Aa.selectRow,Aa.selectTable,Aa.emptyCell,Aa.addColumnAt,Aa.addRowAt,Aa.cloneRowAt,Aa.removeColumnAt,Aa.removeRowAt,Aa.removeTable,Aa.removeSelectedColumns,Aa.removeSelectedRows,Aa.removeColumnClosestToPos,Aa.removeRowClosestToPos,Aa.forEachCellInColumn,Aa.forEachCellInRow,Aa.setCellAttrs,Aa.createTable,Aa.findCellClosestToPos,Aa.findCellRectClosestToPos,Aa.getSelectionRangeInColumn,Aa.getSelectionRangeInRow,Aa.removeParentNodeOfType,Aa.replaceParentNodeOfType,Aa.removeSelectedNode,Aa.replaceSelectedNode,Aa.setTextSelection,Aa.safeInsert,Aa.setParentNodeMarkup,Aa.selectParentNodeOfType,Aa.removeNodeBefore,new Nr("table")),Ra=[new Rr({key:Ta,state:{init:function(){return{}},apply:function(e,t,n,r){var o;if(!1===e.getMeta("EDITOR_FOCUSED"))return{};var i=r.schema,a=r.selection,s=i.nodes,l=s.table_cell,c=s.table_header,u=Da((function(e){var t=e.type;return t===l||t===c}))(a);return u&&(o=Zr.create(r.doc,[Yr.node(u.start-1,u.start+u.node.nodeSize-1,{class:"nib-table-cell-marker",style:"position: relative;"})])),{decoration:o}}},props:{decorations:function(e){return(e&&Ta.getState(e)).decoration}}}),Ji(),Fi()],Na=function(e,t){return t?e.createChecked(null,t):e.createAndFill()},Pa={block:Jr,common:eo,help:mo,history:Ao,image:zo,inline:Uo,link:oi,list:gi,table:{keymaps:wa,name:"table",overlays:Oa,plugins:Ra,schema:{nodes:["table","table_row","table_cell","table_header"]},style:function(e){return'\n  .ProseMirror .tableWrapper {\n    overflow-x: auto;\n  }\n  .ProseMirror table {\n    border-collapse: collapse;\n    table-layout: fixed;\n    width: 100%;\n    overflow: hidden;\n  }\n  .ProseMirror td, .ProseMirror th {\n    vertical-align: top;\n    box-sizing: border-box;\n    position: relative;\n  }\n  .ProseMirror .column-resize-handle {\n    position: absolute;\n    right: -2px; top: 0; bottom: 0;\n    width: 4px;\n    z-index: 20;\n    background-color: #adf;\n    pointer-events: none;\n  }\n  .ProseMirror.resize-cursor {\n    cursor: ew-resize;\n    cursor: col-resize;\n  }\n  /* Give selected cells a blue overlay */\n  .ProseMirror .selectedCell:after {\n    z-index: 2;\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background: rgba(200, 200, 255, 0.4);\n    pointer-events: none;\n  }\n  .ProseMirror table td, .ProseMirror table th {\n    border: '.concat(e.table.border,";\n  }\n")},toolbarComponent:function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).insertTable=function(){var e=n.props.app_params.view;!function(e,t){for(var n=e.schema.nodes,r=n.table_cell,o=n.table_header,i=n.table_row,a=n.table,s=[],l=[],c=0;c<3;c++)l.push(Na(o)),s.push(Na(r));for(var u=[],p=0;p<3;p++)u.push(i.createChecked(null,0===p?l:s));var d=a.createChecked(null,u),h=e.selection,f=e.tr,m=h.$from,v=h.$to;t(f.replaceWith(m.pos,v.pos,d).scrollIntoView())}(e.state,e.dispatch)},n}return p(t,e.PureComponent),s(t,[{key:"render",value:function(){return r.createElement(Ye,{name:"table",onClick:this.insertTable,title:"Table"},r.createElement(nt.Table,null))}}]),t}()}},Fa=function(e){return e.trim().split(" ").map((function(e){return Pa[e]}))},Ia=function(e,t){var n,r=e.trim().split(" "),o=t.trim().split(" ").filter((function(e){return 0<=r.indexOf(e)||"history"===e}));return(n=o,n.map((function(e){return Pa[e]}))).map((function(e){return{name:e.name,toolbarComponent:e.toolbarComponent}}))},La=function(e){var t=e.options,n=e.app_params,o=t.filter((function(e){return"help"===e.name}));if(!o.length)return null;var i=o[0].toolbarComponent;return r.createElement(i,{app_params:n})},Ba=function(){function t(){return i(this,t),f(this,d(t).apply(this,arguments))}return p(t,e.Component),s(t,[{key:"render",value:function(){var t=this.context.config,n=t.plugins,o=t.toolbar,i=Ia(n.options,o.top.options),a=i.filter((function(e){return"help"!==e.name})),s=a.length;return r.createElement(kr,{render:function(t){return r.createElement(za,{onMouseDown:function(e){return e.preventDefault()}},r.createElement(_a,null,a.map((function(n,i){return r.createElement(e.Fragment,{key:"top-toolbar-option-".concat(n.name)},r.createElement(n.toolbarComponent,{config:o.top[n.name],app_params:t}),i<s-1&&r.createElement(yr,null))}))),r.createElement(La,{options:i,app_params:t}))}})}}]),t}();Ba.contextType=Cr;var za=Xe("div",{target:"e12508ag0",label:"Wrapper"})("align-items:center;display:flex;flex-wrap:wrap;justify-content:space-between;padding:4px;background-color:",(function(e){return e.theme.toolbar.top.backgroundColor}),";color:",(function(e){return e.theme.toolbar.top.color}),";border-bottom:",(function(e){return e.theme.toolbar.top.borderBottom}),";border-left:",(function(e){return e.theme.toolbar.top.borderLeft}),";border-right:",(function(e){return e.theme.toolbar.top.borderRight}),";border-top:",(function(e){return e.theme.toolbar.top.borderTop}),";border-bottom-left-radius:",(function(e){return e.theme.toolbar.top.borderBottomLeftRadius}),";border-bottom-right-radius:",(function(e){return e.theme.toolbar.top.borderBottomLeftRadius}),";border-top-left-radius:",(function(e){return e.theme.toolbar.top.borderTopLeftRadius}),";border-top-right-radius:",(function(e){return e.theme.toolbar.top.borderTopLeftRadius}),";font-size:",(function(e){return e.theme.toolbar.top.fontSize}),";font-style:",(function(e){return e.theme.toolbar.top.fontStyle}),";font-family:",(function(e){return e.theme.toolbar.top.fontFamily}),";"),_a=Xe("div",{target:"e12508ag1",label:"ToolbarSection"})({name:"aswqvx",styles:"align-items:center;display:flex;flex-wrap:wrap;"}),Va=function(){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=f(this,(e=d(t)).call.apply(e,[this].concat(o)))).closeOverlay=function(){var e=n.props.app_params.view,t=e.state;(0,e.dispatch)(t.tr.setMeta("HIDE_OVERLAYS",!0))},n}return p(t,e.Component),s(t,[{key:"render",value:function(){var t=this.props,n=t.editorWrapper,o=t.app_params,i=this.context.config,a=i.plugins,s=i.toolbar,l=Ia(a.options,s.inline.options),c=l.length,u=document.getElementsByClassName("nib-selected");return r.createElement("div",null,u[0]?r.createElement(ut,{closeOverlay:this.closeOverlay,editorWrapper:n,marker:u[0],render:function(){return r.createElement($a,{onMouseDown:function(e){return e.preventDefault()}},l.map((function(t,n){return r.createElement(e.Fragment,{key:"inline-toolbar-option-".concat(t.name)},r.createElement(t.toolbarComponent,{config:s.inline[t.name],app_params:o}),n<c-1&&r.createElement(yr,null))})))}}):null)}}]),t}();Va.contextType=Cr;var $a=Xe("div",{target:"e1kmuua90",label:"Wrapper"})("align-items:center;display:flex;position:relative;background-color:",(function(e){return e.theme.toolbar.inline.backgroundColor}),";color:",(function(e){return e.theme.toolbar.inline.color}),";border-bottom:",(function(e){return e.theme.toolbar.inline.borderBottom}),";border-left:",(function(e){return e.theme.toolbar.inline.borderLeft}),";border-right:",(function(e){return e.theme.toolbar.inline.borderRight}),";border-top:",(function(e){return e.theme.toolbar.inline.borderTop}),";border-bottom-left-radius:",(function(e){return e.theme.toolbar.inline.borderBottomLeftRadius}),";border-bottom-right-radius:",(function(e){return e.theme.toolbar.inline.borderBottomLeftRadius}),";border-top-left-radius:",(function(e){return e.theme.toolbar.inline.borderTopLeftRadius}),";border-top-right-radius:",(function(e){return e.theme.toolbar.inline.borderTopLeftRadius}),";padding:",(function(e){return e.theme.toolbar.inline.padding}),";font-size:",(function(e){return e.theme.toolbar.inline.fontSize}),";font-style:",(function(e){return e.theme.toolbar.inline.fontStyle}),";font-family:",(function(e){return e.theme.toolbar.inline.fontFamily}),";"),Wa={top:Ba,inline:function(e){return r.createElement(kr,{render:function(t){return r.createElement(Va,c({app_params:t},e))}})}},ja=function e(t,n){if(void 0===n)return t;if("object"!==o(t))return void 0===n?t:n;var r={};return Object.keys(t).forEach((function(i){"object"===o(t[i])?r[i]=e(t[i],n[i]):r[i]=void 0===n[i]?t[i]:n[i]})),r},Ha=function(e,t){return e&&Fa(e).reduce((function(e,n){return n[t]?[].concat(m(e),m(n[t])):e}),[])},Ka=function(e,t){var n=u({},e);return Object.keys(t).forEach((function(e){n[e]?n[e].push(t[e]):n[e]=[t[e]]})),n},Ua=function(e){var t,n,r={};return e.forEach((function(e){e&&e.keymaps&&(r=Ka(r,e.keymaps))})),r=Ka(r,Lr),t=r,n={},Object.keys(t).forEach((function(e){n[e]=function(n,r){for(var o=!1,i=0;i<t[e].length;i++)if(t[e][i](n,r)){o=!0;break}return o}})),new Ri(r=n)},qa=["em",0],Ja=["s",0],Ga=["strong",0],Xa=["u",0],Ya={em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return qa}},link:{attrs:{href:{}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",e.attrs,0]}},strike:{parseDOM:[{tag:"strike"},{tag:"s"},{tag:"del"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e&&null}}],toDOM:function(){return Ja}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!=e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return Ga}},subsup:{inclusive:!0,attrs:{type:{default:"sub"}},parseDOM:[{tag:"sub",attrs:{type:"sub"}},{tag:"sup",attrs:{type:"sup"}}],toDOM:function(e){return[e.attrs.type]}},underline:{parseDOM:[{tag:"u"},{style:"text-decoration: underline"}],toDOM:function(){return Xa}}},Za=["ul",0],Qa={content:"listItem+",parseDOM:[{tag:"ul"}],group:"block",toDOM:function(){return Za}},es=["li",0],ts={content:"(paragraph | heading){1} (paragraph | heading | orderedList | bulletList)*",group:"block",parseDOM:[{tag:"li"}],toDOM:function(){return es},defining:!0},ns=["ol",0],rs={content:"listItem+",attrs:{order:{default:1}},group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?ns:["ol",{start:e.attrs.order},0]}},is=["p",0],as={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return is}},ss=Ki({tableGroup:"block",cellContent:"block+"}),ls=ss.table,cs=ss.table_row,us={bulletList:Qa,doc:{content:"block+",group:"block"},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},image:{group:"inline",inline:!0,attrs:{src:{default:""},style:{default:{height:"auto",width:"auto"}}},draggable:!0,parseDOM:[{tag:'img[src^="data:image/"]',ignore:!0},{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),style:e.getAttribute("style")}}}],toDOM:function(e){return["img",e.attrs]}},listItem:ts,orderedList:rs,paragraph:as,table:ls,table_cell:ss.table_cell,table_header:ss.table_header,table_row:cs,text:{group:"inline"}},ps={type:"doc",content:[{type:"paragraph"}]},ds=function(e,t){return Tr.fromJSON({schema:(o=e,i=o.map((function(e){return e&&e.schema})).reduce((function(e,t){return t&&(e.nodes=[].concat(m(e.nodes),m(t.nodes||[])),e.marks=[].concat(m(e.marks),m(t.marks||[]))),e}),{nodes:["paragraph"],marks:[]}),i.marks=i.marks.reduce((function(e,t){return e[t]=Ya[t],e}),{}),i.nodes=i.nodes.reduce((function(e,t){return e[t]=us[t],e}),{}),new Mr(i)),plugins:[Ua(e)].concat(m((n=e,r=[],n.forEach((function(e){e&&(e.plugins?r=[].concat(m(r),m(e.plugins)):e.plugin&&(r=[].concat(m(r),[e.plugin])))})),r)))},{doc:t||ps,selection:{type:"text",anchor:1,head:1}});var n,r,o,i},hs={p:{display:"block",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"0px"},h1:{display:"block",fontSize:"2em",marginBlockStart:"0.67em",marginBlockEnd:"0.67em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h2:{display:"block",fontSize:"1.5em",marginBlockStart:"0.83em",marginBlockEnd:"0.83em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h3:{display:"block",fontSize:"1.17em",marginBlockStart:"1em",marginBlockEnd:"1em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h4:{display:"block",marginBlockStart:"1.33em",marginBlockEnd:"1.33em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h5:{display:"block",fontSize:"0.83em",marginBlockStart:"1.67em",marginBlockEnd:"1.67em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"},h6:{display:"block",fontSize:"0.67em",marginBlockStart:"2.33em",marginBlockEnd:"2.33em",marginInlineStart:"0px",marginInlineEnd:"0px",fontWeight:"bold"}},fs=[{cssKey:"display",jsKey:"display"},{cssKey:"font-size",jsKey:"fontSize"},{cssKey:"font-weight",jsKey:"fontWeight"},{cssKey:"margin-block-start",jsKey:"marginBlockStart"},{cssKey:"margin-block-end",jsKey:"marginBlockEnd"},{cssKey:"margin-inline-start",jsKey:"marginInlineStart"},{cssKey:"margin-inline-end",jsKey:"marginInlineEnd"}],ms=function(e){return fs.reduce((function(t,n){return"".concat(t).concat(n.cssKey,":").concat(e[n.jsKey],";")}),"")},vs=function(e){return"\n  p  {".concat(ms(e.p),"}\n  h1 {").concat(ms(e.h1),"}\n  h2 {").concat(ms(e.h2),"}\n  h3 {").concat(ms(e.h3),"}\n  h4 {").concat(ms(e.h4),"}\n  h5 {").concat(ms(e.h5),"}\n  h6 {").concat(ms(e.h6),"}\n")},gs=Xe("div",{target:"ekka5440",label:"Wrapper"})("position:relative;background-color:",(function(e){return e.theme.wrapper.backgroundColor}),";color:",(function(e){return e.theme.wrapper.color}),";border-bottom:",(function(e){return e.theme.wrapper.borderBottom}),";border-left:",(function(e){return e.theme.wrapper.borderLeft}),";border-right:",(function(e){return e.theme.wrapper.borderRight}),";border-top:",(function(e){return e.theme.wrapper.borderTop}),";border-bottom-left-radius:",(function(e){return e.theme.wrapper.borderBottomLeftRadius}),";border-bottom-right-radius:",(function(e){return e.theme.wrapper.borderBottomRightRadius}),";border-top-left-radius:",(function(e){return e.theme.wrapper.borderTopLeftRadius}),";border-top-right-radius:",(function(e){return e.theme.wrapper.borderTopRightRadius}),";height:",(function(e){return e.theme.wrapper.height}),";width:",(function(e){return e.theme.wrapper.width}),";padding:",(function(e){return e.theme.wrapper.padding}),";font-style:",(function(e){return e.theme.wrapper.fontStyle}),";font-family:",(function(e){return e.theme.wrapper.fontFamily}),";text-align:",(function(e){return e.theme.wrapper.textAlign}),";",(function(e){var t=e.theme;return vs(t.blockStyles)}),";"),ys=Xe("div",{target:"ekka5441",label:"StyledEditor"})("background-color:",(function(e){return e.theme.editor.backgroundColor}),";color:",(function(e){return e.theme.editor.color}),";border-bottom:",(function(e){return e.theme.editor.borderBottom}),";border-left:",(function(e){return e.theme.editor.borderLeft}),";border-right:",(function(e){return e.theme.editor.borderRight}),";border-top:",(function(e){return e.theme.editor.borderTop}),";border-bottom-left-radius:",(function(e){return e.theme.editor.borderBottomLeftRadius}),";border-bottom-right-radius:",(function(e){return e.theme.editor.borderBottomRightRadius}),";border-top-left-radius:",(function(e){return e.theme.editor.borderTopLeftRadius}),";border-top-right-radius:",(function(e){return e.theme.editor.borderTopRightRadius}),";height:",(function(e){return e.theme.editor.height}),";width:",(function(e){return e.theme.editor.width}),";padding:",(function(e){return e.theme.editor.padding}),";font-size:",(function(e){return e.theme.editor.fontSize}),";font-style:",(function(e){return e.theme.editor.fontStyle}),";font-family:",(function(e){return e.theme.editor.fontFamily}),';& .ProseMirror{&:focus{outline:none;}}.ProseMirror{position:relative;}.ProseMirror{word-wrap:break-word;white-space:pre-wrap;-webkit-font-variant-ligatures:none;font-variant-ligatures:none;}.ProseMirror pre{white-space:pre-wrap;}.ProseMirror li{position:relative;}.ProseMirror-hideselection *::selection{background:transparent;}.ProseMirror-hideselection *::-moz-selection{background:transparent;}.ProseMirror-hideselection{caret-color:transparent;}.ProseMirror-selectednode{outline:2px solid #8cf;}li.ProseMirror-selectednode{outline:none;}li.ProseMirror-selectednode:after{content:"";position:absolute;left:-32px;right:-2px;top:-2px;bottom:-2px;border:2px solid #8cf;pointer-events:none;}',(function(e){var t=e.theme;return vs(t.blockStyles)}),";",(function(e){var t=e.theme;return(0,e.pluginStyles)(t)}),""),bs=function(){function t(e){var n;return i(this,t),(n=f(this,d(t).call(this,e))).editorRef=r.createRef(),n}return p(t,e.Component),s(t,[{key:"componentDidMount",value:function(){var e=this,t=this.context.config.plugins,n=this.props,r=n.defaultValue,o=n.onChange,i=n.autofocus,a=ds(Fa("".concat(t.options," history common")),r);this.view=new Xr(this.editorRef.current,{state:a,dispatchTransaction:function(t){var n,r,i;r=t,i=(n=e.view).state.apply(r),n.updateState(i),e.context.dispatcher.dispatch(e.view),o&&t.docChanged&&o(e.view.state.toJSON().doc)}}),i&&this.view.focus(),this.context.dispatcher.dispatch(this.view)}},{key:"componentWillUnmount",value:function(){this.view.destroy()}},{key:"render",value:function(){var e,t,n=this.props.spellcheck,o=this.context.config.plugins;return r.createElement(ys,{ref:this.editorRef,spellcheck:n,pluginStyles:(e=o.options,t=e.trim().split(" ").map((function(e){return e&&Pa[e].style})).reduce((function(e,t){return t&&e.push(t),e}),[]),function(e){return t.reduce((function(t,n){return t+n(e)}),"")})})}}]),t}();bs.contextType=Cr,bs.propTypes={config:C.object,defaultValue:C.object,onChange:C.func,updateView:C.func};var ws={border:"rgba(158, 158, 158, 0.75)",boxShadow:"#cdcdcdbf",highlight:"#065FD4",gray1:"#E0E0E0",gray2:"#9E9E9E",gray3:"#BDBDBD",grayText:"#616161",lightBorder:"rgba(201,201,201,0.75)",text:"#212121",white:"#FFFFFF",opaque:"rgba(0, 0, 0, 0.25)"},Cs={Color:ws,FontSize:{large:"16px",medium:"14px",small:"12px"},DisabledStyle:{opacity:.5},Border:"1px solid ".concat(ws.border),BoxShadow:"".concat(ws.boxShadow," 0px 2px 8px -2px,").concat(ws.boxShadow," 0px 0px 1px")},ks=Cs.Color,Ss=Cs.FontSize,xs=Cs.BoxShadow,Es=Cs.Border,Ms="auto",Os="inherit",As="none",Ds="0px",Ts={wrapper:{backgroundColor:ks.white,borderBottom:Es,borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",borderLeft:Es,borderRight:Es,borderTop:Es,borderTopLeftRadius:"2px",borderTopRightRadius:"2px",color:ks.text,fontFamily:Os,fontSize:Ss.medium,fontStyle:Os,height:Ms,padding:Ds,textAlign:"left",width:Ms},editor:{backgroundColor:ks.white,borderBottom:As,borderBottomLeftRadius:Ds,borderBottomRightRadius:Ds,borderLeft:As,borderRight:As,borderTop:As,borderTopLeftRadius:Ds,borderTopRightRadius:Ds,color:ks.text,fontFamily:Os,fontSize:Ss.medium,fontStyle:Os,height:Ms,padding:"4px",width:Ms},button:{toolbar:{backgroundColor:ks.white,border:As,borderRadius:"2px",color:ks.text,fontSize:Ss.medium,height:"28px",margin:Ds,padding:Ds,width:"28px","&:active":"\n        background-color: ".concat(ks.gray2," !important;\n      "),"&:disabled":"{\n        opacity: ".concat(Cs.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        outline: none;\n        background-color: ".concat(ks.gray1,";\n      }"),"&:hover":"{\n        background-color: ".concat(ks.gray1,";\n      }"),"&:selected":"{\n        background-color: ".concat(ks.gray3," !important;\n      }")},primary:{backgroundColor:ks.highlight,border:As,borderRadius:"2px",color:ks.white,fontSize:Ss.medium,height:"32px",margin:Ds,padding:Ds,width:"124px","&:active":"\n        border-radius: 3px !important;\n        background-color: ".concat(ks.gray2," !important;\n      "),"&:disabled":"{\n        opacity: ".concat(Cs.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        outline: none;\n        background-color: ".concat(ks.gray1,";\n      }"),"&:hover":"{\n        background-color: ".concat(ks.gray1,";\n      }"),"&:selected":"{\n        background-color: ".concat(ks.gray3," !important;\n      }")},link:{backgroundColor:ks.white,border:As,borderRadius:Ds,color:ks.text,textDecoration:"underline",fontSize:Ss.medium,height:Ms,margin:Ds,padding:Ds,width:Ms,"&:active":"{\n        color: ".concat(ks.highlight,";\n      }"),"&:disabled":"{\n        opacity: ".concat(Cs.DisabledStyle.opacity,";\n      }"),"&:focus":"{\n        color: ".concat(ks.highlight,";\n        outline: none;\n        text-decoration: underline;\n      }"),"&:hover":"{\n        text-decoration: underline;\n      }"}},blockSelect:{backgroundColor:ks.white,border:As,borderRadius:"2px",color:ks.text,dropdownWidth:"188px",fontSize:Ss.medium,height:"28px",keymapColor:ks.grayText,optionHeight:"44px",width:"112px","&:hover":{backgroundColor:ks.gray1,color:ks.text},"&:selected":{backgroundColor:ks.gray3}},icon:{fill:ks.text},link:{backgroundColor:ks.white,color:ks.highlight,fontSize:Ss.small,"&:hover":"{\n      text-decoration: underline;\n    }"},input:{backgroundColor:ks.white,border:Es,color:ks.text,fontSize:Ss.medium,height:"20px",margin:"4px 8px",padding:"2px",width:"180px","&:focus":"{\n      border: 1px solid ".concat(ks.highlight,";\n      outline: none;\n    }")},toolbarSeparator:{backgroundColor:ks.lightBorder,height:"24px",margin:"0px 4px"},overlay:{arrowBorderColor:ks.border,backgroundColor:ks.white,borderBottom:"1px solid ".concat(ks.border),borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",borderLeft:"1px solid ".concat(ks.border),borderRight:"1px solid ".concat(ks.border),borderTop:"1px solid ".concat(ks.border),borderTopLeftRadius:"2px",borderTopRightRadius:"2px",boxShadow:xs,color:ks.text,fontWeight:"600"},modal:{modalBackgroundColor:ks.opaque,backgroundColor:ks.white,color:ks.text,contentBoxShadow:xs,contentBorderRadius:"2px"},spinner:{borderColor:ks.white,borderTopColor:ks.highlight,borderWidth:"5px",height:"24px",width:"24px"},toolbar:{top:{backgroundColor:ks.white,borderBottom:Es,borderBottomLeftRadius:Ds,borderBottomRightRadius:Ds,borderLeft:As,borderRight:As,borderTop:As,borderTopLeftRadius:Ds,borderTopRightRadius:Ds,color:ks.text,fontFamily:Os,fontSize:Ss.medium,fontStyle:Os},inline:{backgroundColor:ks.white,borderBottom:As,borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderLeft:As,borderRight:As,borderTop:As,borderTopLeftRadius:"4px",borderTopRightRadius:"4px",color:ks.text,fontFamily:Os,fontSize:Ss.medium,fontStyle:Os,padding:"2px"}},imageUploadModal:{backgroundColor:ks.gray1,borderActiveColor:ks.highlight,borderColor:ks.text,height:"240px",wdith:"320px"},table:{cell:{menuIcon:{color:ks.gray2,height:20,width:20,"&:hover":"{\n          fill: ".concat(ks.text,"\n        }")},menuWrapper:{border:Es,backgroundColor:ks.white,color:ks.text,fontSize:Ss.small,borderRadius:"2px",boxShadow:xs},menuOption:{borderBottom:Es,padding:"5px",width:"150px","&:hover":"{\n          background-color: ".concat(ks.gray1,";\n        }")}},border:Es}},Rs=function(){function t(e){var n;return i(this,t),(n=f(this,d(t).call(this,e))).config=ja(wr.config,e.config),n.dispatcher={listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){var t=this.listeners.indexOf(e);-1<t&&this.listeners.splice(t,1)},dispatch:function(e){this.listeners.forEach((function(t){t(e)}))}},n.theme=ja(Ts,e.theme),n.theme=u({},n.theme,{blockStyles:ja(hs,e.blockStyles)}),n.editorWrapper=r.createRef(),n}return p(t,e.Component),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.defaultValue,o=t.onChange,i=t.autofocus,a=t.spellcheck,s=this.config,l=s.toolbar,c=s.plugins,u=this.config,p=this.dispatcher,d=0<=l.options.indexOf("inline"),h=0<=l.options.indexOf("top"),f=Ha(c.options,"overlays"),m=Ha(c.options,"modals");return r.createElement(Cr.Provider,{value:{config:u,dispatcher:p}},r.createElement(kr,{render:function(t){return r.createElement(Ae,{theme:e.theme},r.createElement(gs,{id:"nib-wrapper",ref:e.editorWrapper},h&&r.createElement(Wa.top,null),r.createElement(bs,{autoFocus:i,defaultValue:n,onChange:o,spellcheck:a}),d&&r.createElement(Wa.inline,{editorWrapper:e.editorWrapper}),r.createElement(Ie,{editorWrapper:e.editorWrapper,overlays:f,view:t.view}),r.createElement(Fe,{editorWrapper:e.editorWrapper,modals:m,view:t.view})))}}))}}]),t}();return Rs.propTypes={autofocus:C.bool,blockStyles:C.object,config:C.object,defaultValue:C.object,onChange:C.func,spellcheck:C.bool,theme:C.object},Rs}(n(65043),n(97950))},4488:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(58168),o=n(65043),i=n(64600),a=n.n(i);const s=function(e){return o.forwardRef((function(t,n){return o.createElement("div",(0,r.A)({},t,{ref:n,className:a()(t.className,e)}))}))}}}]);
//# sourceMappingURL=5002.f3ba2e6a.chunk.js.map